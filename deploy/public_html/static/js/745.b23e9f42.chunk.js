"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[745],{2380:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2631:(e,t,s)=>{s.d(t,{YB:()=>j});s(5043);var r=s(579);const a="rgba(247, 147, 30, 0.1)",l="rgba(255, 255, 255, 0.05)",n="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(l," 25%,\n      ").concat(a," 50%,\n      ").concat(l," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=n,document.head.appendChild(e)}const o=e=>{let{width:t="100%",height:s="1rem",className:a="",rounded:n="rounded-lg",animate:o=!0}=e;return(0,r.jsx)("div",{className:"".concat(n," border border-white/10 ").concat(o?"bp-skeleton-shimmer":""," ").concat(a),style:{width:t,height:s,background:o?void 0:l}})},i=e=>{let{className:t=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(t),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(o,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,r.jsx)(o,{width:"3rem",height:"2rem"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o,{width:"70%",height:"1rem"}),(0,r.jsx)(o,{width:"90%",height:"0.75rem"})]})]})},d=e=>{let{rows:t=5,columns:s=4,className:a=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(a),children:[(0,r.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,r.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,r.jsx)(o,{width:"80%",height:"1rem"},t))})}),(0,r.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:t}).map((e,t)=>(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,r.jsx)(o,{width:0===t?"90%":"70%",height:"1rem"},t))})},t))})]})},c=e=>{let{count:t=2,className:s=""}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-".concat(Math.min(t,4)," gap-4 ").concat(s),children:Array.from({length:t}).map((e,t)=>(0,r.jsx)(i,{},t))})},m=e=>{let{count:t=6,className:s=""}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o,{width:"8rem",height:"0.75rem"}),(0,r.jsx)(o,{width:"4rem",height:"2rem"})]}),(0,r.jsx)(o,{width:"3rem",height:"3rem",rounded:"rounded-xl"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(o,{width:"60%",height:"0.75rem"})})]},t))})},x=e=>{let{className:t=""}=e;return(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 ".concat(t),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o,{width:"3rem",height:"3rem",rounded:"rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)(o,{width:"60%",height:"1rem"}),(0,r.jsx)(o,{width:"40%",height:"0.75rem"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(o,{width:"2rem",height:"2rem",rounded:"rounded-lg"}),(0,r.jsx)(o,{width:"2rem",height:"2rem",rounded:"rounded-lg"})]})]})})},h=e=>{let{className:t="",showButton:s=!1}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8 ".concat(t),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{width:"15rem",height:"2.5rem",className:"mb-2"}),(0,r.jsx)(o,{width:"20rem",height:"1rem"})]}),s&&(0,r.jsx)(o,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"})]})},u=e=>{let{tabs:t=3,className:s=""}=e;return(0,r.jsx)("div",{className:"flex space-x-1 mb-8 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,r.jsx)(o,{width:"8rem",height:"3rem",rounded:"rounded-lg"},t))})},p=e=>{let{className:t=""}=e;return(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 mb-8 ".concat(t),children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(o,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,r.jsx)("div",{className:"md:w-48",children:(0,r.jsx)(o,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})})]})})},g=e=>{let{className:t=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(t),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o,{width:"8rem",height:"1rem"}),(0,r.jsx)(o,{width:"6rem",height:"0.75rem"})]}),(0,r.jsx)(o,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(o,{width:"4rem",height:"0.75rem"}),(0,r.jsx)(o,{width:"6rem",height:"0.75rem"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(o,{width:"5rem",height:"0.75rem"}),(0,r.jsx)(o,{width:"7rem",height:"0.75rem"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,r.jsx)(o,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,r.jsx)(o,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},j=e=>{let{type:t="dashboard"}=e;switch(t){case"dashboard":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(c,{count:4}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)(i,{},t))})]})]})});case"pin-management":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{showButton:!0}),(0,r.jsx)(u,{tabs:3}),(0,r.jsx)(m,{count:6}),(0,r.jsx)(p,{}),(0,r.jsx)(d,{rows:8,columns:5})]})});case"customers":case"promoters":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{showButton:!0}),(0,r.jsx)(p,{}),(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:8}).map((e,t)=>(0,r.jsx)(x,{},t))})]})});case"withdrawals":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{}),(0,r.jsx)(p,{}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)(g,{},t))})]})});default:return(0,r.jsx)(j,{type:"dashboard"})}}},3395:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},4999:(e,t,s)=>{s.d(t,{A:()=>m});var r=s(2555),a=s(5043),l=(s(6127),s(917)),n=s(5923),o=s(8775),i=s(5897),d=s(579);const c=a.memo(e=>{let{onSubmit:t,onCancel:s,loading:c=!1,editingPromoter:m=null,availableParents:x=[],adminUsers:h=[]}=e;const[u,p]=(0,a.useState)({name:"",email:"",hasEmail:!1,password:"",confirmPassword:"",phone:"",address:"",parentPromoter:""}),[g,j]=(0,a.useState)({}),[f,v]=(0,a.useState)(!1),[w,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(m){const e=m.email||"",t=e&&!e.includes("noemail+")&&!e.includes("@brightplanetventures.local");p({name:m.name||"",email:t?e:"",hasEmail:t,password:"",confirmPassword:"",phone:m.phone||"",address:m.address||"",parentPromoter:m.parent_promoter_id||""})}},[m]);const N=(0,a.useMemo)(()=>[...(h||[]).map(e=>({id:e.id,label:"\ud83d\udc51 ".concat(e.name," (Admin)"),type:"admin"})),...(x||[]).map(e=>({id:e.id||e._id,label:e.isCurrentUser?"".concat(e.promoter_id||"CURRENT"," - ").concat(e.name," (You)"):"".concat(e.promoter_id||"N/A"," - ").concat(e.name||"Unknown"),type:"promoter"}))],[h,x]),y=(0,a.useCallback)((e,t)=>{const s={};switch(e){case"name":t&&t.trim()?/^[a-zA-Z\s]+$/.test(t.trim())?t.trim().length<2&&(s.name="Name must be at least 2 characters"):s.name="Name must contain only letters and spaces":s.name="Name is required";break;case"email":if(u.hasEmail)if(t&&t.trim()){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())||(s.email="Please enter a valid email address")}else s.email="Email address is required";break;case"password":m||(t?t.length<8?s.password="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*\d)/.test(t)||(s.password="Password must contain both letters and numbers"):s.password="Password is required");break;case"confirmPassword":m||t===u.password||(s.confirmPassword="Passwords do not match");break;case"phone":t?/^[6-9]\d{9}$/.test(t)||(s.phone="Enter a valid 10-digit Indian mobile number (starting with 6-9)"):s.phone="Phone number is required";break;case"parentPromoter":!t&&N.length>1&&(s.parentPromoter="Parent promoter selection is required")}return s},[u.hasEmail,u.password,m,N]),k=(0,a.useCallback)((e,t)=>{p(s=>(0,r.A)((0,r.A)({},s),{},{[e]:t}));const s=y(e,t);j(e=>(0,r.A)((0,r.A)({},e),s)),!s[e]&&g[e]&&j(t=>{const s=(0,r.A)({},t);return delete s[e],s})},[y,g]),P=(0,a.useCallback)(()=>{const e={};return Object.keys(u).forEach(t=>{const s=y(t,u[t]);Object.assign(e,s)}),j(e),0===Object.keys(e).length},[u,y,m]);(0,a.useEffect)(()=>{1!==N.length||u.parentPromoter||p(e=>(0,r.A)((0,r.A)({},e),{},{parentPromoter:N[0].id}))},[N,u.parentPromoter]);const A=(0,a.useCallback)(async e=>{if(e.preventDefault(),!P())return;const s={name:u.name,email:u.hasEmail&&u.email?u.email:null,password:u.password,phone:u.phone,address:u.address||null,parentPromoter:u.parentPromoter||null,useNewSystem:!0};await t(s)},[u,P,t]);return(0,d.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-white mb-1",children:m?"Edit Promoter":"Create New Promoter"}),(0,d.jsx)("p",{className:"text-gray-400 text-sm",children:m?"Update promoter information and hierarchy":"Add a new promoter to the system. Promoter ID (BPVP format) will be auto-generated."}),!m&&(0,d.jsx)("div",{className:"mt-2 p-3 bg-orange-900/30 border border-orange-500/30 rounded-lg",children:(0,d.jsxs)("p",{className:"text-orange-300 text-xs",children:["\ud83c\udfaf ",(0,d.jsx)("strong",{children:"New System:"})," Promoters will login using their auto-generated Promoter ID (e.g., BPVP01) + password. Email is optional and used for notifications only."]})})]})}),(0,d.jsxs)("form",{onSubmit:A,className:"space-y-5",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Full Name",(0,d.jsx)("span",{className:"text-orange-400 ml-1",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:u.name,onChange:e=>k("name",e.target.value),className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.name?"border-red-500":"border-gray-600"),placeholder:"Enter full name (letters and spaces only)"}),g.name&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.name})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center mb-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"hasEmail",checked:u.hasEmail,onChange:e=>{const t=e.target.checked;p(e=>(0,r.A)((0,r.A)({},e),{},{hasEmail:t,email:t?e.email:""})),t||j(e=>{const t=(0,r.A)({},e);return delete t.email,t})},className:"mr-2 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-600 rounded bg-gray-700"}),(0,d.jsxs)("label",{htmlFor:"hasEmail",className:"text-sm font-medium text-gray-300",children:["Add Email Address",(0,d.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:"(Optional - for notifications only)"})]})]}),u.hasEmail&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{type:"email",value:u.email,onChange:e=>k("email",e.target.value),className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.email?"border-red-500":"border-gray-600"),placeholder:"Enter email address (can be shared with others)"}),g.email&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.email}),(0,d.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"\ud83d\udca1 Multiple promoters can share the same email address. Used for notifications only."})]}),!u.hasEmail&&(0,d.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"\u2139\ufe0f Email is optional. Promoter will login using their Promoter ID only."})]}),!m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Password",(0,d.jsx)("span",{className:"text-orange-400 ml-1",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:f?"text":"password",value:u.password,onChange:e=>k("password",e.target.value),className:"w-full px-4 py-3 pr-12 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.password?"border-red-500":"border-gray-600"),placeholder:"Enter secure password (min 8 chars, letters + numbers)"}),(0,d.jsx)("button",{type:"button",onClick:()=>v(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:f?(0,d.jsx)(n.A,{className:"w-5 h-5"}):(0,d.jsx)(o.A,{className:"w-5 h-5"})})]}),g.password&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.password})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirm Password",(0,d.jsx)("span",{className:"text-orange-400 ml-1",children:"*"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:w?"text":"password",value:u.confirmPassword,onChange:e=>k("confirmPassword",e.target.value),className:"w-full px-4 py-3 pr-12 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.confirmPassword?"border-red-500":"border-gray-600"),placeholder:"Confirm your password"}),(0,d.jsx)("button",{type:"button",onClick:()=>b(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:w?(0,d.jsx)(n.A,{className:"w-5 h-5"}):(0,d.jsx)(o.A,{className:"w-5 h-5"})})]}),g.confirmPassword&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.confirmPassword})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Phone Number",(0,d.jsx)("span",{className:"text-orange-400 ml-1",children:"*"})]}),(0,d.jsx)("input",{type:"tel",value:u.phone,onChange:e=>k("phone",e.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.phone?"border-red-500":"border-gray-600"),placeholder:"Enter 10-digit mobile number",maxLength:10}),g.phone&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Address",(0,d.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:"(Optional)"})]}),(0,d.jsx)("textarea",{value:u.address,onChange:e=>k("address",e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Enter full postal address (optional)",rows:3})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Parent Promoter",(0,d.jsx)("span",{className:"text-orange-400 ml-1",children:"*"})]}),(0,d.jsxs)("select",{value:u.parentPromoter,onChange:e=>k("parentPromoter",e.target.value),disabled:1===N.length,className:"w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ".concat(g.parentPromoter?"border-red-500":"border-gray-600"," ").concat(1===N.length?"opacity-75 cursor-not-allowed":""),children:[0===N.length&&(0,d.jsx)("option",{value:"",children:"Select parent promoter"}),N.map(e=>(0,d.jsx)("option",{value:e.id,children:e.label},e.id))]}),1===N.length&&(0,d.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"\ud83d\udca1 Automatically set as your downline promoter"}),g.parentPromoter&&(0,d.jsx)("p",{className:"text-red-400 text-sm mt-1",children:g.parentPromoter})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700",children:[(0,d.jsx)("button",{type:"button",onClick:s,className:"px-6 py-3 text-gray-300 hover:text-white transition-colors",disabled:c,children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:c||Object.keys(g).length>0,className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{className:"w-4 h-4 animate-spin"}),(0,d.jsx)("span",{children:m?"Updating...":"Creating..."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:m?"Update Promoter":"Create Promoter"})]})})]})]})]})});c.displayName="UnifiedPromoterForm";const m=c},5680:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},6339:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6787:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},8112:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8745:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var r=s(5043),a=s(6621),l=s(3216),n=s(6127),o=s(5559),i=s(4999),d=s(3959),c=s(2631),m=s(7607),x=s(3395),h=s(9589),u=s(6787),p=s(5680),g=s(2380),j=s(9256),f=s(6339),v=s(8112),w=s(1172),b=s(579);const N=function(){const{user:e}=(0,a.As)(),t=(0,l.Zp)(),[s,N]=(0,r.useState)(!0),[y,k]=(0,r.useState)([]),[P,A]=(0,r.useState)([]),[_,C]=(0,r.useState)(null),[E,S]=(0,r.useState)(""),[D,q]=(0,r.useState)("all"),[F,L]=(0,r.useState)(null),[M,U]=(0,r.useState)(!1),[I,B]=(0,r.useState)(!1),[T,z]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[V,Y]=(0,r.useState)(null),[Z,H]=(0,r.useState)(null),[$,X]=(0,r.useState)(!1);(0,d.r9)(),(0,r.useEffect)(()=>{J()},[e]);const J=async()=>{if(null!==e&&void 0!==e&&e.id)try{N(!0),C("");const{data:t,error:s}=await n.ND.from("profiles").select("\n          id,\n          name,\n          email,\n          phone,\n          promoter_id,\n          role_level,\n          status,\n          parent_promoter_id,\n          pins,\n          created_at,\n          updated_at,\n          parent_promoter:parent_promoter_id(\n            id,\n            name,\n            promoter_id,\n            role\n          )\n        ").eq("role","promoter").eq("parent_promoter_id",e.id).order("created_at",{ascending:!1});if(s)return console.error("Error loading promoters:",s),void C("Failed to load promoters: ".concat(s.message||"Unknown error"));if(!t)return console.warn("No promoter data returned from query"),k([]),void A([]);const r=(t||[]).map((e,t)=>({id:(null===e||void 0===e?void 0:e.id)||t+1,promoter_id:(null===e||void 0===e?void 0:e.promoter_id)||"BPVP".concat(String(t+1).padStart(2,"0")),name:(null===e||void 0===e?void 0:e.name)||"Unknown Promoter",email:(null===e||void 0===e?void 0:e.email)||"No email",phone:(null===e||void 0===e?void 0:e.phone)||"No phone",joinDate:null!==e&&void 0!==e&&e.created_at?new Date(e.created_at).toISOString().split("T")[0]:"2024-01-01",affiliate_level:"Affiliate"===(null===e||void 0===e?void 0:e.role_level)?1:2,can_create_promoters:!0,can_create_customers:!0,commission_rate:.05,status:(null===e||void 0===e?void 0:e.status)||"Active",pins:(null===e||void 0===e?void 0:e.pins)||0,parent_promoter:(null===e||void 0===e?void 0:e.parent_promoter)||null,originalData:e}));k(r),A(r)}catch(t){console.error("Error loading my promoters:",t),C("Failed to load promoters")}finally{N(!1)}};(0,r.useEffect)(()=>{let e=y||[];E&&(e=e.filter(e=>{const t=((null===e||void 0===e?void 0:e.name)||"").toLowerCase(),s=((null===e||void 0===e?void 0:e.email)||"").toLowerCase(),r=((null===e||void 0===e?void 0:e.promoter_id)||"").toLowerCase(),a=((null===e||void 0===e?void 0:e.phone)||"").toLowerCase(),l=(E||"").toLowerCase();return t.includes(l)||s.includes(l)||r.includes(l)||a.includes(l)})),D&&"all"!==D&&(e=e.filter(e=>((null===e||void 0===e?void 0:e.status)||"active").toLowerCase()===D.toLowerCase())),A(e)},[y,E,D]);const Q=()=>{B(!1)},G=()=>{z(!1),Y(null)},K=()=>{R(!1),H(null)},W={total:y.length,active:y.filter(e=>"active"===(e.status||"active").toLowerCase()).length,inactive:y.filter(e=>"inactive"===(e.status||"active").toLowerCase()).length,totalPins:y.reduce((e,t)=>e+(t.pins||0),0)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.wE,{}),(0,b.jsx)(o.A,{}),(0,b.jsx)(d.dQ,{children:(0,b.jsx)("div",{className:"min-h-screen p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8","data-animate":!0,children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("button",{onClick:()=>t("/promoter/home"),className:"p-2 rounded-lg bg-slate-700 hover:bg-slate-600 transition-colors",children:(0,b.jsx)(m.A,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Promoters"}),(0,b.jsx)("p",{className:"text-gray-300",children:"Manage and track your promoter network"}),_&&(0,b.jsxs)("p",{className:"text-red-400 text-sm mt-2",children:["\u26a0\ufe0f ",_]})]})]}),(0,b.jsxs)(d.Rq,{onClick:()=>B(!0),className:"flex items-center space-x-2",children:[(0,b.jsx)(g.A,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"Create Promoter"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8","data-animate":!0,children:(0,b.jsx)("div",{className:"bg-white/95 backdrop-blur-sm border border-slate-200 rounded-xl p-6 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-600 mb-1 font-medium",children:"Total Promoters"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-slate-900",children:W.total})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,b.jsx)(v.A,{className:"w-6 h-6 text-white"})})]})})}),(0,b.jsx)(d.Xg,{className:"p-6 mb-8","data-animate":!0,children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, promoter ID, or phone...",value:E,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,b.jsx)("div",{className:"flex gap-4",children:(0,b.jsxs)("select",{value:D,onChange:e=>q(e.target.value),className:"px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"})]})})]})}),(0,b.jsx)(d.Xg,{className:"overflow-hidden","data-animate":!0,children:s?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)(c.YB,{type:"promoters"})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-700",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter ID"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact Details"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Parent Promoter"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Level"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Pins"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:0===P.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-400",children:0===y.length?"No promoters found. Start by creating your first promoter!":"No promoters match your search criteria."})}):P.map(t=>{var s,r,a,l;return(0,b.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===t||void 0===t?void 0:t.promoter_id)||"N/A"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center mr-3",children:(0,b.jsx)("span",{className:"text-white text-sm font-bold",children:((null===t||void 0===t?void 0:t.name)||"U").charAt(0)})}),(0,b.jsx)("div",{className:"text-sm font-medium text-white",children:(null===t||void 0===t?void 0:t.name)||"Unknown Promoter"})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(h.A,{className:"w-3 h-3 mr-2 text-gray-400"}),(null===t||void 0===t?void 0:t.email)||"No email"]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(p.A,{className:"w-3 h-3 mr-2 text-gray-400"}),(null===t||void 0===t?void 0:t.phone)||"No phone"]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,b.jsx)("div",{className:"flex items-center",children:"admin"===(null===t||void 0===t||null===(s=t.parent_promoter)||void 0===s?void 0:s.role)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-yellow-400 mr-2",children:"\ud83d\udc51"}),(0,b.jsx)("span",{className:"text-white font-medium",children:(null===t||void 0===t||null===(r=t.parent_promoter)||void 0===r?void 0:r.name)||"Admin"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white font-medium",children:(null===t||void 0===t||null===(a=t.parent_promoter)||void 0===a?void 0:a.name)||(null===e||void 0===e?void 0:e.name)||"You"}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:(null===t||void 0===t||null===(l=t.parent_promoter)||void 0===l?void 0:l.promoter_id)||"Parent"})]})]})})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(x.A,{className:"w-4 h-4 mr-2 text-yellow-400"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:["Level ",(null===t||void 0===t?void 0:t.affiliate_level)||1]})]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,b.jsx)("button",{onClick:()=>(async e=>{try{var t;const s="active"===(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())?"Inactive":"Active",{error:r}=await n.ND.from("profiles").update({status:s}).eq("id",e.id);if(r)throw console.error("\u274c Status update error:",r),r;await J(),alert("\u2705 Promoter status updated to ".concat(s))}catch(_){console.error("Error updating promoter status:",_),alert("Failed to update promoter status: ".concat(_.message))}})(t),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors cursor-pointer hover:opacity-80 ".concat("active"===((null===t||void 0===t?void 0:t.status)||"active").toLowerCase()?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),title:"Click to toggle status",children:"active"===((null===t||void 0===t?void 0:t.status)||"active").toLowerCase()?"\u2705 Active":"\u274c Inactive"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,b.jsxs)("span",{className:"text-sm font-medium text-white",children:["\ud83d\udccc ",(null===t||void 0===t?void 0:t.pins)||0]})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{onClick:()=>(e=>{Y(e),z(!0)})(t),className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Edit Promoter",children:(0,b.jsx)(u.A,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>(e=>{H(e),R(!0)})(t),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete Promoter",children:(0,b.jsx)(f.A,{className:"w-4 h-4"})})]})})]},t.id)})})]})})}),M&&F&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-slate-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white",children:"Promoter Details"}),(0,b.jsx)("button",{onClick:()=>{U(!1),L(null)},className:"text-gray-400 hover:text-white transition-colors",children:(0,b.jsx)(w.A,{className:"w-6 h-6"})})]})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white text-xl font-bold",children:((null===F||void 0===F?void 0:F.name)||"U").charAt(0)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-xl font-bold text-white",children:(null===F||void 0===F?void 0:F.name)||"Unknown Promoter"}),(0,b.jsx)("p",{className:"text-gray-400",children:null===F||void 0===F?void 0:F.promoter_id}),(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-2 bg-green-100 text-green-800",children:"Active"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-lg font-bold text-white mb-4",children:"Promoter Information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Email"}),(0,b.jsx)("span",{className:"text-white font-medium",children:(null===F||void 0===F?void 0:F.email)||"No email"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Phone"}),(0,b.jsx)("span",{className:"text-white font-medium",children:(null===F||void 0===F?void 0:F.phone)||"No phone"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Join Date"}),(0,b.jsx)("span",{className:"text-white font-medium",children:null!==F&&void 0!==F&&F.joinDate?new Date(F.joinDate).toLocaleDateString():"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Affiliate Level"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:["Level ",(null===F||void 0===F?void 0:F.affiliate_level)||1]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Commission Rate"}),(0,b.jsxs)("span",{className:"text-white font-medium",children:[(100*((null===F||void 0===F?void 0:F.commission_rate)||.05)).toFixed(1),"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Can Create Promoters"}),(0,b.jsx)("span",{className:"font-medium ".concat(null!==F&&void 0!==F&&F.can_create_promoters?"text-green-400":"text-red-400"),children:null!==F&&void 0!==F&&F.can_create_promoters?"Yes":"No"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Can Create Customers"}),(0,b.jsx)("span",{className:"font-medium ".concat(null!==F&&void 0!==F&&F.can_create_customers?"text-green-400":"text-red-400"),children:null!==F&&void 0!==F&&F.can_create_customers?"Yes":"No"})]})]}),(0,b.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,b.jsxs)(d.Rq,{className:"w-full flex items-center justify-center space-x-2",children:[(0,b.jsx)(h.A,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Contact Promoter"})]}),(0,b.jsx)("button",{className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors",children:"View Performance"})]})]})]})]})}),I&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-slate-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white",children:"Create New Promoter"}),(0,b.jsx)("button",{onClick:Q,className:"text-gray-400 hover:text-white transition-colors",children:(0,b.jsx)(w.A,{className:"w-6 h-6"})})]})}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(i.A,{onSubmit:async t=>{try{if(console.log("\ud83d\ude80 Creating promoter from promoter dashboard..."),!t.name||""===t.name.trim())throw new Error("Name is required for promoter creation.");if(!t.password||""===t.password.trim())throw new Error("Password is required for promoter creation.");if(!t.phone||""===t.phone.trim())throw new Error("Phone number is required for promoter creation.");const s=Date.now(),r=Math.floor(1e6*Math.random()),a="promo".concat(s).concat(r,"@brightplanet.com");console.log("\ud83d\udce7 Creating Supabase auth user...");const{data:l,error:o}=await n.ND.auth.signUp({email:a,password:t.password,options:{emailRedirectTo:void 0,data:{role:"promoter",name:t.name,phone:t.phone}}});if(o)throw console.error("\u274c Auth creation error:",o),new Error("Failed to create auth user: "+o.message);if(!l.user)throw new Error("Failed to create auth user: No user data returned");console.log("\u2705 Auth user created:",l.user.id);const{error:i}=await n.ND.rpc("confirm_promoter_email",{p_user_id:l.user.id});i?console.warn("\u26a0\ufe0f Could not auto-confirm email:",i.message):console.log("\u2705 Email confirmed automatically");const{data:d,error:c}=await n.ND.rpc("create_promoter_with_auth_id",{p_name:t.name.trim(),p_user_id:l.user.id,p_auth_email:a,p_password:t.password.trim(),p_phone:t.phone.trim(),p_email:t.email&&t.email.trim()?t.email.trim():null,p_address:t.address&&t.address.trim()?t.address.trim():null,p_parent_promoter_id:e.id,p_role_level:"Affiliate",p_status:"Active"});if(c)throw console.error("\u274c Promoter profile creation error:",c),c;if(!d||!d.success)throw new Error((null===d||void 0===d?void 0:d.error)||"Failed to create promoter profile");console.log("\u2705 Promoter created successfully:",d),await J(),Q(),alert("\ud83c\udf89 Promoter created successfully!\n\ud83c\udfa9 Promoter ID: ".concat(d.promoter_id,"\n\ud83d\udcdd Name: ").concat(d.name,"\n\ud83d\udd11 Login: Use Promoter ID + Password"))}catch(_){console.error("Error creating promoter:",_),alert("Failed to create promoter: ".concat(_.message))}},onCancel:Q,hideParentPromoter:!0,submitButtonText:"Create Promoter"})})]})}),T&&V&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-slate-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white",children:"Edit Promoter"}),(0,b.jsx)("button",{onClick:G,className:"text-gray-400 hover:text-white transition-colors",children:(0,b.jsx)(w.A,{className:"w-6 h-6"})})]})}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(i.A,{onSubmit:async t=>{if(V){X(!0);try{const{data:s,error:r}=await n.ND.rpc("update_promoter_profile",{p_promoter_id:V.promoter_id,p_name:t.name,p_email:t.email,p_phone:t.phone,p_address:t.address,p_status:t.status,p_parent_promoter_id:t.parentPromoter||e.id});if(r)throw r;if(!s.success)throw new Error(s.error||"Failed to update promoter");await J(),G(),alert("\u2705 Promoter updated successfully!")}catch(_){console.error("Error updating promoter:",_),alert("Failed to update promoter: ".concat(_.message))}finally{X(!1)}}},onCancel:G,editingPromoter:V,hideParentPromoter:!0,loading:$,submitButtonText:"Update Promoter"})})]})}),O&&Z&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confirm Delete"}),(0,b.jsx)("button",{onClick:K,className:"text-gray-400 hover:text-white transition-colors",children:(0,b.jsx)(w.A,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("p",{className:"text-gray-300",children:["Are you sure you want to delete promoter ",(0,b.jsx)("strong",{children:Z.name}),"?"]}),(0,b.jsx)("p",{className:"text-red-400 text-sm mt-2",children:"This action cannot be undone."})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,b.jsx)("button",{onClick:K,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:async()=>{if(Z)try{const{error:e}=await n.ND.from("profiles").delete().eq("id",Z.id);if(e)throw e;await J(),K(),alert("\u2705 Promoter deleted successfully!")}catch(_){console.error("Error deleting promoter:",_),alert("Failed to delete promoter: ".concat(_.message))}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})})})]})}},9256:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}}]);
//# sourceMappingURL=745.b23e9f42.chunk.js.map