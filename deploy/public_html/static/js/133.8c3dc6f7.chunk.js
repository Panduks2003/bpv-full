"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[133],{1065:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1535:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},2380:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2631:(e,s,t)=>{t.d(s,{YB:()=>j});t(5043);var a=t(579);const r="rgba(247, 147, 30, 0.1)",l="rgba(255, 255, 255, 0.05)",i="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(l," 25%,\n      ").concat(r," 50%,\n      ").concat(l," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=i,document.head.appendChild(e)}const n=e=>{let{width:s="100%",height:t="1rem",className:r="",rounded:i="rounded-lg",animate:n=!0}=e;return(0,a.jsx)("div",{className:"".concat(i," border border-white/10 ").concat(n?"bp-skeleton-shimmer":""," ").concat(r),style:{width:s,height:t,background:n?void 0:l}})},d=e=>{let{className:s=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(n,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,a.jsx)(n,{width:"3rem",height:"2rem"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n,{width:"70%",height:"1rem"}),(0,a.jsx)(n,{width:"90%",height:"0.75rem"})]})]})},c=e=>{let{rows:s=5,columns:t=4,className:r=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(r),children:[(0,a.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,s)=>(0,a.jsx)(n,{width:"80%",height:"1rem"},s))})}),(0,a.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:s}).map((e,s)=>(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,s)=>(0,a.jsx)(n,{width:0===s?"90%":"70%",height:"1rem"},s))})},s))})]})},o=e=>{let{count:s=2,className:t=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-".concat(Math.min(s,4)," gap-4 ").concat(t),children:Array.from({length:s}).map((e,s)=>(0,a.jsx)(d,{},s))})},m=e=>{let{count:s=6,className:t=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ".concat(t),children:Array.from({length:s}).map((e,s)=>(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n,{width:"8rem",height:"0.75rem"}),(0,a.jsx)(n,{width:"4rem",height:"2rem"})]}),(0,a.jsx)(n,{width:"3rem",height:"3rem",rounded:"rounded-xl"})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(n,{width:"60%",height:"0.75rem"})})]},s))})},x=e=>{let{className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 ".concat(s),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n,{width:"3rem",height:"3rem",rounded:"rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(n,{width:"60%",height:"1rem"}),(0,a.jsx)(n,{width:"40%",height:"0.75rem"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n,{width:"2rem",height:"2rem",rounded:"rounded-lg"}),(0,a.jsx)(n,{width:"2rem",height:"2rem",rounded:"rounded-lg"})]})]})})},h=e=>{let{className:s="",showButton:t=!1}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8 ".concat(s),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n,{width:"15rem",height:"2.5rem",className:"mb-2"}),(0,a.jsx)(n,{width:"20rem",height:"1rem"})]}),t&&(0,a.jsx)(n,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"})]})},u=e=>{let{tabs:s=3,className:t=""}=e;return(0,a.jsx)("div",{className:"flex space-x-1 mb-8 ".concat(t),children:Array.from({length:s}).map((e,s)=>(0,a.jsx)(n,{width:"8rem",height:"3rem",rounded:"rounded-lg"},s))})},g=e=>{let{className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 mb-8 ".concat(s),children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(n,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,a.jsx)("div",{className:"md:w-48",children:(0,a.jsx)(n,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})})]})})},p=e=>{let{className:s=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n,{width:"8rem",height:"1rem"}),(0,a.jsx)(n,{width:"6rem",height:"0.75rem"})]}),(0,a.jsx)(n,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(n,{width:"4rem",height:"0.75rem"}),(0,a.jsx)(n,{width:"6rem",height:"0.75rem"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(n,{width:"5rem",height:"0.75rem"}),(0,a.jsx)(n,{width:"7rem",height:"0.75rem"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,a.jsx)(n,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,a.jsx)(n,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},j=e=>{let{type:s="dashboard"}=e;switch(s){case"dashboard":return(0,a.jsx)("div",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(h,{}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(o,{count:4}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(d,{},s))})]})]})});case"pin-management":return(0,a.jsx)("div",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(h,{showButton:!0}),(0,a.jsx)(u,{tabs:3}),(0,a.jsx)(m,{count:6}),(0,a.jsx)(g,{}),(0,a.jsx)(c,{rows:8,columns:5})]})});case"customers":case"promoters":return(0,a.jsx)("div",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(h,{showButton:!0}),(0,a.jsx)(g,{}),(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:8}).map((e,s)=>(0,a.jsx)(x,{},s))})]})});case"withdrawals":return(0,a.jsx)("div",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(h,{}),(0,a.jsx)(g,{}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(p,{},s))})]})});default:return(0,a.jsx)(j,{type:"dashboard"})}}},5722:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},7133:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var a=t(2555),r=t(5043),l=t(6621),i=t(3216),n=t(6127),d=t(5559),c=t(3959),o=t(2631),m=t(917),x=t(3458),h=t(1065),u=t(2380),g=t(3797);const p=(0,g.A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var j=t(1535),b=t(9120);const w=(0,g.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var f=t(5722),N=t(8775),y=t(987),v=t(579);const k=function(){const{user:e,logout:s}=(0,l.As)();(0,i.Zp)(),(0,c.r9)();const[t,g]=(0,r.useState)(!0),[k,q]=(0,r.useState)(null),[A,_]=(0,r.useState)(!1),[S,D]=(0,r.useState)(null),[C,R]=(0,r.useState)(""),[W,I]=(0,r.useState)(""),[M,B]=(0,r.useState)(""),[L,E]=(0,r.useState)((new Date).toISOString().split("T")[0]),[P,T]=(0,r.useState)(!1),[F,H]=(0,r.useState)({available:0,pending:0,total:0,minimumWithdrawal:500}),[X,z]=(0,r.useState)([]),[O,Y]=(0,r.useState)([]);(0,r.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&U()},[e]),(0,r.useEffect)(()=>{if(null!==e&&void 0!==e&&e.id){const e=setInterval(()=>{console.log("\ud83d\udd04 Auto-refreshing withdrawal data..."),U()},3e4);return()=>clearInterval(e)}},[e]);const U=async()=>{try{var s,t;g(!0),q(null),console.log("\ud83d\udd0d Loading withdrawal data for promoter:",e.id);let d=0,c=[],o=[];try{const{data:s,error:t}=await n.ND.from("payments").select("amount, payment_type, status").eq("promoter_id",e.id);t?console.warn("\u26a0\ufe0f Payments table not available:",t.message):c=s||[]}catch(r){console.warn("\u26a0\ufe0f Payments query failed, using fallback")}try{const{data:s,error:t}=await n.ND.from("commissions").select("commission_amount, status").eq("promoter_id",e.id);if(t){console.warn("\u26a0\ufe0f Commissions table not available:",t.message);try{const{data:s,error:t}=await n.ND.from("affiliate_commissions").select("amount, status").eq("recipient_id",e.id);!t&&s&&(o=s.map(e=>(0,a.A)((0,a.A)({},e),{},{commission_amount:e.amount})))}catch(l){console.warn("\u26a0\ufe0f Alternative commissions query also failed")}}else o=s||[]}catch(r){console.warn("\u26a0\ufe0f Commissions query failed, using fallback")}try{const{data:s,error:t}=await n.ND.from("promoter_wallet").select("balance, total_earned, total_withdrawn").eq("promoter_id",e.id).single();!t&&s&&(d=s.total_earned||0,console.log("\u2705 Using wallet data for balance calculation"))}catch(i){console.warn("\u26a0\ufe0f Promoter wallet not available, calculating from transactions")}0===d&&(d=[...(c||[]).filter(e=>"credit"===e.payment_type&&"completed"===e.status),...(o||[]).filter(e=>"completed"===e.status)].reduce((e,s)=>{const t=s.amount||s.commission_amount||0;return e+parseFloat(t)},0));let m=[];try{const{data:s,error:t}=await n.ND.from("withdrawal_requests").select("\n            id,\n            request_number,\n            amount,\n            status,\n            reason,\n            created_at,\n            processed_at,\n            transaction_id,\n            rejection_reason,\n            bank_details,\n            admin_notes\n          ").eq("promoter_id",e.id).order("created_at",{ascending:!1});if(t){console.warn("\u26a0\ufe0f Full withdrawal query failed, trying basic query:",t.message);const{data:s,error:a}=await n.ND.from("withdrawal_requests").select("id, request_number, amount, status, reason, created_at").eq("promoter_id",e.id).order("created_at",{ascending:!1});a||(m=s||[])}else m=s||[]}catch(r){console.warn("\u26a0\ufe0f Withdrawal requests query failed completely"),m=[]}const x=(m||[]).filter(e=>"completed"===e.status).reduce((e,s)=>e+(s.amount||0),0),h=(m||[]).filter(e=>"approved"===e.status).reduce((e,s)=>e+(s.amount||0),0),u=(m||[]).filter(e=>"pending"===e.status).reduce((e,s)=>e+(s.amount||0),0),p=d-x-u-h;H({available:Math.max(0,p),pending:u,approved:h,total:d-x,minimumWithdrawal:500});const j=(m||[]).map(e=>({id:e.id,requestNumber:e.request_number||"N/A",amount:parseFloat(e.amount)||0,status:e.status||"pending",reason:e.reason||"No reason provided",requestDate:e.created_at,processedDate:e.processed_at||null,transactionId:e.transaction_id||null,rejectionReason:e.rejection_reason||null,adminNotes:e.admin_notes||null}));Y(j);let b=null;try{const{data:s,error:t}=await n.ND.from("profiles").select("bank_accounts").eq("id",e.id).eq("role","promoter").single();if(t){console.warn("\u26a0\ufe0f Bank accounts column not available:",t.message);const{data:s}=await n.ND.from("profiles").select("id, name").eq("id",e.id).single();b=s}else b=s}catch(r){console.warn("\u26a0\ufe0f Profile query failed, using fallback")}const w=(null===(s=b)||void 0===s?void 0:s.bank_accounts)||[],f=w.length>0?w:[{id:1,bankName:"State Bank of India",accountNumber:"****1234",accountHolder:e.name||"Promoter",ifsc:"SBIN0001234",isDefault:!0}];z(f),console.log("\u2705 Withdrawal data loaded:",{totalEarnings:d,availableBalance:d-u,pendingWithdrawals:u,withdrawalCount:(null===(t=m)||void 0===t?void 0:t.length)||0})}catch(r){console.error("\u274c Error loading withdrawal data:",r),q("Failed to load withdrawal data")}finally{g(!1)}},Z=e=>{switch(e){case"completed":return(0,v.jsx)(m.A,{className:"w-4 h-4 text-green-400"});case"approved":return(0,v.jsx)(m.A,{className:"w-4 h-4 text-blue-400"});case"pending":return(0,v.jsx)(x.A,{className:"w-4 h-4 text-yellow-400"});case"rejected":return(0,v.jsx)(h.A,{className:"w-4 h-4 text-red-400"});default:return(0,v.jsx)(x.A,{className:"w-4 h-4 text-gray-400"})}},Q=e=>{switch(e){case"completed":return"bg-green-500/20 text-green-400 border-green-500/30";case"approved":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"rejected":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.wE,{}),(0,v.jsx)(d.A,{}),(0,v.jsx)(c.dQ,{children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 via-transparent to-yellow-500/5"}),(0,v.jsxs)("div",{className:"relative max-w-6xl mx-auto px-6 py-8 pb-12",children:[(0,v.jsxs)("div",{className:"text-center mb-6","data-animate":!0,children:[(0,v.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Withdrawal Request"}),(0,v.jsx)("p",{className:"text-gray-300 mb-6",children:"Manage your withdrawal requests and earnings"}),k&&(0,v.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4 max-w-2xl mx-auto",children:(0,v.jsxs)("p",{className:"text-red-400 flex items-center justify-center",children:[(0,v.jsx)(h.A,{className:"w-5 h-5 mr-2"}),k]})}),(0,v.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,v.jsxs)("button",{onClick:()=>_(!0),disabled:t||F.available<F.minimumWithdrawal,className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,v.jsx)(u.A,{className:"w-5 h-5 mr-2"}),"New Withdrawal Request"]}),(0,v.jsxs)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual refresh triggered"),U()},disabled:t,className:"inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,v.jsx)(p,{className:"w-5 h-5 mr-2"}),"Refresh Status"]})]})]}),t?(0,v.jsx)("div",{className:"mb-12",children:(0,v.jsx)(o.YB,{type:"withdrawals"})}):(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12","data-animate":!0,children:[(0,v.jsxs)(c.Xg,{className:"p-8 bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/30 hover:border-green-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-green-300 text-sm font-semibold uppercase tracking-wider",children:"Available Balance"}),(0,v.jsxs)("p",{className:"text-4xl font-bold text-white mt-2",children:["\u20b9",F.available.toLocaleString()]})]}),(0,v.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(j.A,{className:"w-8 h-8 text-green-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-6 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-green-300",children:"Ready for withdrawal"})]})]}),(0,v.jsxs)(c.Xg,{className:"p-8 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/30 hover:border-yellow-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-yellow-300 text-sm font-semibold uppercase tracking-wider",children:"Pending Withdrawals"}),(0,v.jsxs)("p",{className:"text-4xl font-bold text-white mt-2",children:["\u20b9",F.pending.toLocaleString()]})]}),(0,v.jsx)("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(x.A,{className:"w-8 h-8 text-yellow-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-6 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),(0,v.jsxs)("span",{className:"text-yellow-300",children:[O.filter(e=>"pending"===e.status).length," requests processing"]})]})]}),(0,v.jsxs)(c.Xg,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border border-blue-500/30 hover:border-blue-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-blue-300 text-sm font-semibold uppercase tracking-wider",children:"Approved"}),(0,v.jsxs)("p",{className:"text-3xl font-bold text-white mt-2",children:["\u20b9",(F.approved||0).toLocaleString()]})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(m.A,{className:"w-6 h-6 text-blue-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-blue-300",children:"Awaiting payment"})]})]}),(0,v.jsxs)(c.Xg,{className:"p-6 bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/30 hover:border-purple-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-purple-300 text-sm font-semibold uppercase tracking-wider",children:"Total Balance"}),(0,v.jsxs)("p",{className:"text-3xl font-bold text-white mt-2",children:["\u20b9",F.total.toLocaleString()]})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(b.A,{className:"w-6 h-6 text-purple-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-purple-300",children:"Net earnings balance"})]})]})]}),(0,v.jsxs)(c.Xg,{className:"overflow-hidden border border-slate-700/50 bg-gradient-to-br from-slate-800/50 to-slate-900/50","data-animate":!0,children:[(0,v.jsx)("div",{className:"p-8 border-b border-slate-700/50 bg-gradient-to-r from-slate-800/80 to-slate-900/80",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-3xl font-bold text-white mb-2",children:"Withdrawal History"}),(0,v.jsx)("p",{className:"text-gray-300 text-lg",children:"Real-time withdrawal requests and status from Supabase database"})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:O.length}),(0,v.jsx)("p",{className:"text-sm text-gray-400",children:"Total Requests"})]}),(0,v.jsxs)(c.Rq,{variant:"secondary",className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-500/30 hover:border-blue-400/50",children:[(0,v.jsx)(w,{className:"w-4 h-4"}),(0,v.jsx)("span",{children:"Export Report"})]})]})]})}),0===O.length?(0,v.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(j.A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,v.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:"No withdrawal requests found"}),(0,v.jsx)("p",{className:"text-gray-500 text-sm",children:"Create your first withdrawal request to see your history here."})]})}):(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"w-full",children:[(0,v.jsx)("thead",{className:"bg-slate-800/50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Request ID"}),(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Bank Account"}),(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Request Date"}),(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:O.map(e=>(0,v.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,v.jsx)(f.A,{className:"w-4 h-4 text-purple-400"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-white font-medium",children:e.requestNumber}),(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:e.reason})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsxs)("span",{className:"text-white font-semibold",children:["\u20b9",e.amount.toLocaleString()]})}),(0,v.jsx)("td",{className:"px-6 py-4 text-gray-300",children:e.bankAccount}),(0,v.jsx)("td",{className:"px-6 py-4 text-gray-300",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{children:e.requestDate?new Date(e.requestDate).toLocaleDateString():"N/A"}),(0,v.jsx)("p",{className:"text-xs text-gray-500",children:e.requestDate?new Date(e.requestDate).toLocaleTimeString():""})]})}),(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[Z(e.status),(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(Q(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),(0,v.jsx)("td",{className:"px-6 py-4",children:(0,v.jsx)("button",{onClick:()=>D(e),className:"text-green-400 hover:text-green-300 transition-colors",children:(0,v.jsx)(N.A,{className:"w-4 h-4"})})})]},e.id))})]})})]})]})]}),A&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,v.jsx)(c.Xg,{className:"w-full max-w-md",children:(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,v.jsx)("h3",{className:"text-xl font-semibold text-white",children:"New Withdrawal Request"}),(0,v.jsx)("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,v.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!C||!M)return void alert("Please fill in all required fields");const t=parseFloat(C);if(t<F.minimumWithdrawal)alert("Minimum withdrawal amount is \u20b9".concat(F.minimumWithdrawal));else if(t>F.available)alert("Insufficient balance for this withdrawal");else try{T(!0);const s=X.find(e=>e.id==M),{data:a,error:r}=await n.ND.from("withdrawal_requests").insert({promoter_id:e.id,amount:t,reason:W||"Withdrawal request",requested_date:L,status:"pending",bank_details:{bank_name:null===s||void 0===s?void 0:s.bankName,account_number:null===s||void 0===s?void 0:s.accountNumber,account_holder:null===s||void 0===s?void 0:s.accountHolder,ifsc:null===s||void 0===s?void 0:s.ifsc},created_at:(new Date).toISOString()}).select().single();if(r)throw r;alert("Withdrawal request submitted successfully! You will receive a confirmation email shortly."),_(!1),R(""),I(""),B(""),E((new Date).toISOString().split("T")[0]),await U()}catch(k){console.error("Error submitting withdrawal request:",k),alert("Failed to submit withdrawal request: "+k.message)}finally{T(!1)}},className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Withdrawal Amount"}),(0,v.jsx)("input",{type:"number",value:C,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:border-green-500/50",placeholder:"Enter amount",min:F.minimumWithdrawal,max:F.available,required:!0}),(0,v.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Minimum: \u20b9",F.minimumWithdrawal.toLocaleString()," | Available: \u20b9",F.available.toLocaleString()]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Bank Account"}),(0,v.jsxs)("select",{value:M,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:border-green-500/50",required:!0,children:[(0,v.jsx)("option",{value:"",children:"Select bank account"}),X.map(e=>(0,v.jsxs)("option",{value:e.id,children:[e.bankName," (",e.accountNumber,")"]},e.id))]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Requested Date"}),(0,v.jsx)("input",{type:"date",value:L,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:border-green-500/50",min:(new Date).toISOString().split("T")[0],required:!0})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Reason (Optional)"}),(0,v.jsx)("textarea",{value:W,onChange:e=>I(e.target.value),className:"w-full px-4 py-2 bg-gray-800/50 border border-gray-700/50 rounded-lg text-white focus:outline-none focus:border-green-500/50",placeholder:"Enter reason for withdrawal",rows:"3"})]}),(0,v.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)(y.A,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),(0,v.jsxs)("div",{className:"text-sm",children:[(0,v.jsx)("p",{className:"text-yellow-400 font-medium",children:"Processing Information"}),(0,v.jsx)("p",{className:"text-gray-300 mt-1",children:"Withdrawal requests are processed within 2-3 business days. You will receive a confirmation email once processed."})]})]})}),(0,v.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,v.jsx)(c.Rq,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),(0,v.jsx)(c.Rq,{type:"submit",disabled:P,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white mr-2"}),"Submitting..."]}):"Submit Request"})]})]})]})})}),S&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,v.jsx)(c.Xg,{className:"w-full max-w-md",children:(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,v.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Request Details"}),(0,v.jsx)("button",{onClick:()=>D(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(h.A,{className:"w-5 h-5"})})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-800/50 rounded-lg",children:[(0,v.jsx)("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,v.jsx)(f.A,{className:"w-5 h-5 text-purple-400"})}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{className:"text-white font-medium",children:["Request ID: ",S.id]}),(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:S.reason})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Amount"}),(0,v.jsxs)("p",{className:"text-lg font-semibold text-white",children:["\u20b9",S.amount.toLocaleString()]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[Z(S.status),(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(Q(S.status)),children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Bank Account"}),(0,v.jsx)("p",{className:"text-white",children:S.bankAccount})]}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Request Date"}),(0,v.jsx)("p",{className:"text-white",children:new Date(S.requestDate).toLocaleDateString()})]}),S.processedDate&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Processed Date"}),(0,v.jsx)("p",{className:"text-white",children:new Date(S.processedDate).toLocaleDateString()})]})]}),S.transactionId&&(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Transaction ID"}),(0,v.jsx)("p",{className:"text-white font-mono",children:S.transactionId})]}),S.rejectionReason&&(0,v.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)(h.A,{className:"w-5 h-5 text-red-400 mt-0.5"}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-red-400 font-medium text-sm",children:"Rejection Reason"}),(0,v.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:S.rejectionReason})]})]})})]}),(0,v.jsx)("div",{className:"flex justify-end mt-6",children:(0,v.jsx)(c.Rq,{onClick:()=>D(null),variant:"secondary",children:"Close"})})]})})})]})})]})}},9120:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}}]);
//# sourceMappingURL=133.8c3dc6f7.chunk.js.map