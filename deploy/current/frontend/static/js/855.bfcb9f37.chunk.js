"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[855],{1065:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1535:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},5275:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6487:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},7855:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var a=s(5043),r=s(6621),i=s(1921),l=s(3216),n=s(5559),c=s(2631),o=s(3959),d=s(3489),m=s(6127),x=s(987),h=s(3395),u=s(917),p=s(3458),g=s(6950),f=s(4068),j=s(6487),b=s(5275),w=s(1535),y=s(1065),v=s(579);const N=function(){const{user:e}=(0,r.As)(),{showSuccess:t,showError:s}=(0,i.L5)(),N=(0,l.Zp)();(0,o.r9)();const[_,k]=(0,a.useState)(!0),[A,C]=(0,a.useState)({promoter_id:null===e||void 0===e?void 0:e.id,wallet_balance:0,total_earned:0,commission_count:0,recent_commissions:[]}),[S,F]=(0,a.useState)({}),[q,L]=(0,a.useState)({}),[P,T]=(0,a.useState)({level:"",status:"",dateFrom:"",dateTo:""}),X=async()=>{try{k(!0);const{data:t,error:s}=await m.Ay.from("affiliate_commissions").select("*").eq("recipient_id",e.id).eq("status","credited"),a=(null===t||void 0===t?void 0:t.reduce((e,t)=>e+(parseFloat(t.amount)||0),0))||0;let r;if(r=t&&t.length>0?{success:!0,data:{promoter_id:e.id,wallet_balance:a,total_earned:a,commission_count:t.length,recent_commissions:t}}:await d.A.getPromoterCommissionSummary(e.id),r.success){const s=parseFloat(r.data.wallet_balance)||0,i=parseFloat(r.data.total_earned)||0,l=parseInt(r.data.commission_count)||0,n={promoter_id:r.data.promoter_id||(null===e||void 0===e?void 0:e.id),wallet_balance:s||a,total_earned:i||a,commission_count:l||(null===t||void 0===t?void 0:t.length)||0,recent_commissions:r.data.recent_commissions||[]};if(0===n.total_earned&&a>0&&(n.wallet_balance=a,n.total_earned=a,n.commission_count=(null===t||void 0===t?void 0:t.length)||0),C(n),r.data.recent_commissions&&r.data.recent_commissions.length>0){const e=r.data.recent_commissions.map(e=>e.customer_id).filter(Boolean);e.length>0&&await(async e=>{try{const t={},s={};for(const a of e){const{data:e,error:r}=await m.Ay.from("profiles").select("name, customer_id, promoter_id").eq("id",a).single();e&&!r&&(t[a]=e.name,s[a]=e.customer_id||e.promoter_id||a.substring(0,8)+"...")}F(t),L(s)}catch(t){}})([...new Set(e)])}}else{const s={promoter_id:null===e||void 0===e?void 0:e.id,wallet_balance:a,total_earned:a,commission_count:(null===t||void 0===t?void 0:t.length)||0,recent_commissions:t||[]};C(s)}}catch(t){try{const{data:t}=await m.Ay.from("affiliate_commissions").select("amount, status, level, created_at, customer_id").eq("recipient_id",e.id).eq("status","credited").order("created_at",{ascending:!1}),a=(null===t||void 0===t?void 0:t.reduce((e,t)=>e+parseFloat(t.amount),0))||0;if(a>0){const s={promoter_id:null===e||void 0===e?void 0:e.id,wallet_balance:a,total_earned:a,commission_count:(null===t||void 0===t?void 0:t.length)||0,recent_commissions:t||[]};C(s)}else s("Failed to load commission data. Please try again.")}catch(a){s("Failed to load commission data. Please try again.")}}finally{k(!1)}};(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&X()},[null===e||void 0===e?void 0:e.id]);const E=e=>{const t=parseFloat(e)||0;return"\u20b9".concat(t.toLocaleString("en-IN"))};return _?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.wE,{}),(0,v.jsx)(n.A,{}),(0,v.jsx)(o.dQ,{children:(0,v.jsx)(c.YB,{type:"dashboard"})})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.wE,{}),(0,v.jsx)(n.A,{}),(0,v.jsx)(o.dQ,{children:(0,v.jsx)("div",{className:"min-h-screen pt-40 px-8 pb-8",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-8","data-animate":!0,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Commission History"}),(0,v.jsx)("p",{className:"text-gray-300",children:"Track your affiliate commission earnings"})]}),(0,v.jsxs)(o.Rq,{onClick:()=>{X(),t("Commission data refreshed successfully.")},className:"flex items-center space-x-2",children:[(0,v.jsx)(f.A,{className:"w-5 h-5"}),(0,v.jsx)("span",{children:"Refresh"})]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8","data-animate":!0,children:[(0,v.jsxs)(o.Xg,{className:"p-6 bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/30 hover:border-green-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-green-300 text-sm font-semibold uppercase tracking-wider",children:"Wallet Balance"}),(0,v.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:E(A.wallet_balance)})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(w.A,{className:"w-6 h-6 text-green-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-green-300",children:"Available for withdrawal"})]})]}),(0,v.jsxs)(o.Xg,{className:"p-6 bg-gradient-to-br from-orange-500/10 to-yellow-500/10 border border-orange-500/30 hover:border-orange-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-orange-300 text-sm font-semibold uppercase tracking-wider",children:"Total Earned"}),(0,v.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:E(A.total_earned)})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(b.A,{className:"w-6 h-6 text-orange-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-orange-300",children:"Lifetime earnings"})]})]}),(0,v.jsxs)(o.Xg,{className:"p-6 bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/30 hover:border-purple-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-purple-300 text-sm font-semibold uppercase tracking-wider",children:"Commissions"}),(0,v.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:A.commission_count})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(h.A,{className:"w-6 h-6 text-purple-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-purple-300",children:"Total received"})]})]}),(0,v.jsxs)(o.Xg,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 border border-blue-500/30 hover:border-blue-400/50 transition-all duration-300",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-blue-300 text-sm font-semibold uppercase tracking-wider",children:"Average"}),(0,v.jsx)("p",{className:"text-3xl font-bold text-white mt-2",children:E(A.commission_count>0?A.total_earned/A.commission_count:0)})]}),(0,v.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,v.jsx)(j.A,{className:"w-6 h-6 text-blue-400"})})]}),(0,v.jsxs)("div",{className:"flex items-center mt-4 text-sm",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),(0,v.jsx)("span",{className:"text-blue-300",children:"Per commission"})]})]})]}),(0,v.jsxs)(o.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:[(0,v.jsx)("div",{className:"p-6 border-b border-gray-700/50",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Recent Commissions"}),(0,v.jsx)("p",{className:"text-gray-300 text-sm mt-1",children:"Your latest affiliate commission earnings"})]}),(0,v.jsx)("div",{className:"flex items-center space-x-3",children:(0,v.jsxs)(o.Rq,{onClick:()=>N("/promoter/pin-management"),className:"flex items-center space-x-2 bg-gradient-to-r from-orange-500 to-yellow-500",children:[(0,v.jsx)(g.A,{className:"w-4 h-4"}),(0,v.jsx)("span",{children:"PIN Management"})]})})]})}),(0,v.jsx)("div",{className:"overflow-x-auto",children:0===A.recent_commissions.length?(0,v.jsxs)("div",{className:"p-12 text-center",children:[(0,v.jsx)(h.A,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,v.jsx)("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Commissions Yet"}),(0,v.jsx)("p",{className:"text-gray-500",children:"Start building your network to earn affiliate commissions!"})]}):(0,v.jsxs)("table",{className:"w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-800/50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Level"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Customer"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Note"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:A.recent_commissions.map(e=>{const t=(e=>{switch(e){case"credited":return{icon:u.A,color:"text-green-400",bg:"bg-green-500/20",label:"Credited"};case"pending":return{icon:p.A,color:"text-yellow-400",bg:"bg-yellow-500/20",label:"Pending"};case"failed":return{icon:y.A,color:"text-red-400",bg:"bg-red-500/20",label:"Failed"};default:return{icon:x.A,color:"text-gray-400",bg:"bg-gray-500/20",label:"Unknown"}}})(e.status),s=t.icon;return(0,v.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,v.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto",children:e.level})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"text-sm",children:[(0,v.jsx)("div",{className:"text-white font-medium",children:S[e.customer_id]||"Loading..."}),(0,v.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:q[e.customer_id]||"Loading..."})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("div",{className:"text-lg font-bold text-green-300",children:E(e.amount)})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.color," border border-current/30"),children:[(0,v.jsx)(s,{className:"w-3 h-3 mr-1"}),t.label]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:new Date(e.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,v.jsx)("td",{className:"px-6 py-4 text-sm text-gray-400 max-w-xs truncate",children:e.note||"No notes"})]},e.id)})})]})})]})]})})})]})}}}]);
//# sourceMappingURL=855.bfcb9f37.chunk.js.map