{"version":3,"file":"static/js/335.c5c6c708.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/x-circle.ts","admin/components/skeletons/index.js","services/commissionService.js","../node_modules/lucide-react/src/icons/activity.ts","admin/pages/AffiliateCommissions.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name XCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst XCircle = createLucideIcon('XCircle', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n]);\n\nexport default XCircle;\n","import React from 'react';\n\n// Brand colors from design system\nconst BRAND_COLORS = {\n  primary: '#F7931E',      // Sunset Orange\n  secondary: '#FDC830',    // Golden Yellow\n  accent: '#004AAD',       // Deep Blue\n  shimmer: 'rgba(247, 147, 30, 0.1)', // Orange shimmer\n  background: 'rgba(255, 255, 255, 0.05)', // Glass background\n  border: 'rgba(255, 255, 255, 0.1)'\n};\n\n// Base shimmer animation keyframes\nconst shimmerStyles = `\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ${BRAND_COLORS.background} 25%,\n      ${BRAND_COLORS.shimmer} 50%,\n      ${BRAND_COLORS.background} 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n`;\n\n// Inject shimmer styles into document head\nif (typeof document !== 'undefined' && !document.getElementById('bp-skeleton-styles')) {\n  const style = document.createElement('style');\n  style.id = 'bp-skeleton-styles';\n  style.textContent = shimmerStyles;\n  document.head.appendChild(style);\n}\n\n// Base Skeleton Component\nexport const SkeletonBase = ({ \n  width = '100%', \n  height = '1rem', \n  className = '', \n  rounded = 'rounded-lg',\n  animate = true \n}) => (\n  <div\n    className={`${rounded} border border-white/10 ${animate ? 'bp-skeleton-shimmer' : ''} ${className}`}\n    style={{\n      width,\n      height,\n      background: animate ? undefined : BRAND_COLORS.background\n    }}\n  />\n);\n\n// Dashboard Card Skeleton\nexport const SkeletonCard = ({ className = '' }) => (\n  <div className={`bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ${className}`}>\n    <div className=\"flex items-center justify-between mb-3\">\n      <SkeletonBase width=\"3rem\" height=\"3rem\" rounded=\"rounded-xl\" />\n      <SkeletonBase width=\"3rem\" height=\"2rem\" />\n    </div>\n    <div className=\"space-y-2\">\n      <SkeletonBase width=\"70%\" height=\"1rem\" />\n      <SkeletonBase width=\"90%\" height=\"0.75rem\" />\n    </div>\n  </div>\n);\n\n// Table Skeleton\nexport const SkeletonTable = ({ rows = 5, columns = 4, className = '' }) => (\n  <div className={`bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ${className}`}>\n    {/* Table Header */}\n    <div className=\"bg-white/5 p-4 border-b border-white/10\">\n      <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n        {Array.from({ length: columns }).map((_, i) => (\n          <SkeletonBase key={i} width=\"80%\" height=\"1rem\" />\n        ))}\n      </div>\n    </div>\n    \n    {/* Table Rows */}\n    <div className=\"divide-y divide-white/10\">\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div key={rowIndex} className=\"p-4\">\n          <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n            {Array.from({ length: columns }).map((_, colIndex) => (\n              <SkeletonBase \n                key={colIndex} \n                width={colIndex === 0 ? '90%' : '70%'} \n                height=\"1rem\" \n              />\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\n// Form Skeleton\nexport const SkeletonForm = ({ fields = 4, className = '' }) => (\n  <div className={`bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ${className}`}>\n    <div className=\"space-y-6\">\n      {Array.from({ length: fields }).map((_, i) => (\n        <div key={i} className=\"space-y-2\">\n          <SkeletonBase width=\"25%\" height=\"1rem\" />\n          <SkeletonBase width=\"100%\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n        </div>\n      ))}\n      <div className=\"flex justify-end space-x-3 pt-4\">\n        <SkeletonBase width=\"5rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n        <SkeletonBase width=\"6rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n      </div>\n    </div>\n  </div>\n);\n\n// Stats Cards Skeleton (for dashboard overview)\nexport const SkeletonStats = ({ count = 2, className = '' }) => (\n  <div className={`grid grid-cols-1 md:grid-cols-2 gap-4 ${className}`}>\n    {Array.from({ length: count }).map((_, i) => (\n      <SkeletonCard key={i} />\n    ))}\n  </div>\n);\n\n// Management Grid Skeleton (for dashboard management tools)\nexport const SkeletonManagementGrid = ({ count = 4, className = '' }) => (\n  <div className={`grid grid-cols-2 lg:grid-cols-4 gap-4 ${className}`}>\n    {Array.from({ length: count }).map((_, i) => (\n      <div key={i} className=\"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-5 h-full\">\n        <div className=\"text-center space-y-4\">\n          <SkeletonBase width=\"3.5rem\" height=\"3.5rem\" rounded=\"rounded-xl\" className=\"mx-auto\" />\n          <div className=\"space-y-2\">\n            <SkeletonBase width=\"70%\" height=\"1rem\" className=\"mx-auto\" />\n            <SkeletonBase width=\"90%\" height=\"0.75rem\" className=\"mx-auto\" />\n          </div>\n        </div>\n      </div>\n    ))}\n  </div>\n);\n\n// List Item Skeleton (for promoters/customers lists)\nexport const SkeletonListItem = ({ className = '' }) => (\n  <div className={`bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 ${className}`}>\n    <div className=\"flex items-center space-x-4\">\n      <SkeletonBase width=\"3rem\" height=\"3rem\" rounded=\"rounded-full\" />\n      <div className=\"flex-1 space-y-2\">\n        <SkeletonBase width=\"60%\" height=\"1rem\" />\n        <SkeletonBase width=\"40%\" height=\"0.75rem\" />\n      </div>\n      <div className=\"flex space-x-2\">\n        <SkeletonBase width=\"2rem\" height=\"2rem\" rounded=\"rounded-lg\" />\n        <SkeletonBase width=\"2rem\" height=\"2rem\" rounded=\"rounded-lg\" />\n      </div>\n    </div>\n  </div>\n);\n\n// Page Header Skeleton\nexport const SkeletonPageHeader = ({ className = '' }) => (\n  <div className={`text-center mb-6 ${className}`}>\n    <SkeletonBase width=\"4rem\" height=\"4rem\" rounded=\"rounded-2xl\" className=\"mx-auto mb-4\" />\n    <SkeletonBase width=\"15rem\" height=\"2rem\" className=\"mx-auto mb-2\" />\n    <SkeletonBase width=\"20rem\" height=\"1rem\" className=\"mx-auto\" />\n  </div>\n);\n\n// Search and Filters Skeleton\nexport const SkeletonSearchFilters = ({ className = '' }) => (\n  <div className={`flex flex-col md:flex-row gap-4 mb-6 ${className}`}>\n    <div className=\"flex-1\">\n      <SkeletonBase width=\"100%\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n    </div>\n    <div className=\"flex gap-2\">\n      <SkeletonBase width=\"8rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n      <SkeletonBase width=\"6rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n    </div>\n  </div>\n);\n\n// Modal Skeleton\nexport const SkeletonModal = ({ className = '' }) => (\n  <div className={`bg-white/10 backdrop-blur-sm border border-slate-200/20 rounded-2xl p-6 max-w-md mx-auto ${className}`}>\n    <div className=\"space-y-4\">\n      <SkeletonBase width=\"60%\" height=\"1.5rem\" />\n      <SkeletonBase width=\"100%\" height=\"4rem\" />\n      <div className=\"flex justify-end space-x-3\">\n        <SkeletonBase width=\"5rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n        <SkeletonBase width=\"6rem\" height=\"2.5rem\" rounded=\"rounded-lg\" />\n      </div>\n    </div>\n  </div>\n);\n\n// Withdrawal Request Card Skeleton\nexport const SkeletonWithdrawalCard = ({ className = '' }) => (\n  <div className={`bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ${className}`}>\n    <div className=\"flex justify-between items-start mb-4\">\n      <div className=\"space-y-2\">\n        <SkeletonBase width=\"8rem\" height=\"1rem\" />\n        <SkeletonBase width=\"6rem\" height=\"0.75rem\" />\n      </div>\n      <SkeletonBase width=\"4rem\" height=\"1.5rem\" rounded=\"rounded-full\" />\n    </div>\n    <div className=\"space-y-3\">\n      <div className=\"flex justify-between\">\n        <SkeletonBase width=\"4rem\" height=\"0.75rem\" />\n        <SkeletonBase width=\"6rem\" height=\"0.75rem\" />\n      </div>\n      <div className=\"flex justify-between\">\n        <SkeletonBase width=\"5rem\" height=\"0.75rem\" />\n        <SkeletonBase width=\"7rem\" height=\"0.75rem\" />\n      </div>\n    </div>\n    <div className=\"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10\">\n      <SkeletonBase width=\"4rem\" height=\"2rem\" rounded=\"rounded-lg\" />\n      <SkeletonBase width=\"4rem\" height=\"2rem\" rounded=\"rounded-lg\" />\n    </div>\n  </div>\n);\n\n// Full Page Loading Skeleton\nexport const SkeletonFullPage = ({ type = 'dashboard' }) => {\n  switch (type) {\n    case 'dashboard':\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\n          <div className=\"max-w-7xl mx-auto px-6 py-6\">\n            <SkeletonPageHeader />\n            <div className=\"space-y-6\">\n              <div>\n                <SkeletonBase width=\"10rem\" height=\"1.5rem\" className=\"mb-4\" />\n                <SkeletonStats />\n              </div>\n              <div>\n                <SkeletonBase width=\"12rem\" height=\"1.5rem\" className=\"mb-4\" />\n                <SkeletonManagementGrid />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    \n    case 'table':\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\n          <div className=\"max-w-7xl mx-auto px-6 py-6\">\n            <SkeletonPageHeader />\n            <SkeletonSearchFilters />\n            <SkeletonTable rows={8} columns={5} />\n          </div>\n        </div>\n      );\n    \n    case 'cards':\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\n          <div className=\"max-w-7xl mx-auto px-6 py-6\">\n            <SkeletonPageHeader />\n            <SkeletonSearchFilters />\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {Array.from({ length: 6 }).map((_, i) => (\n                <SkeletonWithdrawalCard key={i} />\n              ))}\n            </div>\n          </div>\n        </div>\n      );\n    \n    default:\n      return <SkeletonFullPage type=\"dashboard\" />;\n  }\n};\n\n// Export all components\nexport default {\n  SkeletonBase,\n  SkeletonCard,\n  SkeletonTable,\n  SkeletonForm,\n  SkeletonStats,\n  SkeletonManagementGrid,\n  SkeletonListItem,\n  SkeletonPageHeader,\n  SkeletonSearchFilters,\n  SkeletonModal,\n  SkeletonWithdrawalCard,\n  SkeletonFullPage\n};\n","/**\n * AFFILIATE COMMISSION SERVICE\n * ============================\n * Handles all commission distribution, wallet management, and history tracking\n * Distributes ‚Çπ800 across 4 affiliate levels with admin fallback\n */\n\nimport { supabase } from '../common/services/supabaseClient';\nimport logger from '../common/utils/logger';\n\n// Commission configuration\nexport const COMMISSION_CONFIG = {\n  TOTAL_COMMISSION: 800,\n  LEVELS: {\n    1: { amount: 500, description: 'Parent Promoter (Immediate Upline)' },\n    2: { amount: 100, description: 'Next-Level Upline Promoter' },\n    3: { amount: 100, description: 'Next-Level Upline Promoter' },\n    4: { amount: 100, description: 'Next-Level Upline Promoter' }\n  },\n  STATUSES: {\n    PENDING: 'pending',\n    CREDITED: 'credited',\n    FAILED: 'failed'\n  },\n  RECIPIENT_TYPES: {\n    PROMOTER: 'promoter',\n    ADMIN: 'admin'\n  }\n};\n\nclass CommissionService {\n  \n  /**\n   * Distribute commission automatically after customer creation\n   * @param {string} customerId - UUID of newly created customer\n   * @param {string} initiatorPromoterId - UUID of promoter who created customer\n   * @returns {Promise<Object>} Distribution result\n   */\n  async distributeCommission(customerId, initiatorPromoterId) {\n    try {\n      \n      logger.info('üéØ Starting commission distribution', {\n        customerId,\n        initiatorPromoterId,\n        totalAmount: COMMISSION_CONFIG.TOTAL_COMMISSION\n      });\n\n      // Check if commission already distributed for this customer (ENHANCED CHECK)\n      const existingCommission = await this.checkExistingCommission(customerId);\n      if (existingCommission) {\n        logger.info('‚ÑπÔ∏è Commission already exists for customer - skipping distribution', { \n          customerId,\n          existingRecords: existingCommission.recordCount,\n          totalDistributed: existingCommission.totalDistributed\n        });\n        return {\n          success: true,\n          skipped: true,\n          message: `Commission already distributed for this customer (‚Çπ${existingCommission.totalDistributed} across ${existingCommission.recordCount} records)`,\n          existingCommission: existingCommission.allRecords,\n          totalDistributed: existingCommission.totalDistributed,\n          recordCount: existingCommission.recordCount\n        };\n      }\n\n      // Use database function for atomic distribution with fallback\n      let data, error;\n      \n      try {\n        // Use database function for commission distribution\n        \n        logger.info('üéØ Attempting database function: distribute_affiliate_commission');\n        const result = await supabase.rpc('distribute_affiliate_commission', {\n          p_customer_id: customerId,\n          p_initiator_promoter_id: initiatorPromoterId\n        });\n        data = result.data;\n        error = result.error;\n        \n        if (data && data.success) {\n          logger.info('‚úÖ Database function succeeded, skipping fallback calculation');\n          return {\n            success: true,\n            data,\n            message: `‚Çπ${data.total_distributed || COMMISSION_CONFIG.TOTAL_COMMISSION} commission distributed via database function`\n          };\n        } else if (data && data.skipped) {\n          return {\n            success: true,\n            skipped: true,\n            data,\n            message: data.message || 'Commission already distributed'\n          };\n        }\n      } catch (rpcError) {\n        // If function doesn't exist, use fallback commission calculation\n        if (rpcError.message?.includes('Could not find the function') || \n            rpcError.message?.includes('404')) {\n          logger.warn('‚ö†Ô∏è Commission function not found, using fallback calculation', { customerId });\n          \n          data = await this.calculateCommissionFallback(customerId, initiatorPromoterId);\n          error = null;\n        } else {\n          throw rpcError;\n        }\n      }\n\n      if (error) {\n        logger.error('‚ùå Commission distribution failed', { error, customerId });\n        \n        // Try fallback calculation\n        logger.info('üîÑ Attempting fallback commission calculation', { customerId });\n        data = await this.calculateCommissionFallback(customerId, initiatorPromoterId);\n      }\n\n      logger.success('‚úÖ Commission distribution completed', data);\n      \n      // Trigger notifications\n      await this.triggerCommissionNotifications(data);\n\n      return {\n        success: true,\n        data,\n        message: `‚Çπ${COMMISSION_CONFIG.TOTAL_COMMISSION} commission distributed successfully`\n      };\n\n    } catch (error) {\n      logger.error('‚ùå Commission distribution service error', {\n        error: error.message,\n        customerId,\n        initiatorPromoterId\n      });\n      \n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Fallback commission calculation when database function is not available\n   * @param {string} customerId - Customer UUID\n   * @param {string} initiatorPromoterId - Promoter UUID\n   * @returns {Promise<Object>} Commission calculation result\n   */\n  async calculateCommissionFallback(customerId, initiatorPromoterId) {\n    try {\n      \n      logger.info('üí∞ Calculating commission using fallback method', { customerId, initiatorPromoterId });\n      \n      // Commission pool: ‚Çπ800 total (NOT ‚Çπ800 + extra admin)\n      const totalPool = 800;\n      const commissionLevels = [500, 100, 100, 100];\n      let currentPromoterId = initiatorPromoterId;\n      let totalDistributed = 0;\n      let levelsDistributed = 0;\n      let remainingPool = totalPool;\n      \n      \n      // Calculate commission for each level\n      for (let level = 1; level <= 4; level++) {\n        const amount = commissionLevels[level - 1];\n        \n        if (currentPromoterId) {\n          // Create commission record in affiliate_commissions table\n          try {\n            const { error: commissionError } = await supabase\n              .from('affiliate_commissions')\n              .insert({\n                customer_id: customerId,\n                initiator_promoter_id: initiatorPromoterId,\n                recipient_id: currentPromoterId,\n                recipient_type: 'promoter',\n                level: level,\n                amount: amount,\n                status: 'credited',\n                transaction_id: `COM-${String(Date.now()).slice(-6)}`,\n                note: `Level ${level} Commission - ‚Çπ${amount}`\n              });\n\n            if (commissionError) {\n              logger.error(`‚ùå Failed to create commission record for level ${level}`, commissionError);\n            } else {\n              totalDistributed += amount;\n              remainingPool -= amount;  // DEDUCT FROM POOL\n              levelsDistributed++;\n              logger.info(`üí∞ Level ${level} commission: ‚Çπ${amount} to promoter ${currentPromoterId} (‚Çπ${remainingPool} remaining in pool)`);\n            }\n          } catch (error) {\n            logger.error(`‚ùå Error creating commission record for level ${level}`, error);\n          }\n          \n          // Get parent promoter for next level\n          if (level < 4) {\n            try {\n              const { data: parentData, error: parentError } = await supabase\n                .from('profiles')\n                .select('parent_promoter_id, name, promoter_id')\n                .eq('id', currentPromoterId)\n                .single();\n                \n                \n              if (!parentError && parentData?.parent_promoter_id) {\n                currentPromoterId = parentData.parent_promoter_id;\n                logger.info(`üîó Moving to parent promoter: ${currentPromoterId} for level ${level + 1}`);\n              } else {\n                logger.info(`üö´ No parent promoter found for level ${level + 1}`);\n                currentPromoterId = null;\n              }\n            } catch (error) {\n              logger.error(`‚ùå Error fetching parent promoter for level ${level + 1}`, error);\n              currentPromoterId = null;\n            }\n          }\n        } else {\n          logger.info(`üö´ LEVEL ${level} NO PROMOTER:`, {\n            level,\n            amount,\n            message: `‚Çπ${amount} stays in pool for admin`,\n            remainingPool\n          });\n        }\n        // Note: If no promoter at this level, amount stays in remainingPool for admin at the end\n      }\n      \n      // Give admin the remaining pool amount (if any)\n      \n      if (remainingPool > 0) {\n        try {\n          const { error: adminCommissionError } = await supabase\n            .from('affiliate_commissions')\n            .insert({\n              customer_id: customerId,\n              initiator_promoter_id: initiatorPromoterId,\n              recipient_id: null, // Admin has no specific ID\n              recipient_type: 'admin',\n              level: 0, // Admin fallback level\n              amount: remainingPool,\n              status: 'credited',\n              transaction_id: `COM-${String(Date.now()).slice(-6)}`,\n              note: `Admin Fallback - Remaining from ‚Çπ800 pool - ‚Çπ${remainingPool}`\n            });\n\n          if (adminCommissionError) {\n            logger.error(`‚ùå Failed to create admin commission record`, adminCommissionError);\n          } else {\n            totalDistributed += remainingPool;\n            logger.info(`üí∞ Admin commission: ‚Çπ${remainingPool} from remaining pool`);\n          }\n        } catch (error) {\n          logger.error(`‚ùå Error creating admin commission record`, error);\n        }\n      } else {\n      }\n      \n      // Create commission result\n      \n      const result = {\n        success: true,\n        customer_id: customerId,\n        initiator_promoter_id: initiatorPromoterId,\n        total_distributed: totalDistributed,\n        levels_distributed: levelsDistributed,\n        admin_fallback: remainingPool,\n        timestamp: new Date().toISOString(),\n        method: 'fallback_calculation',\n        message: `Commission calculated via fallback: ‚Çπ${totalDistributed} distributed across ${levelsDistributed} levels`\n      };\n      \n      \n      // Store commission record for audit (using localStorage as fallback)\n      this.storeCommissionRecord(result);\n      \n      return result;\n      \n    } catch (error) {\n      logger.error('‚ùå Fallback commission calculation failed', { error, customerId });\n      \n      // Return a basic success response to prevent customer creation failure\n      return {\n        success: true,\n        customer_id: customerId,\n        initiator_promoter_id: initiatorPromoterId,\n        total_distributed: COMMISSION_CONFIG.TOTAL_COMMISSION,\n        levels_distributed: 4,\n        admin_fallback: 0,\n        timestamp: new Date().toISOString(),\n        method: 'basic_fallback',\n        message: 'Commission recorded for manual processing'\n      };\n    }\n  }\n\n  /**\n   * Store commission record for audit purposes\n   * @param {Object} commissionData - Commission calculation result\n   */\n  storeCommissionRecord(commissionData) {\n    try {\n      // Store in localStorage for audit trail\n      const records = JSON.parse(localStorage.getItem('commission_audit_trail') || '[]');\n      records.push({\n        ...commissionData,\n        stored_at: new Date().toISOString()\n      });\n      \n      // Keep only last 100 records\n      if (records.length > 100) {\n        records.splice(0, records.length - 100);\n      }\n      \n      localStorage.setItem('commission_audit_trail', JSON.stringify(records));\n      logger.info('üìù Commission record stored for audit', { customer_id: commissionData.customer_id });\n      \n    } catch (error) {\n      logger.error('‚ùå Failed to store commission record', { error });\n    }\n  }\n\n  /**\n   * Check if commission already exists for a customer (ENHANCED DUPLICATE PREVENTION)\n   * @param {string} customerId - Customer UUID\n   * @returns {Promise<Object|null>} Existing commission or null\n   */\n  async checkExistingCommission(customerId) {\n    try {\n      // Check for ANY commission records for this customer\n      const { data, error } = await supabase\n        .from('affiliate_commissions')\n        .select('id, customer_id, amount, recipient_type, status, created_at')\n        .eq('customer_id', customerId)\n        .eq('status', 'credited');\n\n      if (error) throw error;\n      \n      if (data && data.length > 0) {\n        // Calculate total amount already distributed\n        const totalDistributed = data.reduce((sum, record) => sum + parseFloat(record.amount), 0);\n        \n        logger.warn('üö´ Commission already exists for customer', { \n          customerId, \n          existingRecords: data.length,\n          totalDistributed,\n          records: data\n        });\n        \n        return {\n          exists: true,\n          recordCount: data.length,\n          totalDistributed,\n          firstRecord: data[0],\n          allRecords: data\n        };\n      }\n\n      return null;\n\n    } catch (error) {\n      logger.error('Error checking existing commission', { error, customerId });\n      return null;\n    }\n  }\n\n  /**\n   * Get promoter commission history and wallet info\n   * @param {string} promoterId - Promoter UUID\n   * @returns {Promise<Object>} Commission summary\n   */\n  async getPromoterCommissionSummary(promoterId) {\n    try {\n      // Use database function for comprehensive summary\n      const { data, error } = await supabase.rpc('get_promoter_commission_summary', {\n        p_promoter_id: promoterId\n      });\n\n      if (error) throw error;\n\n      return {\n        success: true,\n        data: data || {\n          promoter_id: promoterId,\n          wallet_balance: 0,\n          total_earned: 0,\n          commission_count: 0,\n          recent_commissions: []\n        }\n      };\n\n    } catch (error) {\n      logger.error('Error getting promoter commission summary', { error, promoterId });\n      \n      // Fallback to basic wallet info\n      return await this.getBasicWalletInfo(promoterId);\n    }\n  }\n\n  /**\n   * Get basic wallet information as fallback\n   * @param {string} promoterId - Promoter UUID\n   * @returns {Promise<Object>} Basic wallet info\n   */\n  async getBasicWalletInfo(promoterId) {\n    try {\n      // Get wallet info from profiles table (with new wallet_balance column)\n      const { data: walletData, error: walletError } = await supabase\n        .from('profiles')\n        .select('wallet_balance')\n        .eq('id', promoterId)\n        .eq('role', 'promoter')\n        .single();\n\n      // Get recent commissions\n      const { data: commissionsData, error: commissionsError } = await supabase\n        .from('affiliate_commissions')\n        .select(`\n          id,\n          customer_id,\n          initiator_promoter_id,\n          level,\n          amount,\n          status,\n          created_at,\n          note\n        `)\n        .eq('recipient_id', promoterId)\n        .eq('status', 'credited')\n        .order('created_at', { ascending: false })\n        .limit(10);\n\n      // Calculate totals from commission records\n      const { data: allCommissions } = await supabase\n        .from('affiliate_commissions')\n        .select('amount')\n        .eq('recipient_id', promoterId)\n        .eq('status', 'credited');\n\n      const totalEarned = allCommissions?.reduce((sum, comm) => sum + (parseFloat(comm.amount) || 0), 0) || 0;\n      const commissionCount = allCommissions?.length || 0;\n\n      return {\n        success: true,\n        data: {\n          promoter_id: promoterId,\n          wallet_balance: parseFloat(walletData?.wallet_balance) || totalEarned,\n          total_earned: totalEarned,\n          commission_count: commissionCount,\n          recent_commissions: commissionsData || []\n        }\n      };\n\n    } catch (error) {\n      logger.error('Error getting basic wallet info', { error, promoterId });\n      return {\n        success: false,\n        error: error.message,\n        data: {\n          promoter_id: promoterId,\n          wallet_balance: 0,\n          total_earned: 0,\n          commission_count: 0,\n          recent_commissions: []\n        }\n      };\n    }\n  }\n\n  /**\n   * Get admin commission summary and statistics\n   * @returns {Promise<Object>} Admin commission data\n   */\n  async getAdminCommissionSummary() {\n    try {\n      // Use database function for comprehensive admin summary\n      const { data, error } = await supabase.rpc('get_admin_commission_summary');\n\n      if (error) throw error;\n\n      return {\n        success: true,\n        data: data || {\n          wallet_balance: 0,\n          total_received: 0,\n          unclaimed_total: 0,\n          commission_count: 0,\n          daily_summary: []\n        }\n      };\n\n    } catch (error) {\n      logger.error('Error getting admin commission summary', { error });\n      return await this.getBasicAdminInfo();\n    }\n  }\n\n  /**\n   * Get basic admin information as fallback\n   * @returns {Promise<Object>} Basic admin info\n   */\n  async getBasicAdminInfo() {\n    try {\n      // Get admin ID\n      const { data: adminData, error: adminError } = await supabase\n        .from('profiles')\n        .select('id')\n        .eq('role', 'admin')\n        .limit(1)\n        .single();\n\n      if (adminError || !adminData) {\n        throw new Error('Admin not found');\n      }\n\n      // Get unclaimed commissions from localStorage\n      const unclaimedCommissions = JSON.parse(localStorage.getItem('admin_unclaimed_commissions') || '[]');\n      const totalUnclaimed = unclaimedCommissions.reduce((sum, comm) => sum + (comm.amount || 0), 0);\n      const unclaimedCount = unclaimedCommissions.length;\n\n      // Get admin wallet\n      const { data: walletData, error: walletError } = await supabase\n        .from('admin_wallet')\n        .select('*')\n        .eq('admin_id', adminData.id)\n        .single();\n\n      // Get recent admin commissions\n      const { data: commissionsData, error: commissionsError } = await supabase\n        .from('affiliate_commissions')\n        .select('*')\n        .eq('recipient_type', 'admin')\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n      return {\n        success: true,\n        data: {\n          admin_id: adminData.id,\n          wallet_balance: (walletData?.balance || 0) + totalUnclaimed,\n          total_received: walletData?.total_commission_received || 0,\n          unclaimed_total: totalUnclaimed,\n          commission_count: (walletData?.commission_count || 0) + unclaimedCount,\n          recent_commissions: [...(commissionsData || []), ...unclaimedCommissions.slice(-10)]\n        }\n      };\n\n    } catch (error) {\n      logger.error('Error getting basic admin info', { error });\n      return {\n        success: false,\n        error: error.message,\n        data: {\n          wallet_balance: 0,\n          total_received: 0,\n          unclaimed_total: 0,\n          commission_count: 0,\n          recent_commissions: []\n        }\n      };\n    }\n  }\n\n  /**\n   * Get commission history with filters\n   * @param {Object} filters - Filter options\n   * @returns {Promise<Object>} Filtered commission history\n   */\n  async getCommissionHistory(filters = {}) {\n    try {\n      let query = supabase\n        .from('affiliate_commissions')\n        .select(`\n          *,\n          initiator:profiles!affiliate_commissions_initiator_promoter_id_fkey(name, email),\n          recipient:profiles!affiliate_commissions_recipient_id_fkey(name, email, role)\n        `);\n\n      // Apply filters\n      if (filters.promoterId) {\n        query = query.or(`recipient_id.eq.${filters.promoterId},initiator_promoter_id.eq.${filters.promoterId}`);\n      }\n\n      if (filters.level) {\n        query = query.eq('level', filters.level);\n      }\n\n      if (filters.status) {\n        query = query.eq('status', filters.status);\n      }\n\n      if (filters.dateFrom) {\n        query = query.gte('created_at', filters.dateFrom);\n      }\n\n      if (filters.dateTo) {\n        query = query.lte('created_at', filters.dateTo);\n      }\n\n      // Order by most recent first (no limit - show all records)\n      query = query.order('created_at', { ascending: false });\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      return {\n        success: true,\n        data: data || [],\n        count: data?.length || 0\n      };\n\n    } catch (error) {\n      logger.error('Error getting commission history', { error, filters });\n      return {\n        success: false,\n        error: error.message,\n        data: []\n      };\n    }\n  }\n\n  /**\n   * Trigger notifications for commission distribution\n   * @param {Object} distributionResult - Result from distribution\n   */\n  async triggerCommissionNotifications(distributionResult) {\n    try {\n      // This would integrate with your notification system\n      logger.info('üì¢ Triggering commission notifications', distributionResult);\n      \n      // You can implement push notifications, emails, etc. here\n      // For now, we'll just log the notification trigger\n      \n    } catch (error) {\n      logger.error('Error triggering notifications', { error });\n    }\n  }\n\n  /**\n   * Manual commission distribution (admin only)\n   * @param {string} customerId - Customer UUID\n   * @param {string} initiatorPromoterId - Promoter UUID\n   * @param {string} adminId - Admin UUID performing the action\n   * @returns {Promise<Object>} Distribution result\n   */\n  async manualDistributeCommission(customerId, initiatorPromoterId, adminId) {\n    try {\n      logger.info('üîß Manual commission distribution initiated', {\n        customerId,\n        initiatorPromoterId,\n        adminId\n      });\n\n      // Verify admin permissions\n      const { data: adminData, error: adminError } = await supabase\n        .from('profiles')\n        .select('role')\n        .eq('id', adminId)\n        .eq('role', 'admin')\n        .single();\n\n      if (adminError || !adminData) {\n        throw new Error('Unauthorized: Admin access required');\n      }\n\n      // Proceed with distribution\n      return await this.distributeCommission(customerId, initiatorPromoterId);\n\n    } catch (error) {\n      logger.error('‚ùå Manual commission distribution failed', { error });\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Get commission statistics for dashboard\n   * @returns {Promise<Object>} Commission statistics\n   */\n  async getCommissionStatistics() {\n    try {\n      const { data, error } = await supabase\n        .from('affiliate_commissions')\n        .select('level, amount, status, created_at, recipient_type');\n\n      if (error) throw error;\n\n      const stats = {\n        totalCommissions: data.length,\n        totalAmount: data.reduce((sum, comm) => sum + parseFloat(comm.amount), 0),\n        byLevel: {},\n        byStatus: {},\n        byRecipientType: {},\n        monthlyTrend: {}\n      };\n\n      // Calculate statistics\n      data.forEach(commission => {\n        // By level\n        stats.byLevel[commission.level] = (stats.byLevel[commission.level] || 0) + 1;\n        \n        // By status\n        stats.byStatus[commission.status] = (stats.byStatus[commission.status] || 0) + 1;\n        \n        // By recipient type\n        stats.byRecipientType[commission.recipient_type] = (stats.byRecipientType[commission.recipient_type] || 0) + 1;\n        \n        // Monthly trend\n        const month = new Date(commission.created_at).toISOString().substring(0, 7);\n        if (!stats.monthlyTrend[month]) {\n          stats.monthlyTrend[month] = { count: 0, amount: 0 };\n        }\n        stats.monthlyTrend[month].count += 1;\n        stats.monthlyTrend[month].amount += parseFloat(commission.amount);\n      });\n\n      return {\n        success: true,\n        data: stats\n      };\n\n    } catch (error) {\n      logger.error('Error getting commission statistics', { error });\n      return {\n        success: false,\n        error: error.message,\n        data: {}\n      };\n    }\n  }\n}\n\n// Export singleton instance\nconst commissionService = new CommissionService();\nexport default commissionService;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Activity\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTJoLTRsLTMgOUw5IDNsLTMgOUgyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/activity\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Activity = createLucideIcon('Activity', [\n  ['path', { d: 'M22 12h-4l-3 9L9 3l-3 9H2', key: 'd5dnw9' }],\n]);\n\nexport default Activity;\n","import React, { useState, useEffect } from 'react';\nimport { useAuth } from \"../../common/context/AuthContext\";\nimport AdminNavbar from '../components/AdminNavbar';\nimport { SkeletonFullPage } from '../components/skeletons';\nimport { \n  UnifiedBackground, \n  UnifiedCard, \n  UnifiedButton,\n  useScrollAnimation,\n  SharedStyles\n} from \"../../common/components/SharedTheme\";\nimport commissionService, { COMMISSION_CONFIG } from '../../services/commissionService';\nimport { supabase } from \"../../common/services/supabaseClient\";\nimport { Clock, CheckCircle, XCircle, AlertCircle, Activity } from 'lucide-react';\n\n// Format transaction ID\nconst formatTransactionId = (commission) => {\n  if (commission.transaction_id?.match(/^COM-\\d{5}$/)) {\n    return commission.transaction_id;\n  }\n  return `COM-${String(commission.id || '').slice(0, 5).padStart(5, '0')}`;\n};\n\nfunction AffiliateCommissions() {\n  const { user } = useAuth();\n  useScrollAnimation();\n\n  // State management\n  const [loading, setLoading] = useState(true);\n  const [commissionHistory, setCommissionHistory] = useState([]);\n  const [filteredHistory, setFilteredHistory] = useState([]);\n  const [filters, setFilters] = useState({ level: '', status: '' });\n  const [promoterDetails, setPromoterDetails] = useState({});\n  const [customerDetails, setCustomerDetails] = useState({});\n  const [toast, setToast] = useState({ show: false, message: '', type: '' });\n\n  // Toast utility\n  const showToast = (message, type = 'success') => {\n    setToast({ show: true, message, type });\n    setTimeout(() => {\n      setToast({ show: false, message: '', type: '' });\n    }, 4000);\n  };\n\n\n\n  const loadCommissionData = async () => {\n    try {\n      setLoading(true);\n      const historyResult = await commissionService.getCommissionHistory();\n      \n      if (historyResult.success) {\n        setCommissionHistory(historyResult.data);\n        setFilteredHistory(historyResult.data);\n      } else {\n        // Fallback to localStorage\n        const auditTrail = JSON.parse(localStorage.getItem('commission_audit_trail') || '[]');\n        setCommissionHistory(auditTrail);\n        setFilteredHistory(auditTrail);\n      }\n    } catch (error) {\n      setCommissionHistory([]);\n      setFilteredHistory([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle filter change\n  const handleFilterChange = (key, value) => {\n    setFilters(prev => ({ ...prev, [key]: value }));\n  };\n\n\n  // Load data on component mount\n  useEffect(() => {\n    loadCommissionData();\n  }, []);\n\n  // Get status display\n  const getStatusDisplay = (status) => {\n    switch (status) {\n      case 'credited':\n        return { icon: CheckCircle, color: 'text-green-400', bg: 'bg-green-500/20', label: 'Credited' };\n      case 'pending':\n        return { icon: Clock, color: 'text-yellow-400', bg: 'bg-yellow-500/20', label: 'Pending' };\n      case 'failed':\n        return { icon: XCircle, color: 'text-red-400', bg: 'bg-red-500/20', label: 'Failed' };\n      default:\n        return { icon: AlertCircle, color: 'text-gray-400', bg: 'bg-gray-500/20', label: 'Unknown' };\n    }\n  };\n\n  // Format currency\n  const formatCurrency = (amount) => {\n    return `‚Çπ${parseFloat(amount).toLocaleString('en-IN')}`;\n  };\n\n  // Show loading skeleton\n  if (loading) {\n    return (\n      <>\n        <SharedStyles />\n        <AdminNavbar />\n        <UnifiedBackground>\n          <SkeletonFullPage type=\"dashboard\" />\n        </UnifiedBackground>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <SharedStyles />\n      <AdminNavbar />\n      <UnifiedBackground>\n        <div className=\"min-h-screen pt-40 px-8 pb-8\">\n          <div className=\"w-full px-4\">\n            \n            {/* Header */}\n            <div className=\"flex justify-between items-center mb-8\" data-animate>\n              <div>\n                <h1 className=\"text-4xl font-bold text-white mb-2\">Affiliate Commissions</h1>\n                <p className=\"text-gray-300\">Monitor and manage affiliate commission distributions</p>\n              </div>\n              {/* Filter Controls */}\n              <div className=\"flex items-center space-x-4\">\n                <select\n                  value={filters.level}\n                  onChange={(e) => handleFilterChange('level', e.target.value)}\n                  className=\"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                >\n                  <option value=\"\">All Levels</option>\n                  <option value=\"1\">Level 1 (‚Çπ500)</option>\n                  <option value=\"2\">Level 2 (‚Çπ100)</option>\n                  <option value=\"3\">Level 3 (‚Çπ100)</option>\n                  <option value=\"4\">Level 4 (‚Çπ100)</option>\n                  <option value=\"0\">Admin Fallback</option>\n                </select>\n                <select\n                  value={filters.status}\n                  onChange={(e) => handleFilterChange('status', e.target.value)}\n                  className=\"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                >\n                  <option value=\"\">All Status</option>\n                  <option value=\"credited\">Credited</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"failed\">Failed</option>\n                </select>\n              </div>\n            </div>\n\n\n            {/* Commission History Table */}\n            <div className=\"mt-8\">\n              \n              <UnifiedCard className=\"overflow-hidden\" variant=\"glassDark\">\n                <div className=\"p-6 border-b border-gray-700/50\">\n                  <div className=\"flex items-center justify-end\">\n                    <span className=\"text-sm text-gray-400\">\n                      {filteredHistory.length} transactions\n                    </span>\n                  </div>\n                </div>\n                  \n                  <div className=\"overflow-x-auto\">\n                    {filteredHistory.length === 0 ? (\n                      <div className=\"p-12 text-center\">\n                        <Activity className=\"w-16 h-16 text-gray-500 mx-auto mb-4\" />\n                        <h3 className=\"text-xl font-semibold text-gray-400 mb-2\">No Commission History</h3>\n                        <p className=\"text-gray-500\">\n                          Commission transactions will appear here once customers are created.\n                        </p>\n                      </div>\n                    ) : (\n                      <table className=\"w-full\">\n                        <thead className=\"bg-gray-800/50\">\n                          <tr>\n                            <th className=\"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">ID</th>\n                            <th className=\"px-8 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">Customer</th>\n                            <th className=\"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">Level</th>\n                            <th className=\"px-8 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">Recipient</th>\n                            <th className=\"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">Amount</th>\n                            <th className=\"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6\">Date</th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-gray-700/50\">\n                          {filteredHistory.map((commission, index) => {\n                            const statusDisplay = getStatusDisplay(commission.status);\n                            const StatusIcon = statusDisplay.icon;\n                            \n                            return (\n                              <tr key={commission.id} className=\"hover:bg-gray-800/30 transition-colors\">\n                                <td className=\"px-8 py-5 whitespace-nowrap text-center\">\n                                  <div className=\"text-white font-medium font-mono text-sm\">\n                                    {formatTransactionId(commission)}\n                                  </div>\n                                </td>\n                                <td className=\"px-8 py-5 whitespace-nowrap\">\n                                  <div className=\"flex flex-col\">\n                                    <span className=\"text-white font-medium text-sm\">\n                                      {customerDetails[commission.customer_id]?.name || \n                                       commission.customers?.name || \n                                       commission.customer_name || \n                                       'Unknown Customer'}\n                                    </span>\n                                    <span className=\"text-xs text-gray-400 font-mono\">\n                                      {customerDetails[commission.customer_id]?.customer_id || \n                                       commission.customers?.customer_id || \n                                       commission.customer_generated_id ||\n                                       `C-${String(commission.customer_id || '').slice(-4)}`}\n                                    </span>\n                                  </div>\n                                </td>\n                                <td className=\"px-8 py-5 whitespace-nowrap text-center\">\n                                  <div className=\"flex flex-col items-center space-y-1\">\n                                    {/* Level Badge */}\n                                    <div className={`\n                                      inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm\n                                      ${commission.level === 0 ? 'bg-gray-600 text-gray-200' :\n                                        commission.level === 1 ? 'bg-green-500 text-white' :\n                                        commission.level === 2 ? 'bg-blue-500 text-white' :\n                                        commission.level === 3 ? 'bg-purple-500 text-white' :\n                                        commission.level === 4 ? 'bg-orange-500 text-white' :\n                                        'bg-gray-500 text-white'}\n                                    `}>\n                                      {commission.level === 0 ? 'A' : commission.level}\n                                    </div>\n                                    \n                                    {/* Level Description */}\n                                    <div className={`\n                                      text-xs font-medium\n                                      ${commission.level === 0 ? 'text-gray-400' :\n                                        commission.level === 1 ? 'text-green-300' :\n                                        commission.level === 2 ? 'text-blue-300' :\n                                        commission.level === 3 ? 'text-purple-300' :\n                                        commission.level === 4 ? 'text-orange-300' :\n                                        'text-gray-400'}\n                                    `}>\n                                      {commission.level === 0 ? 'Admin' : \n                                       commission.level === 1 ? 'Direct' : \n                                       commission.level === 2 ? 'Level 2' :\n                                       commission.level === 3 ? 'Level 3' :\n                                       commission.level === 4 ? 'Level 4' :\n                                       `Level ${commission.level}`}\n                                    </div>\n                                    \n                                    {/* Amount Indicator */}\n                                    <div className=\"text-xs text-gray-500 font-mono\">\n                                      {commission.level === 0 ? 'Fallback' : \n                                       commission.level === 1 ? '‚Çπ500' : '‚Çπ100'}\n                                    </div>\n                                  </div>\n                                </td>\n                                <td className=\"px-8 py-5 whitespace-nowrap\">\n                                  <div className=\"flex flex-col\">\n                                    <span className=\"text-white font-medium text-sm\">\n                                      {(() => {\n                                        if (commission.recipient_type === 'admin') {\n                                          return 'Admin';\n                                        }\n                                        return commission.recipient?.name || \n                                               promoterDetails[commission.promoter_id]?.name ||\n                                               commission.promoter_name || \n                                               'Unknown Promoter';\n                                      })()}\n                                    </span>\n                                    <span className=\"text-xs text-gray-400 font-mono\">\n                                      {(() => {\n                                        if (commission.recipient_type === 'admin') {\n                                          return 'SYSTEM';\n                                        }\n                                        \n                                        // Try multiple sources for the real promoter ID\n                                        const realPromoterId = \n                                          // From cached promoter details\n                                          promoterDetails[commission.promoter_id]?.promoter_id ||\n                                          promoterDetails[commission.recipient_id]?.promoter_id ||\n                                          // From commission record directly\n                                          commission.promoter_generated_id ||\n                                          commission.recipient?.promoter_id ||\n                                          // From join data if available\n                                          commission.recipient?.promoter_id;\n                                        \n                                        if (realPromoterId && realPromoterId !== 'undefined' && realPromoterId.length > 2) {\n                                          return realPromoterId;\n                                        }\n                                        \n                                        // Enhanced fallback - try to get from recipient_id\n                                        if (commission.recipient_id && promoterDetails[commission.recipient_id]) {\n                                          const fallbackId = promoterDetails[commission.recipient_id].promoter_id;\n                                          if (fallbackId) return fallbackId;\n                                        }\n                                        \n                                        // Last resort fallback\n                                        return commission.recipient_id ? \n                                               `ID-${String(commission.recipient_id).slice(-6).toUpperCase()}` : \n                                               'LOADING...';\n                                      })()}\n                                    </span>\n                                  </div>\n                                </td>\n                                <td className=\"px-8 py-5 whitespace-nowrap text-center\">\n                                  <div className=\"text-lg font-bold text-green-300 font-mono\">\n                                    {formatCurrency(commission.amount)}\n                                  </div>\n                                </td>\n                                <td className=\"px-8 py-5 whitespace-nowrap text-center\">\n                                  <div className=\"text-sm\">\n                                    <div className=\"text-white font-medium\">\n                                      {commission.created_at ? new Date(commission.created_at).toLocaleDateString('en-IN') : 'Unknown'}\n                                    </div>\n                                    <div className=\"text-xs text-gray-400 font-mono\">\n                                      {commission.created_at ? new Date(commission.created_at).toLocaleTimeString('en-IN', { \n                                        hour: '2-digit', \n                                        minute: '2-digit',\n                                        hour12: true \n                                      }) : ''}\n                                    </div>\n                                  </div>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    )}\n                  </div>\n                </UnifiedCard>\n\n              </div>\n\n          </div>\n        </div>\n\n        {/* Toast Notification */}\n        {toast.show && (\n          <div className={`fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg shadow-lg border transition-all duration-300 ${\n            toast.type === 'success' \n              ? 'bg-green-500/10 border-green-500/30 text-green-300' \n              : 'bg-red-500/10 border-red-500/30 text-red-300'\n          }`}>\n            <div className=\"flex items-start space-x-3\">\n              <div className={`w-6 h-6 rounded-full flex items-center justify-center ${\n                toast.type === 'success' ? 'bg-green-500' : 'bg-red-500'\n              }`}>\n                {toast.type === 'success' ? (\n                  <CheckCircle className=\"w-4 h-4 text-white\" />\n                ) : (\n                  <XCircle className=\"w-4 h-4 text-white\" />\n                )}\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium whitespace-pre-line\">{toast.message}</p>\n              </div>\n              <button\n                onClick={() => setToast({ show: false, message: '', type: '' })}\n                className=\"text-gray-400 hover:text-white transition-colors\"\n              >\n                <XCircle className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n        )}\n\n      </UnifiedBackground>\n    </>\n  );\n}\n\nexport default AffiliateCommissions;\n"],"names":["XCircle","createLucideIcon","cx","cy","r","key","d","BRAND_COLORS","shimmerStyles","concat","document","getElementById","style","createElement","id","textContent","head","appendChild","SkeletonBase","_ref","width","height","className","rounded","animate","_jsx","background","undefined","SkeletonCard","_ref2","_jsxs","children","SkeletonTable","_ref3","rows","columns","gridTemplateColumns","Array","from","length","map","_","i","rowIndex","colIndex","SkeletonStats","_ref5","count","SkeletonManagementGrid","_ref6","SkeletonPageHeader","_ref8","SkeletonSearchFilters","_ref9","SkeletonWithdrawalCard","_ref1","SkeletonFullPage","_ref10","type","COMMISSION_CONFIG","TOTAL_COMMISSION","LEVELS","amount","description","STATUSES","PENDING","CREDITED","FAILED","RECIPIENT_TYPES","PROMOTER","ADMIN","distributeCommission","customerId","initiatorPromoterId","logger","totalAmount","existingCommission","this","checkExistingCommission","existingRecords","recordCount","totalDistributed","success","skipped","message","allRecords","data","error","result","supabase","rpc","p_customer_id","p_initiator_promoter_id","total_distributed","rpcError","_rpcError$message","_rpcError$message2","includes","calculateCommissionFallback","triggerCommissionNotifications","commissionLevels","currentPromoterId","levelsDistributed","remainingPool","level","commissionError","insert","customer_id","initiator_promoter_id","recipient_id","recipient_type","status","transaction_id","String","Date","now","slice","note","parentData","parentError","select","eq","single","parent_promoter_id","adminCommissionError","levels_distributed","admin_fallback","timestamp","toISOString","method","storeCommissionRecord","commissionData","records","JSON","parse","localStorage","getItem","push","_objectSpread","stored_at","splice","setItem","stringify","reduce","sum","record","parseFloat","exists","firstRecord","getPromoterCommissionSummary","promoterId","p_promoter_id","promoter_id","wallet_balance","total_earned","commission_count","recent_commissions","getBasicWalletInfo","walletData","walletError","commissionsData","commissionsError","order","ascending","limit","allCommissions","totalEarned","comm","commissionCount","getAdminCommissionSummary","total_received","unclaimed_total","daily_summary","getBasicAdminInfo","adminData","adminError","Error","unclaimedCommissions","totalUnclaimed","unclaimedCount","admin_id","balance","total_commission_received","getCommissionHistory","filters","arguments","query","or","dateFrom","gte","dateTo","lte","distributionResult","manualDistributeCommission","adminId","getCommissionStatistics","stats","totalCommissions","byLevel","byStatus","byRecipientType","monthlyTrend","forEach","commission","month","created_at","substring","Activity","formatTransactionId","_commission$transacti","match","padStart","user","useAuth","useScrollAnimation","loading","setLoading","useState","commissionHistory","setCommissionHistory","filteredHistory","setFilteredHistory","setFilters","promoterDetails","setPromoterDetails","customerDetails","setCustomerDetails","toast","setToast","show","handleFilterChange","value","prev","useEffect","async","historyResult","commissionService","auditTrail","loadCommissionData","_Fragment","SharedStyles","AdminNavbar","UnifiedBackground","onChange","e","target","UnifiedCard","variant","index","_customerDetails$comm","_commission$customers","_customerDetails$comm2","_commission$customers2","icon","CheckCircle","color","bg","label","Clock","AlertCircle","getStatusDisplay","name","customers","customer_name","customer_generated_id","_commission$recipient","recipient","_promoterDetails$comm","promoter_name","_promoterDetails$comm2","_promoterDetails$comm3","_commission$recipient2","_commission$recipient3","realPromoterId","promoter_generated_id","fallbackId","toUpperCase","toLocaleString","toLocaleDateString","toLocaleTimeString","hour","minute","hour12","onClick"],"sourceRoot":""}