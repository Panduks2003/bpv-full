"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[335],{1065:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(3797).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1754:(e,t,r)=>{r.d(t,{YB:()=>g,bT:()=>d,cU:()=>l,xk:()=>m});r(5043);var s=r(579);const i="rgba(247, 147, 30, 0.1)",a="rgba(255, 255, 255, 0.05)",o="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(a," 25%,\n      ").concat(i," 50%,\n      ").concat(a," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=o,document.head.appendChild(e)}const n=e=>{let{width:t="100%",height:r="1rem",className:i="",rounded:o="rounded-lg",animate:n=!0}=e;return(0,s.jsx)("div",{className:"".concat(o," border border-white/10 ").concat(n?"bp-skeleton-shimmer":""," ").concat(i),style:{width:t,height:r,background:n?void 0:a}})},c=e=>{let{className:t=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(n,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,s.jsx)(n,{width:"3rem",height:"2rem"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n,{width:"70%",height:"1rem"}),(0,s.jsx)(n,{width:"90%",height:"0.75rem"})]})]})},l=e=>{let{rows:t=5,columns:r=4,className:i=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(i),children:[(0,s.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,s.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(r,", 1fr)")},children:Array.from({length:r}).map((e,t)=>(0,s.jsx)(n,{width:"80%",height:"1rem"},t))})}),(0,s.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:t}).map((e,t)=>(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(r,", 1fr)")},children:Array.from({length:r}).map((e,t)=>(0,s.jsx)(n,{width:0===t?"90%":"70%",height:"1rem"},t))})},t))})]})},d=e=>{let{count:t=2,className:r=""}=e;return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ".concat(r),children:Array.from({length:t}).map((e,t)=>(0,s.jsx)(c,{},t))})},m=e=>{let{count:t=4,className:r=""}=e;return(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 ".concat(r),children:Array.from({length:t}).map((e,t)=>(0,s.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-5 h-full",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(n,{width:"3.5rem",height:"3.5rem",rounded:"rounded-xl",className:"mx-auto"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n,{width:"70%",height:"1rem",className:"mx-auto"}),(0,s.jsx)(n,{width:"90%",height:"0.75rem",className:"mx-auto"})]})]})},t))})},u=e=>{let{className:t=""}=e;return(0,s.jsxs)("div",{className:"text-center mb-6 ".concat(t),children:[(0,s.jsx)(n,{width:"4rem",height:"4rem",rounded:"rounded-2xl",className:"mx-auto mb-4"}),(0,s.jsx)(n,{width:"15rem",height:"2rem",className:"mx-auto mb-2"}),(0,s.jsx)(n,{width:"20rem",height:"1rem",className:"mx-auto"})]})},h=e=>{let{className:t=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6 ".concat(t),children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(n,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"}),(0,s.jsx)(n,{width:"6rem",height:"2.5rem",rounded:"rounded-lg"})]})]})},x=e=>{let{className:t=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n,{width:"8rem",height:"1rem"}),(0,s.jsx)(n,{width:"6rem",height:"0.75rem"})]}),(0,s.jsx)(n,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(n,{width:"4rem",height:"0.75rem"}),(0,s.jsx)(n,{width:"6rem",height:"0.75rem"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(n,{width:"5rem",height:"0.75rem"}),(0,s.jsx)(n,{width:"7rem",height:"0.75rem"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,s.jsx)(n,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,s.jsx)(n,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},g=e=>{let{type:t="dashboard"}=e;switch(t){case"dashboard":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(u,{}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n,{width:"10rem",height:"1.5rem",className:"mb-4"}),(0,s.jsx)(d,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n,{width:"12rem",height:"1.5rem",className:"mb-4"}),(0,s.jsx)(m,{})]})]})]})});case"table":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(u,{}),(0,s.jsx)(h,{}),(0,s.jsx)(l,{rows:8,columns:5})]})});case"cards":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(u,{}),(0,s.jsx)(h,{}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)(x,{},t))})]})});default:return(0,s.jsx)(g,{type:"dashboard"})}}},3489:(e,t,r)=>{r.d(t,{A:()=>n,r:()=>o});var s=r(2555),i=r(6127),a=r(3848);const o={TOTAL_COMMISSION:800,LEVELS:{1:{amount:500,description:"Parent Promoter (Immediate Upline)"},2:{amount:100,description:"Next-Level Upline Promoter"},3:{amount:100,description:"Next-Level Upline Promoter"},4:{amount:100,description:"Next-Level Upline Promoter"}},STATUSES:{PENDING:"pending",CREDITED:"credited",FAILED:"failed"},RECIPIENT_TYPES:{PROMOTER:"promoter",ADMIN:"admin"}};const n=new class{async distributeCommission(e,t){try{a.Ay.info("\ud83c\udfaf Starting commission distribution",{customerId:e,initiatorPromoterId:t,totalAmount:o.TOTAL_COMMISSION});const c=await this.checkExistingCommission(e);if(c)return a.Ay.info("\u2139\ufe0f Commission already exists for customer - skipping distribution",{customerId:e,existingRecords:c.recordCount,totalDistributed:c.totalDistributed}),{success:!0,skipped:!0,message:"Commission already distributed for this customer (\u20b9".concat(c.totalDistributed," across ").concat(c.recordCount," records)"),existingCommission:c.allRecords,totalDistributed:c.totalDistributed,recordCount:c.recordCount};let l,d;try{a.Ay.info("\ud83c\udfaf Attempting database function: distribute_affiliate_commission");const r=await i.ND.rpc("distribute_affiliate_commission",{p_customer_id:e,p_initiator_promoter_id:t});if(l=r.data,d=r.error,l&&l.success)return a.Ay.info("\u2705 Database function succeeded, skipping fallback calculation"),{success:!0,data:l,message:"\u20b9".concat(l.total_distributed||o.TOTAL_COMMISSION," commission distributed via database function")};if(l&&l.skipped)return{success:!0,skipped:!0,data:l,message:l.message||"Commission already distributed"}}catch(n){var r,s;if(!(null!==(r=n.message)&&void 0!==r&&r.includes("Could not find the function")||null!==(s=n.message)&&void 0!==s&&s.includes("404")))throw n;a.Ay.warn("\u26a0\ufe0f Commission function not found, using fallback calculation",{customerId:e}),l=await this.calculateCommissionFallback(e,t),d=null}return d&&(a.Ay.error("\u274c Commission distribution failed",{error:d,customerId:e}),a.Ay.info("\ud83d\udd04 Attempting fallback commission calculation",{customerId:e}),l=await this.calculateCommissionFallback(e,t)),a.Ay.success("\u2705 Commission distribution completed",l),await this.triggerCommissionNotifications(l),{success:!0,data:l,message:"\u20b9".concat(o.TOTAL_COMMISSION," commission distributed successfully")}}catch(c){return a.Ay.error("\u274c Commission distribution service error",{error:c.message,customerId:e,initiatorPromoterId:t}),{success:!1,error:c.message}}}async calculateCommissionFallback(e,t){try{a.Ay.info("\ud83d\udcb0 Calculating commission using fallback method",{customerId:e,initiatorPromoterId:t});const s=[500,100,100,100];let o=t,n=0,c=0,l=800;for(let m=1;m<=4;m++){const d=s[m-1];if(o){try{const{error:r}=await i.ND.from("affiliate_commissions").insert({customer_id:e,initiator_promoter_id:t,recipient_id:o,recipient_type:"promoter",level:m,amount:d,status:"credited",transaction_id:"COM-".concat(String(Date.now()).slice(-6)),note:"Level ".concat(m," Commission - \u20b9").concat(d)});r?a.Ay.error("\u274c Failed to create commission record for level ".concat(m),r):(n+=d,l-=d,c++,a.Ay.info("\ud83d\udcb0 Level ".concat(m," commission: \u20b9").concat(d," to promoter ").concat(o," (\u20b9").concat(l," remaining in pool)")))}catch(r){a.Ay.error("\u274c Error creating commission record for level ".concat(m),r)}if(m<4)try{const{data:e,error:t}=await i.ND.from("profiles").select("parent_promoter_id, name, promoter_id").eq("id",o).single();!t&&null!==e&&void 0!==e&&e.parent_promoter_id?(o=e.parent_promoter_id,a.Ay.info("\ud83d\udd17 Moving to parent promoter: ".concat(o," for level ").concat(m+1))):(a.Ay.info("\ud83d\udeab No parent promoter found for level ".concat(m+1)),o=null)}catch(r){a.Ay.error("\u274c Error fetching parent promoter for level ".concat(m+1),r),o=null}}else a.Ay.info("\ud83d\udeab LEVEL ".concat(m," NO PROMOTER:"),{level:m,amount:d,message:"\u20b9".concat(d," stays in pool for admin"),remainingPool:l})}if(l>0)try{const{error:r}=await i.ND.from("affiliate_commissions").insert({customer_id:e,initiator_promoter_id:t,recipient_id:null,recipient_type:"admin",level:0,amount:l,status:"credited",transaction_id:"COM-".concat(String(Date.now()).slice(-6)),note:"Admin Fallback - Remaining from \u20b9800 pool - \u20b9".concat(l)});r?a.Ay.error("\u274c Failed to create admin commission record",r):(n+=l,a.Ay.info("\ud83d\udcb0 Admin commission: \u20b9".concat(l," from remaining pool")))}catch(r){a.Ay.error("\u274c Error creating admin commission record",r)}const d={success:!0,customer_id:e,initiator_promoter_id:t,total_distributed:n,levels_distributed:c,admin_fallback:l,timestamp:(new Date).toISOString(),method:"fallback_calculation",message:"Commission calculated via fallback: \u20b9".concat(n," distributed across ").concat(c," levels")};return this.storeCommissionRecord(d),d}catch(r){return a.Ay.error("\u274c Fallback commission calculation failed",{error:r,customerId:e}),{success:!0,customer_id:e,initiator_promoter_id:t,total_distributed:o.TOTAL_COMMISSION,levels_distributed:4,admin_fallback:0,timestamp:(new Date).toISOString(),method:"basic_fallback",message:"Commission recorded for manual processing"}}}storeCommissionRecord(e){try{const t=JSON.parse(localStorage.getItem("commission_audit_trail")||"[]");t.push((0,s.A)((0,s.A)({},e),{},{stored_at:(new Date).toISOString()})),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("commission_audit_trail",JSON.stringify(t)),a.Ay.info("\ud83d\udcdd Commission record stored for audit",{customer_id:e.customer_id})}catch(t){a.Ay.error("\u274c Failed to store commission record",{error:t})}}async checkExistingCommission(e){try{const{data:t,error:r}=await i.ND.from("affiliate_commissions").select("id, customer_id, amount, recipient_type, status, created_at").eq("customer_id",e).eq("status","credited");if(r)throw r;if(t&&t.length>0){const r=t.reduce((e,t)=>e+parseFloat(t.amount),0);return a.Ay.warn("\ud83d\udeab Commission already exists for customer",{customerId:e,existingRecords:t.length,totalDistributed:r,records:t}),{exists:!0,recordCount:t.length,totalDistributed:r,firstRecord:t[0],allRecords:t}}return null}catch(t){return a.Ay.error("Error checking existing commission",{error:t,customerId:e}),null}}async getPromoterCommissionSummary(e){try{const{data:t,error:r}=await i.ND.rpc("get_promoter_commission_summary",{p_promoter_id:e});if(r)throw r;return{success:!0,data:t||{promoter_id:e,wallet_balance:0,total_earned:0,commission_count:0,recent_commissions:[]}}}catch(t){return a.Ay.error("Error getting promoter commission summary",{error:t,promoterId:e}),await this.getBasicWalletInfo(e)}}async getBasicWalletInfo(e){try{const{data:t,error:r}=await i.ND.from("profiles").select("wallet_balance").eq("id",e).eq("role","promoter").single(),{data:s,error:a}=await i.ND.from("affiliate_commissions").select("\n          id,\n          customer_id,\n          initiator_promoter_id,\n          level,\n          amount,\n          status,\n          created_at,\n          note\n        ").eq("recipient_id",e).eq("status","credited").order("created_at",{ascending:!1}).limit(10),{data:o}=await i.ND.from("affiliate_commissions").select("amount").eq("recipient_id",e).eq("status","credited"),n=(null===o||void 0===o?void 0:o.reduce((e,t)=>e+(parseFloat(t.amount)||0),0))||0,c=(null===o||void 0===o?void 0:o.length)||0;return{success:!0,data:{promoter_id:e,wallet_balance:parseFloat(null===t||void 0===t?void 0:t.wallet_balance)||n,total_earned:n,commission_count:c,recent_commissions:s||[]}}}catch(t){return a.Ay.error("Error getting basic wallet info",{error:t,promoterId:e}),{success:!1,error:t.message,data:{promoter_id:e,wallet_balance:0,total_earned:0,commission_count:0,recent_commissions:[]}}}}async getAdminCommissionSummary(){try{const{data:e,error:t}=await i.ND.rpc("get_admin_commission_summary");if(t)throw t;return{success:!0,data:e||{wallet_balance:0,total_received:0,unclaimed_total:0,commission_count:0,daily_summary:[]}}}catch(e){return a.Ay.error("Error getting admin commission summary",{error:e}),await this.getBasicAdminInfo()}}async getBasicAdminInfo(){try{const{data:e,error:t}=await i.ND.from("profiles").select("id").eq("role","admin").limit(1).single();if(t||!e)throw new Error("Admin not found");const r=JSON.parse(localStorage.getItem("admin_unclaimed_commissions")||"[]"),s=r.reduce((e,t)=>e+(t.amount||0),0),a=r.length,{data:o,error:n}=await i.ND.from("admin_wallet").select("*").eq("admin_id",e.id).single(),{data:c,error:l}=await i.ND.from("affiliate_commissions").select("*").eq("recipient_type","admin").order("created_at",{ascending:!1}).limit(20);return{success:!0,data:{admin_id:e.id,wallet_balance:((null===o||void 0===o?void 0:o.balance)||0)+s,total_received:(null===o||void 0===o?void 0:o.total_commission_received)||0,unclaimed_total:s,commission_count:((null===o||void 0===o?void 0:o.commission_count)||0)+a,recent_commissions:[...c||[],...r.slice(-10)]}}}catch(e){return a.Ay.error("Error getting basic admin info",{error:e}),{success:!1,error:e.message,data:{wallet_balance:0,total_received:0,unclaimed_total:0,commission_count:0,recent_commissions:[]}}}}async getCommissionHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=i.ND.from("affiliate_commissions").select("\n          *,\n          initiator:profiles!affiliate_commissions_initiator_promoter_id_fkey(name, email),\n          recipient:profiles!affiliate_commissions_recipient_id_fkey(name, email, role)\n        ");e.promoterId&&(t=t.or("recipient_id.eq.".concat(e.promoterId,",initiator_promoter_id.eq.").concat(e.promoterId))),e.level&&(t=t.eq("level",e.level)),e.status&&(t=t.eq("status",e.status)),e.dateFrom&&(t=t.gte("created_at",e.dateFrom)),e.dateTo&&(t=t.lte("created_at",e.dateTo)),t=t.order("created_at",{ascending:!1});const{data:r,error:s}=await t;if(s)throw s;return{success:!0,data:r||[],count:(null===r||void 0===r?void 0:r.length)||0}}catch(t){return a.Ay.error("Error getting commission history",{error:t,filters:e}),{success:!1,error:t.message,data:[]}}}async triggerCommissionNotifications(e){try{a.Ay.info("\ud83d\udce2 Triggering commission notifications",e)}catch(t){a.Ay.error("Error triggering notifications",{error:t})}}async manualDistributeCommission(e,t,r){try{a.Ay.info("\ud83d\udd27 Manual commission distribution initiated",{customerId:e,initiatorPromoterId:t,adminId:r});const{data:s,error:o}=await i.ND.from("profiles").select("role").eq("id",r).eq("role","admin").single();if(o||!s)throw new Error("Unauthorized: Admin access required");return await this.distributeCommission(e,t)}catch(s){return a.Ay.error("\u274c Manual commission distribution failed",{error:s}),{success:!1,error:s.message}}}async getCommissionStatistics(){try{const{data:e,error:t}=await i.ND.from("affiliate_commissions").select("level, amount, status, created_at, recipient_type");if(t)throw t;const r={totalCommissions:e.length,totalAmount:e.reduce((e,t)=>e+parseFloat(t.amount),0),byLevel:{},byStatus:{},byRecipientType:{},monthlyTrend:{}};return e.forEach(e=>{r.byLevel[e.level]=(r.byLevel[e.level]||0)+1,r.byStatus[e.status]=(r.byStatus[e.status]||0)+1,r.byRecipientType[e.recipient_type]=(r.byRecipientType[e.recipient_type]||0)+1;const t=new Date(e.created_at).toISOString().substring(0,7);r.monthlyTrend[t]||(r.monthlyTrend[t]={count:0,amount:0}),r.monthlyTrend[t].count+=1,r.monthlyTrend[t].amount+=parseFloat(e.amount)}),{success:!0,data:r}}catch(e){return a.Ay.error("Error getting commission statistics",{error:e}),{success:!1,error:e.message,data:{}}}}}},7335:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(2555),i=r(5043),a=r(6621),o=r(1460),n=r(1754),c=r(3959),l=r(3489),d=(r(6127),r(917)),m=r(3458),u=r(1065),h=r(987);const x=(0,r(3797).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var g=r(579);const p=e=>{var t;return null!==(t=e.transaction_id)&&void 0!==t&&t.match(/^COM-\d{5}$/)?e.transaction_id:"COM-".concat(String(e.id||"").slice(0,5).padStart(5,"0"))};const f=function(){const{user:e}=(0,a.As)();(0,c.r9)();const[t,r]=(0,i.useState)(!0),[f,y]=(0,i.useState)([]),[v,b]=(0,i.useState)([]),[_,w]=(0,i.useState)({level:"",status:""}),[j,N]=(0,i.useState)({}),[A,C]=(0,i.useState)({}),[k,I]=(0,i.useState)({show:!1,message:"",type:""}),S=(e,t)=>{w(r=>(0,s.A)((0,s.A)({},r),{},{[e]:t}))};return(0,i.useEffect)(()=>{(async()=>{try{r(!0);const e=await l.A.getCommissionHistory();if(e.success)y(e.data),b(e.data);else{const e=JSON.parse(localStorage.getItem("commission_audit_trail")||"[]");y(e),b(e)}}catch(e){y([]),b([])}finally{r(!1)}})()},[]),t?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.wE,{}),(0,g.jsx)(o.A,{}),(0,g.jsx)(c.dQ,{children:(0,g.jsx)(n.YB,{type:"dashboard"})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.wE,{}),(0,g.jsx)(o.A,{}),(0,g.jsxs)(c.dQ,{children:[(0,g.jsx)("div",{className:"min-h-screen pt-40 px-8 pb-8",children:(0,g.jsxs)("div",{className:"w-full px-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-8","data-animate":!0,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Affiliate Commissions"}),(0,g.jsx)("p",{className:"text-gray-300",children:"Monitor and manage affiliate commission distributions"})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsxs)("select",{value:_.level,onChange:e=>S("level",e.target.value),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,g.jsx)("option",{value:"",children:"All Levels"}),(0,g.jsx)("option",{value:"1",children:"Level 1 (\u20b9500)"}),(0,g.jsx)("option",{value:"2",children:"Level 2 (\u20b9100)"}),(0,g.jsx)("option",{value:"3",children:"Level 3 (\u20b9100)"}),(0,g.jsx)("option",{value:"4",children:"Level 4 (\u20b9100)"}),(0,g.jsx)("option",{value:"0",children:"Admin Fallback"})]}),(0,g.jsxs)("select",{value:_.status,onChange:e=>S("status",e.target.value),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,g.jsx)("option",{value:"",children:"All Status"}),(0,g.jsx)("option",{value:"credited",children:"Credited"}),(0,g.jsx)("option",{value:"pending",children:"Pending"}),(0,g.jsx)("option",{value:"failed",children:"Failed"})]})]})]}),(0,g.jsx)("div",{className:"mt-8",children:(0,g.jsxs)(c.Xg,{className:"overflow-hidden",variant:"glassDark",children:[(0,g.jsx)("div",{className:"p-6 border-b border-gray-700/50",children:(0,g.jsx)("div",{className:"flex items-center justify-end",children:(0,g.jsxs)("span",{className:"text-sm text-gray-400",children:[v.length," transactions"]})})}),(0,g.jsx)("div",{className:"overflow-x-auto",children:0===v.length?(0,g.jsxs)("div",{className:"p-12 text-center",children:[(0,g.jsx)(x,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),(0,g.jsx)("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Commission History"}),(0,g.jsx)("p",{className:"text-gray-500",children:"Commission transactions will appear here once customers are created."})]}):(0,g.jsxs)("table",{className:"w-full",children:[(0,g.jsx)("thead",{className:"bg-gray-800/50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"ID"}),(0,g.jsx)("th",{className:"px-8 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"Customer"}),(0,g.jsx)("th",{className:"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"Level"}),(0,g.jsx)("th",{className:"px-8 py-4 text-left text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"Recipient"}),(0,g.jsx)("th",{className:"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"Amount"}),(0,g.jsx)("th",{className:"px-8 py-4 text-center text-xs font-medium text-gray-300 uppercase tracking-wider w-1/6",children:"Date"})]})}),(0,g.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:v.map((e,t)=>{var r,s,i,a;(e=>{switch(e){case"credited":return{icon:d.A,color:"text-green-400",bg:"bg-green-500/20",label:"Credited"};case"pending":return{icon:m.A,color:"text-yellow-400",bg:"bg-yellow-500/20",label:"Pending"};case"failed":return{icon:u.A,color:"text-red-400",bg:"bg-red-500/20",label:"Failed"};default:return{icon:h.A,color:"text-gray-400",bg:"bg-gray-500/20",label:"Unknown"}}})(e.status).icon;return(0,g.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,g.jsx)("div",{className:"text-white font-medium font-mono text-sm",children:p(e)})}),(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("span",{className:"text-white font-medium text-sm",children:(null===(r=A[e.customer_id])||void 0===r?void 0:r.name)||(null===(s=e.customers)||void 0===s?void 0:s.name)||e.customer_name||"Unknown Customer"}),(0,g.jsx)("span",{className:"text-xs text-gray-400 font-mono",children:(null===(i=A[e.customer_id])||void 0===i?void 0:i.customer_id)||(null===(a=e.customers)||void 0===a?void 0:a.customer_id)||e.customer_generated_id||"C-".concat(String(e.customer_id||"").slice(-4))})]})}),(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,g.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,g.jsx)("div",{className:"\n                                      inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm\n                                      ".concat(0===e.level?"bg-gray-600 text-gray-200":1===e.level?"bg-green-500 text-white":2===e.level?"bg-blue-500 text-white":3===e.level?"bg-purple-500 text-white":4===e.level?"bg-orange-500 text-white":"bg-gray-500 text-white","\n                                    "),children:0===e.level?"A":e.level}),(0,g.jsx)("div",{className:"\n                                      text-xs font-medium\n                                      ".concat(0===e.level?"text-gray-400":1===e.level?"text-green-300":2===e.level?"text-blue-300":3===e.level?"text-purple-300":4===e.level?"text-orange-300":"text-gray-400","\n                                    "),children:0===e.level?"Admin":1===e.level?"Direct":2===e.level?"Level 2":3===e.level?"Level 3":4===e.level?"Level 4":"Level ".concat(e.level)}),(0,g.jsx)("div",{className:"text-xs text-gray-500 font-mono",children:0===e.level?"Fallback":1===e.level?"\u20b9500":"\u20b9100"})]})}),(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("span",{className:"text-white font-medium text-sm",children:"admin"===e.recipient_type?"Admin":(null===(n=e.recipient)||void 0===n?void 0:n.name)||(null===(c=j[e.promoter_id])||void 0===c?void 0:c.name)||e.promoter_name||"Unknown Promoter"}),(0,g.jsx)("span",{className:"text-xs text-gray-400 font-mono",children:((t,r,s,i)=>{if("admin"===e.recipient_type)return"SYSTEM";const a=(null===(t=j[e.promoter_id])||void 0===t?void 0:t.promoter_id)||(null===(r=j[e.recipient_id])||void 0===r?void 0:r.promoter_id)||e.promoter_generated_id||(null===(s=e.recipient)||void 0===s?void 0:s.promoter_id)||(null===(i=e.recipient)||void 0===i?void 0:i.promoter_id);if(a&&"undefined"!==a&&a.length>2)return a;if(e.recipient_id&&j[e.recipient_id]){const t=j[e.recipient_id].promoter_id;if(t)return t}return e.recipient_id?"ID-".concat(String(e.recipient_id).slice(-6).toUpperCase()):"LOADING..."})()})]})}),(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,g.jsx)("div",{className:"text-lg font-bold text-green-300 font-mono",children:(o=e.amount,"\u20b9".concat(parseFloat(o).toLocaleString("en-IN")))})}),(0,g.jsx)("td",{className:"px-8 py-5 whitespace-nowrap text-center",children:(0,g.jsxs)("div",{className:"text-sm",children:[(0,g.jsx)("div",{className:"text-white font-medium",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-IN"):"Unknown"}),(0,g.jsx)("div",{className:"text-xs text-gray-400 font-mono",children:e.created_at?new Date(e.created_at).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):""})]})})]},e.id);var o,n,c})})]})})]})})]})}),k.show&&(0,g.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg shadow-lg border transition-all duration-300 ".concat("success"===k.type?"bg-green-500/10 border-green-500/30 text-green-300":"bg-red-500/10 border-red-500/30 text-red-300"),children:(0,g.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,g.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat("success"===k.type?"bg-green-500":"bg-red-500"),children:"success"===k.type?(0,g.jsx)(d.A,{className:"w-4 h-4 text-white"}):(0,g.jsx)(u.A,{className:"w-4 h-4 text-white"})}),(0,g.jsx)("div",{className:"flex-1",children:(0,g.jsx)("p",{className:"text-sm font-medium whitespace-pre-line",children:k.message})}),(0,g.jsx)("button",{onClick:()=>I({show:!1,message:"",type:""}),className:"text-gray-400 hover:text-white transition-colors",children:(0,g.jsx)(u.A,{className:"w-4 h-4"})})]})})]})]})}}}]);
//# sourceMappingURL=335.c5c6c708.chunk.js.map