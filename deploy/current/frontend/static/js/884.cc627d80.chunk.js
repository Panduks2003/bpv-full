"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[884],{1754:(e,t,s)=>{s.d(t,{YB:()=>u,bT:()=>o,cU:()=>d,xk:()=>m});s(5043);var a=s(579);const r="rgba(247, 147, 30, 0.1)",n="rgba(255, 255, 255, 0.05)",i="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(n," 25%,\n      ").concat(r," 50%,\n      ").concat(n," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=i,document.head.appendChild(e)}const l=e=>{let{width:t="100%",height:s="1rem",className:r="",rounded:i="rounded-lg",animate:l=!0}=e;return(0,a.jsx)("div",{className:"".concat(i," border border-white/10 ").concat(l?"bp-skeleton-shimmer":""," ").concat(r),style:{width:t,height:s,background:l?void 0:n}})},c=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(l,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,a.jsx)(l,{width:"3rem",height:"2rem"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"70%",height:"1rem"}),(0,a.jsx)(l,{width:"90%",height:"0.75rem"})]})]})},d=e=>{let{rows:t=5,columns:s=4,className:r=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(r),children:[(0,a.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,a.jsx)(l,{width:"80%",height:"1rem"},t))})}),(0,a.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,a.jsx)(l,{width:0===t?"90%":"70%",height:"1rem"},t))})},t))})]})},o=e=>{let{count:t=2,className:s=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,a.jsx)(c,{},t))})},m=e=>{let{count:t=4,className:s=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-5 h-full",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(l,{width:"3.5rem",height:"3.5rem",rounded:"rounded-xl",className:"mx-auto"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"70%",height:"1rem",className:"mx-auto"}),(0,a.jsx)(l,{width:"90%",height:"0.75rem",className:"mx-auto"})]})]})},t))})},x=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"text-center mb-6 ".concat(t),children:[(0,a.jsx)(l,{width:"4rem",height:"4rem",rounded:"rounded-2xl",className:"mx-auto mb-4"}),(0,a.jsx)(l,{width:"15rem",height:"2rem",className:"mx-auto mb-2"}),(0,a.jsx)(l,{width:"20rem",height:"1rem",className:"mx-auto"})]})},p=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6 ".concat(t),children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(l,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"}),(0,a.jsx)(l,{width:"6rem",height:"2.5rem",rounded:"rounded-lg"})]})]})},h=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(t),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"8rem",height:"1rem"}),(0,a.jsx)(l,{width:"6rem",height:"0.75rem"})]}),(0,a.jsx)(l,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(l,{width:"4rem",height:"0.75rem"}),(0,a.jsx)(l,{width:"6rem",height:"0.75rem"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(l,{width:"5rem",height:"0.75rem"}),(0,a.jsx)(l,{width:"7rem",height:"0.75rem"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,a.jsx)(l,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,a.jsx)(l,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},u=e=>{let{type:t="dashboard"}=e;switch(t){case"dashboard":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(x,{}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l,{width:"10rem",height:"1.5rem",className:"mb-4"}),(0,a.jsx)(o,{})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l,{width:"12rem",height:"1.5rem",className:"mb-4"}),(0,a.jsx)(m,{})]})]})]})});case"table":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(x,{}),(0,a.jsx)(p,{}),(0,a.jsx)(d,{rows:8,columns:5})]})});case"cards":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(x,{}),(0,a.jsx)(p,{}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)(h,{},t))})]})});default:return(0,a.jsx)(u,{type:"dashboard"})}}},5680:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8112:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8884:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(2555),r=s(5043),n=s(6621),i=s(1460),l=s(3959),c=s(6127),d=s(5229),o=s(254),m=s(917),x=s(98),p=s(5897),h=s(9589),u=s(5680),g=s(9213),j=s(9256),y=s(430),N=s(8112),f=s(1065),w=s(1172),b=s(1754),v=s(579);const k=(e,t)=>{const s=[...t].sort((e,t)=>new Date(e.created_at)-new Date(t.created_at)).findIndex(t=>t.id===e.id),a=String(s+1).padStart(2,"0");return"PIN_REQ-".concat(a)},A=e=>e.transaction_id||e.requestId||"TXN-".concat(e.id.slice(0,8));const _=function(){var e,t;const{user:s}=(0,n.As)();(0,l.r9)();const[_,D]=(0,r.useState)([]),[C,q]=(0,r.useState)([]),[P,S]=(0,r.useState)([]),[I,T]=(0,r.useState)([]),[L,R]=(0,r.useState)([]),[E,M]=(0,r.useState)([]),[U,F]=(0,r.useState)(""),[X,B]=(0,r.useState)("all"),[O,z]=(0,r.useState)("pin-requests"),[Q,V]=(0,r.useState)(!0),[W,H]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[Y,K]=(0,r.useState)(0),[Z,$]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[se,ae]=(0,r.useState)({action:"approve",adminNotes:""}),[re,ne]=(0,r.useState)(!1),[ie,le]=(0,r.useState)(null),[ce,de]=(0,r.useState)({promoterId:"",pins:"",action:"add"}),[oe,me]=(0,r.useState)({}),[xe,pe]=(0,r.useState)({show:!1,message:"",type:""}),he=function(e){pe({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>{pe({show:!1,message:"",type:""})},4e3)};(0,r.useEffect)(()=>{ue();const e=setInterval(()=>{ue()},3e4);return()=>clearInterval(e)},[]);const ue=async()=>{await Promise.all([ge(),je(),ye()])};(0,r.useEffect)(()=>{let e=_||[];U&&(e=e.filter(e=>{var t,s;const a=(e.request_number||"").toLowerCase(),r=((null===(t=e.promoter)||void 0===t?void 0:t.email)||"").toLowerCase(),n=((null===(s=e.promoter)||void 0===s?void 0:s.name)||"").toLowerCase(),i=(U||"").toLowerCase();return a.includes(i)||r.includes(i)||n.includes(i)})),e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),S(e)},[_,U]),(0,r.useEffect)(()=>{let e=C||[];"all"!==X&&(e=e.filter(e=>(e.actionType||"pending")===X)),U&&(e=e.filter(e=>{const t=(e.requestId||"").toLowerCase(),s=(e.promoterEmail||"").toLowerCase(),a=(e.promoterName||"").toLowerCase(),r=(U||"").toLowerCase();return t.includes(r)||s.includes(r)||a.includes(r)})),e.sort((e,t)=>new Date(t.requestDate)-new Date(e.requestDate)),T(e)},[C,U,X]),(0,r.useEffect)(()=>{let e=L||[];U&&(e=e.filter(e=>{const t=(e.name||"").toLowerCase(),s=(e.email||"").toLowerCase(),a=(e.promoter_id||"").toLowerCase(),r=(e.phone||"").toLowerCase(),n=(U||"").toLowerCase();return t.includes(n)||s.includes(n)||a.includes(n)||r.includes(n)})),e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),M(e)},[L,U]);const ge=async()=>{try{V(!0);const e=await o.Ay.getPinRequests(null,null,100);D(e),S(e)}catch(e){D([]),S([])}finally{V(!1)}},je=async()=>{try{V(!0);const e=(await d.Ay.getAllPinTransactions({actionType:"all"!==X?X:void 0})).map(e=>({id:e.id,requestId:e.transaction_id,quantity:e.pin_change_value,status:"completed",promoterId:e.user_id,promoterEmail:e.userEmail,promoterName:e.userName,promoterGeneratedId:"BPVP".concat(String(Math.floor(99*Math.random())).padStart(2,"0")),requestDate:e.created_at,responseDate:e.created_at,adminNotes:e.note,actionType:e.action_type,customerName:null,displayConfig:e.displayConfig,formattedAmount:e.formattedAmount}));q(e),T(e)}catch(e){q([]),T([])}finally{V(!1)}},ye=async()=>{try{const{data:e,error:t}=await c.ND.from("profiles").select("id, name, email, phone, pins, promoter_id, created_at").eq("role","promoter").order("created_at",{ascending:!1});if(!t&&e){const t=e.map(e=>({id:e.id,name:e.name||"Unknown",email:e.email||"Unknown",phone:e.phone||"Not provided",promoter_id:e.promoter_id||"N/A",pins:e.pins||0,created_at:e.created_at}));R(t),M(t)}else R([]),M([])}catch(e){R([]),M([])}},Ne=(e,t,s)=>{J(e),K(s),ae({action:t,adminNotes:""}),te(!0)},fe=()=>{ne(!1),le(null),de({promoterId:"",pins:"",action:"add"}),me({})};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.wE,{}),(0,v.jsx)(i.A,{}),(0,v.jsxs)(l.dQ,{children:[(0,v.jsx)("div",{className:"min-h-screen pt-40 px-8 pb-8",children:(0,v.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-8","data-animate":!0,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Pin Management System"}),(0,v.jsx)("p",{className:"text-gray-300",children:"Manage pin requests and direct pin allocation"})]}),(0,v.jsx)("div",{className:"flex space-x-1","data-animate":!0,children:[{id:"pin-requests",label:"PIN Requests",icon:y.A},{id:"direct",label:"Allocate Pins",icon:N.A},{id:"requests",label:"Pin History",icon:x.A}].map(e=>{const t=e.icon;return(0,v.jsxs)("button",{onClick:()=>z(e.id),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-300 ".concat(O===e.id?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50 hover:text-white"),children:[(0,v.jsx)(t,{className:"w-5 h-5"}),(0,v.jsx)("span",{children:e.label})]},e.id)})})]}),"requests"===O&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Xg,{className:"p-6 mb-6",variant:"glassDark","data-animate":!0,children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,v.jsx)("input",{type:"text",placeholder:"Search by Transaction ID (BPV-AA-01), promoter name...",value:U,onChange:e=>F(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500"})]})}),(0,v.jsx)(l.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:Q?(0,v.jsx)(b.cU,{rows:6,columns:5}):(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-800/50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Pins"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Action Type"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Notes"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===I.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-400",children:"No pin transactions found"})}):I.map((e,t)=>(0,v.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("admin_allocation"===e.actionType?"bg-green-100 text-green-800":"customer_creation"===e.actionType?"bg-blue-100 text-blue-800":"admin_deduction"===e.actionType?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:A(e)})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(N.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("span",{className:"text-white font-medium",children:e.promoterName||"Unknown"}),(0,v.jsx)("span",{className:"text-xs text-gray-400",children:(()=>{const t=L.find(t=>t.id===e.promoterId);return(null===t||void 0===t?void 0:t.promoter_id)||"No ID"})()})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("div",{className:"flex items-center",children:(()=>{let t,s;return"admin_allocation"===e.actionType?(t=Math.abs(e.quantity),s=!0):"customer_creation"===e.actionType?(t=Math.abs(e.quantity),s=!1):(t=e.quantity,s=e.quantity>0),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("span",{className:"text-sm font-medium ".concat(s?"text-green-300":"text-red-300"),children:["\ud83d\udccc ",s?"+":"-",t]})})})()})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("customer_creation"===e.actionType?"bg-blue-100 text-blue-800":"admin_allocation"===e.actionType?"bg-green-100 text-green-800":"admin_deduction"===e.actionType?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"customer_creation"===e.actionType?"\ud83d\udc64 Customer Creation":"admin_allocation"===e.actionType?"\u2705 Admin Allocation":"admin_deduction"===e.actionType?"\u274c Admin Deduction":"\u2753 Unknown"})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.requestDate?new Date(e.requestDate).toLocaleDateString():"N/A"}),(0,v.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs truncate",children:e.adminNotes||"No notes"})]},e.id))})]})})})]}),"pin-requests"===O&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Xg,{className:"p-6 mb-6",variant:"glassDark","data-animate":!0,children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,v.jsx)("input",{type:"text",placeholder:"Search by Request ID (PIN_REQ-01), promoter name, or reason...",value:U,onChange:e=>F(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,v.jsx)(l.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:Q?(0,v.jsx)(b.cU,{rows:6,columns:6}):(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-800/50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Request ID"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Requested PINs"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reason"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===P.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-400",children:"No PIN requests found"})}):P.map((e,t)=>{var s;return(0,v.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:k(e,_)})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(N.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("span",{className:"text-white font-medium",children:e.promoter_name||(null===(s=e.promoter)||void 0===s?void 0:s.name)||"Unknown"}),(0,v.jsx)("span",{className:"text-xs text-gray-400",children:(()=>{const t=L.find(t=>t.id===e.promoter_id);return(null===t||void 0===t?void 0:t.promoter_id)||"No ID"})()})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("div",{className:"flex items-center",children:(0,v.jsxs)("span",{className:"text-sm font-medium text-blue-400",children:["\ud83d\udccc +",e.requested_pins||0]})})}),(0,v.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs truncate",children:e.reason||"No reason provided"}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"pending"===e.status?"\u23f3 Pending":"approved"===e.status?"\u2705 Approved":"rejected"===e.status?"\u274c Rejected":"\u2753 Unknown"})}),(0,v.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["pending"===e.status&&(0,v.jsxs)("div",{className:"flex space-x-2",children:[(0,v.jsx)("button",{onClick:()=>Ne(e,"approve",t),className:"text-green-400 hover:text-green-300 transition-colors",children:(0,v.jsx)(m.A,{className:"w-5 h-5"})}),(0,v.jsx)("button",{onClick:()=>Ne(e,"reject",t),className:"text-red-400 hover:text-red-300 transition-colors",children:(0,v.jsx)(f.A,{className:"w-5 h-5"})})]}),"pending"!==e.status&&(0,v.jsx)("span",{className:"text-gray-500",children:"No actions"})]})]},e.id)})})]})})})]}),"direct"===O&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Xg,{className:"p-6 mb-6",variant:"glassDark","data-animate":!0,children:(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,v.jsx)("input",{type:"text",placeholder:"Search promoters by name, email, or ID (BPVP15)...",value:U,onChange:e=>F(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})}),(0,v.jsx)(l.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:Q?(0,v.jsx)(b.cU,{rows:6,columns:5}):(0,v.jsx)("div",{className:"overflow-x-auto",children:(0,v.jsxs)("table",{className:"w-full",children:[(0,v.jsx)("thead",{className:"bg-gray-800/50",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact Details"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Current Pins"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Join Date"}),(0,v.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,v.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===E.length?(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:U?"No promoters found matching your search":"No promoters found"})}):E.map(e=>(0,v.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(N.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,v.jsxs)("div",{className:"flex flex-col",children:[(0,v.jsx)("span",{className:"text-white font-medium",children:e.name||"Unknown"}),(0,v.jsx)("span",{className:"text-xs text-gray-400",children:e.promoter_id||"No ID"})]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(h.A,{className:"w-3 h-3 mr-2 text-gray-400"}),e.email||"No email"]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(u.A,{className:"w-3 h-3 mr-2 text-gray-400"}),e.phone||"No phone"]})]})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,v.jsx)("div",{className:"flex items-center",children:(0,v.jsxs)("span",{className:"text-sm font-medium text-white",children:["\ud83d\udccc ",e.pins||0]})})}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,v.jsx)("div",{className:"flex space-x-2",children:(0,v.jsx)("button",{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;le(e),de({promoterId:(null===e||void 0===e?void 0:e.id)||"",pins:"",action:"add"}),me({}),ne(!0)}(e),className:"text-purple-400 hover:text-purple-300 transition-colors",title:"Allocate Pins",children:(0,v.jsx)(g.A,{className:"w-4 h-4"})})})})]},e.id))})]})})})]})]})}),ee&&G&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,v.jsx)(l.Xg,{className:"w-full max-w-lg mx-4",variant:"glassDark",children:(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,v.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["approved"===se.action?"Approve":"Reject"," Pin Request"]}),(0,v.jsx)("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(w.A,{className:"w-5 h-5"})})]}),(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:(0,v.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("span",{className:"text-gray-400",children:"Request ID:"}),(0,v.jsx)("span",{className:"text-white font-medium font-mono",children:k(G,_)})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("span",{className:"text-gray-400",children:"User:"}),(0,v.jsx)("span",{className:"text-white font-medium",children:G.promoter_name||(null===(e=G.promoter)||void 0===e?void 0:e.name)||"Unknown"})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("span",{className:"text-gray-400",children:"Action Type:"}),(0,v.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((G.action_type||G.actionType)===d.hO.CUSTOMER_CREATION?"bg-green-500/20 text-green-300":(G.action_type||G.actionType)===d.hO.ADMIN_ALLOCATION?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:null===(t=G.action_type||G.actionType||"PIN_REQUEST")||void 0===t?void 0:t.replace("_"," ").toUpperCase()})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("span",{className:"text-gray-400",children:"PIN Requested:"}),(0,v.jsxs)("span",{className:"font-medium text-blue-400",children:["+",G.requested_pins||G.pin_quantity||G.quantity||0]})]}),(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsx)("span",{className:"text-gray-400",children:"Date:"}),(0,v.jsx)("span",{className:"text-white font-medium",children:G.created_at||G.requestDate?new Date(G.created_at||G.requestDate).toLocaleDateString():"N/A"})]})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-gray-300 text-sm mb-2",children:"Admin Notes"}),(0,v.jsx)("textarea",{value:se.adminNotes,onChange:e=>ae((0,a.A)((0,a.A)({},se),{},{adminNotes:e.target.value})),placeholder:"Add notes for ".concat(se.action," this request..."),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]})]}),(0,v.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,v.jsx)(l.Rq,{variant:"secondary",onClick:()=>te(!1),children:"Cancel"}),(0,v.jsx)(l.Rq,{onClick:()=>(async(e,t)=>{try{H(!0),"approve"===t?await o.Ay.approvePinRequest(e.id,s.id,se.adminNotes||"Request approved by admin"):"reject"===t&&await o.Ay.rejectPinRequest(e.id,s.id,se.adminNotes||"Request rejected by admin"),await ge(),te(!1),J(null)}catch(a){}finally{H(!1)}})(G,se.action),disabled:W,className:"flex items-center space-x-2 ".concat("approved"===se.action?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:W?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.A,{className:"w-4 h-4 bp-animate-spin"}),(0,v.jsx)("span",{children:"Processing..."})]}):(0,v.jsxs)(v.Fragment,{children:["approved"===se.action?(0,v.jsx)(m.A,{className:"w-4 h-4"}):(0,v.jsx)(f.A,{className:"w-4 h-4"}),(0,v.jsxs)("span",{children:["approved"===se.action?"Approve":"Reject"," Request"]})]})})]})]})})}),re&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,v.jsx)(l.Xg,{className:"w-full max-w-md mx-4",variant:"glassDark",children:(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-white",children:ie?"Allocate Pins - ".concat(ie.name):"Allocate Pins"}),(0,v.jsx)("button",{onClick:fe,className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)(w.A,{className:"w-5 h-5"})})]}),(0,v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return ce.promoterId||(e.promoterId="Please select a promoter"),(!ce.pins||ce.pins<=0)&&(e.pins="Please enter a valid number of pins"),me(e),0===Object.keys(e).length})()){H(!0);try{const e=L.find(e=>e.id===ce.promoterId)||ie;if(!e)throw new Error("Promoter not found");const t=parseInt(ce.pins);let a;if(a="add"===ce.action?await d.Ay.adminAllocatePins(e.id,t,s.id):await d.Ay.adminDeductPins(e.id,t,s.id),!a.success)throw new Error(a.error||"PIN transaction failed");he("\ud83c\udf89 Successfully ".concat("add"===ce.action?"allocated":"deducted"," ").concat(t," PIN").concat(t>1?"s":""," ").concat("add"===ce.action?"to":"from"," ").concat(e.name,"!\n\nNew balance: ").concat(a.balance_after," PINs"),"success"),fe(),await ye(),await ge()}catch(t){he("\u274c Failed to ".concat(ce.action," pins. Error: ").concat(t.message),"error")}finally{H(!1)}}},className:"space-y-4",children:[!ie&&(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Promoter *"}),(0,v.jsxs)("select",{value:ce.promoterId,onChange:e=>de((0,a.A)((0,a.A)({},ce),{},{promoterId:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(oe.promoterId?"border-red-500":"border-gray-600"),children:[(0,v.jsx)("option",{value:"",children:"Select promoter"}),L.map(e=>(0,v.jsxs)("option",{value:e.id,children:[e.name," (",e.promoter_id,") - ",e.pins||0," pins"]},e.id))]}),oe.promoterId&&(0,v.jsx)("p",{className:"text-red-400 text-sm mt-1",children:oe.promoterId})]}),ie&&(0,v.jsx)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-white font-medium",children:ie.name}),(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:ie.promoter_id})]}),(0,v.jsxs)("div",{className:"text-right",children:[(0,v.jsx)("p",{className:"text-gray-400 text-sm",children:"Current Pins"}),(0,v.jsx)("p",{className:"text-white font-bold text-lg",children:ie.pins||0})]})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Action *"}),(0,v.jsxs)("select",{value:ce.action,onChange:e=>de((0,a.A)((0,a.A)({},ce),{},{action:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,v.jsx)("option",{value:"add",children:"Add Pins"}),(0,v.jsx)("option",{value:"subtract",children:"Subtract Pins"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Number of Pins *"}),(0,v.jsx)("input",{type:"number",min:"1",value:ce.pins,onChange:e=>de((0,a.A)((0,a.A)({},ce),{},{pins:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(oe.pins?"border-red-500":"border-gray-600"),placeholder:"Enter number of pins"}),oe.pins&&(0,v.jsx)("p",{className:"text-red-400 text-sm mt-1",children:oe.pins})]}),(0,v.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,v.jsx)(l.Rq,{type:"button",variant:"secondary",onClick:fe,children:"Cancel"}),(0,v.jsx)(l.Rq,{type:"submit",disabled:W,className:"flex items-center space-x-2",children:W?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.A,{className:"w-4 h-4 bp-animate-spin"}),(0,v.jsx)("span",{children:"Processing..."})]}):(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("span",{children:["\ud83d\udccc ","add"===ce.action?"Add Pins":"Subtract Pins"]})})})]})]})]})})}),xe.show&&(0,v.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg shadow-lg border transition-all duration-300 ".concat("success"===xe.type?"bg-green-500/10 border-green-500/30 text-green-300":"bg-red-500/10 border-red-500/30 text-red-300"),children:(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat("success"===xe.type?"bg-green-500":"bg-red-500"),children:"success"===xe.type?(0,v.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,v.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsx)("p",{className:"text-sm font-medium whitespace-pre-line",children:xe.message})}),(0,v.jsx)("button",{onClick:()=>pe({show:!1,message:"",type:""}),className:"text-gray-400 hover:text-white transition-colors",children:(0,v.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})]})}}}]);
//# sourceMappingURL=884.cc627d80.chunk.js.map