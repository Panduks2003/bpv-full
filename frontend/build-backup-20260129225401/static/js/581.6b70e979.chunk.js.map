{"version":3,"file":"static/js/581.6b70e979.chunk.js","mappings":"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","sources":["components/UnifiedPromoterForm.js","admin/pages/AdminPromoters.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { supabase } from '../common/services/supabaseClient';\nimport { Loader, Eye, EyeOff, CheckCircle, AlertCircle, Info, X } from 'lucide-react';\nimport MobileValidationService from '../common/services/mobileValidationService';\n\n/**\n * UnifiedPromoterForm - A comprehensive, uniform promoter creation form\n * \n * Features:\n * - Auto-generated BPVP IDs (BPVP01, BPVP02, etc.)\n * - Optional email support with shared email capability\n * - Hierarchical parent promoter selection\n * - Real-time validation and error handling\n * - Clean, consistent UI following brand guidelines\n * - Role/Level selection with default 'Affiliate'\n * - Status toggle (Active/Inactive)\n * - Comprehensive form validation\n */\n\nconst UnifiedPromoterForm = React.memo(({\n  onSubmit,\n  onCancel,\n  loading = false,\n  editingPromoter = null,\n  availableParents = [],\n  adminUsers = []\n}) => {\n  // Form state\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    hasEmail: false, // Email is now optional (metadata only)\n    password: 'password123', // Auto-assigned default password\n    confirmPassword: 'password123', // Auto-assigned default password\n    mobile: '', // Mobile is now mandatory (single field)\n    address: '',\n    parentPromoter: ''\n  });\n\n  // Validation and UI state\n  const [formErrors, setFormErrors] = useState({});\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [mobileValidationState, setMobileValidationState] = useState({\n    isValidating: false,\n    isValid: false,\n    message: ''\n  });\n\n  // Role and status are now handled automatically by backend\n\n  // Populate form with editing promoter data\n  useEffect(() => {\n    if (editingPromoter) {\n      const promoterEmail = editingPromoter.email || '';\n      // Check if email is a real email (not a placeholder like noemail+uuid@brightplanetventures.local)\n      const hasRealEmail = promoterEmail &&\n        !promoterEmail.includes('noemail+') &&\n        !promoterEmail.includes('@brightplanetventures.local');\n\n      setFormData({\n        name: editingPromoter.name || '',\n        email: hasRealEmail ? promoterEmail : '',\n        hasEmail: hasRealEmail,\n        password: 'password123', // Keep default password for editing\n        confirmPassword: 'password123', // Keep default password for editing\n        mobile: editingPromoter.mobile || editingPromoter.phone || '',\n        address: editingPromoter.address || '',\n        parentPromoter: editingPromoter.parent_promoter_id || ''\n      });\n\n      // Set mobile validation as valid for existing promoters\n      setMobileValidationState({ isValidating: false, isValid: true, message: '' });\n\n      // Clear any form errors when editing\n      setFormErrors({});\n    }\n  }, [editingPromoter]);\n\n  // Combine and format parent promoter options\n  const parentPromoterOptions = useMemo(() => {\n    const adminOptions = (adminUsers || []).map(admin => ({\n      id: admin.id,\n      label: `ðŸ‘‘ ${admin.name} (Admin)`,\n      type: 'admin'\n    }));\n\n    const promoterOptions = (availableParents || []).map(promoter => ({\n      id: promoter.id || promoter._id,\n      label: promoter.isCurrentUser\n        ? `${promoter.promoter_id || 'CURRENT'} - ${promoter.name} (You)`\n        : `${promoter.promoter_id || 'N/A'} - ${promoter.name || 'Unknown'}`,\n      type: 'promoter'\n    }));\n\n    // Admin users first, then promoters\n    return [...adminOptions, ...promoterOptions];\n  }, [adminUsers, availableParents]);\n\n  // Real-time form validation with mobile number uniqueness check\n  const validateField = useCallback(async (field, value) => {\n    let errors = { ...formErrors };\n\n    switch (field) {\n      case 'name':\n        if (!value || !value.trim()) {\n          errors.name = 'Name is required';\n        } else if (value.trim().length < 2) {\n          errors.name = 'Name must be at least 2 characters';\n        } else if (!/^[a-zA-Z\\s]+$/.test(value.trim())) {\n          errors.name = 'Name must contain only letters and spaces';\n        }\n        break;\n\n      case 'email':\n        if (formData.hasEmail) {\n          if (!value || !value.trim()) {\n            errors.email = 'Email address is required';\n          } else {\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (!emailRegex.test(value.trim())) {\n              errors.email = 'Please enter a valid email address';\n            }\n          }\n        }\n        break;\n\n      case 'password':\n        if (!editingPromoter) { // Only validate password for new promoters\n          if (!value) {\n            errors.password = 'Password is required';\n          } else if (value.length < 8) {\n            errors.password = 'Password must be at least 8 characters';\n          } else if (!/(?=.*[a-zA-Z])(?=.*\\d)/.test(value)) {\n            errors.password = 'Password must contain both letters and numbers';\n          }\n        }\n        break;\n\n      case 'confirmPassword':\n        if (!editingPromoter && value !== formData.password) {\n          errors.confirmPassword = 'Passwords do not match';\n        }\n        break;\n\n      case 'mobile':\n        if (!value) {\n          errors.mobile = 'Mobile number is required';\n        } else {\n          // Client-side validation first\n          const clientValidation = MobileValidationService.validateMobileFormat(value);\n          if (!clientValidation.is_valid) {\n            errors.mobile = clientValidation.error;\n          } else {\n            // Server-side validation for uniqueness\n            try {\n              const serverValidation = await MobileValidationService.validateMobileNumber(\n                value,\n                editingPromoter?.id || null,\n                null,\n                'promoter' // Explicitly pass role to enforce uniqueness\n              );\n\n              if (!serverValidation.success || !serverValidation.is_valid) {\n                errors.mobile = serverValidation.error || 'Mobile number validation failed';\n              }\n            } catch (error) {\n              errors.mobile = 'Mobile number validation service unavailable';\n            }\n          }\n        }\n        break;\n\n      case 'parentPromoter':\n        if (!value && parentPromoterOptions.length > 0) {\n          errors.parentPromoter = 'Parent promoter selection is required';\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    setFormErrors(errors);\n    return errors;\n  }, [formData, formErrors, editingPromoter]);\n\n  // Handle input changes with real-time validation\n  const handleInputChange = useCallback((fieldName, value) => {\n    setFormData(prev => ({ ...prev, [fieldName]: value }));\n\n    // Real-time validation (for non-async fields)\n    const fieldErrors = validateField(fieldName, value);\n    setFormErrors(prev => ({ ...prev, ...fieldErrors }));\n\n    // Clear error if field is now valid\n    if (!fieldErrors[fieldName] && formErrors[fieldName]) {\n      setFormErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[fieldName];\n        return newErrors;\n      });\n    }\n  }, [validateField, formErrors]);\n\n  // Async mobile number validation with debouncing\n  const validateMobileNumber = useCallback(async (mobileNumber) => {\n    if (!mobileNumber) {\n      setFormErrors(prev => ({ ...prev, mobile: 'Mobile number is required' }));\n      setMobileValidationState({ isValidating: false, isValid: false, message: '' });\n      return;\n    }\n\n    // Skip validation for existing promoters when editing\n    if (editingPromoter) {\n      setMobileValidationState({ isValidating: false, isValid: true, message: '' });\n      // Properly remove mobile error by deleting the key\n      setFormErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors.mobile;\n        return newErrors;\n      });\n      return;\n    }\n\n    // Client-side validation first\n    const clientValidation = MobileValidationService.validateMobileFormat(mobileNumber);\n    if (!clientValidation.is_valid) {\n      setFormErrors(prev => ({ ...prev, mobile: clientValidation.error }));\n      setMobileValidationState({ isValidating: false, isValid: false, message: '' });\n      return;\n    }\n\n    // Set loading state\n    setMobileValidationState({ isValidating: true, isValid: false, message: 'Validating mobile number...' });\n    // Properly remove mobile error while validating\n    setFormErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors.mobile;\n      return newErrors;\n    });\n\n    // Server-side validation for uniqueness\n    try {\n      const serverValidation = await MobileValidationService.validateMobileNumber(\n        mobileNumber,\n        editingPromoter?.id || null,\n        null,\n        'promoter'\n      );\n\n      if (!serverValidation.success || !serverValidation.is_valid) {\n        const errorMessage = serverValidation.error || 'Mobile number validation failed';\n        setFormErrors(prev => ({ ...prev, mobile: errorMessage }));\n        setMobileValidationState({\n          isValidating: false,\n          isValid: false,\n          message: errorMessage\n        });\n      } else {\n        // Properly remove mobile error on success\n        setFormErrors(prev => {\n          const newErrors = { ...prev };\n          delete newErrors.mobile;\n          return newErrors;\n        });\n        setMobileValidationState({\n          isValidating: false,\n          isValid: true,\n          message: ''\n        });\n      }\n    } catch (error) {\n      const errorMessage = 'Mobile number validation service unavailable';\n      setFormErrors(prev => ({ ...prev, mobile: errorMessage }));\n      setMobileValidationState({\n        isValidating: false,\n        isValid: false,\n        message: errorMessage\n      });\n    }\n  }, [editingPromoter]);\n\n  // Debounced mobile validation\n  const debouncedMobileValidation = useCallback(\n    (value) => {\n      const timeoutId = setTimeout(() => {\n        validateMobileNumber(value);\n      }, 500);\n\n      return () => clearTimeout(timeoutId);\n    },\n    [validateMobileNumber]\n  );\n\n  // Comprehensive form validation\n  const validateForm = useCallback(() => {\n    const errors = {};\n\n    // Validate all fields\n    Object.keys(formData).forEach(fieldName => {\n      const fieldErrors = validateField(fieldName, formData[fieldName]);\n      Object.assign(errors, fieldErrors);\n    });\n\n    // Additional validations - promoter ID, role, and status are handled by backend\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  }, [formData, validateField, editingPromoter]);\n\n  // Parent promoter selection is now mandatory - no auto-selection\n\n  // Handle form submission\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    // Prepare submission data for new Promoter ID system\n    const submissionData = {\n      name: formData.name,\n      email: formData.hasEmail && formData.email ? formData.email : null,\n      password: formData.password,\n      mobile: formData.mobile, // Use mobile field instead of phone\n      address: formData.address || null,\n      parentPromoter: formData.parentPromoter || null,\n      // Note: Promoter ID will be auto-generated by the backend\n      useNewSystem: true // Flag to indicate using new Promoter ID system\n    };\n\n    await onSubmit(submissionData);\n  }, [formData, validateForm, onSubmit]);\n\n  return (\n    <div className=\"bg-gray-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between border-b border-gray-700 pb-4 mb-6\">\n        <div>\n          <h3 className=\"text-xl font-semibold text-white\">\n            {editingPromoter ? 'Edit Promoter' : 'Create New Promoter'}\n          </h3>\n          {editingPromoter && (\n            <p className=\"text-gray-400 text-sm mt-1\">\n              Update promoter information and hierarchy\n            </p>\n          )}\n        </div>\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"text-gray-400 hover:text-white transition-colors\"\n          disabled={loading}\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-5\">\n        {/* Promoter ID will be auto-generated after creation - no field shown */}\n\n        {/* Name */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Full Name\n            <span className=\"text-orange-400 ml-1\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            value={formData.name}\n            onChange={(e) => handleInputChange('name', e.target.value)}\n            className={`w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ${formErrors.name ? 'border-red-500' : 'border-gray-600'\n              }`}\n            placeholder=\"Enter full name (letters and spaces only)\"\n          />\n          {formErrors.name && (\n            <p className=\"text-red-400 text-sm mt-1\">{formErrors.name}</p>\n          )}\n        </div>\n\n        {/* Email Field - Now Optional */}\n        <div className=\"mb-4\">\n          <div className=\"flex items-center mb-2\">\n            <input\n              type=\"checkbox\"\n              id=\"hasEmail\"\n              checked={formData.hasEmail}\n              onChange={(e) => {\n                const hasEmail = e.target.checked;\n                setFormData(prev => ({\n                  ...prev,\n                  hasEmail,\n                  email: hasEmail ? prev.email : ''\n                }));\n                if (!hasEmail) {\n                  setFormErrors(prev => {\n                    const newErrors = { ...prev };\n                    delete newErrors.email;\n                    return newErrors;\n                  });\n                }\n              }}\n              className=\"mr-2 h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-600 rounded bg-gray-700\"\n            />\n            <label htmlFor=\"hasEmail\" className=\"text-sm font-medium text-gray-300\">\n              Add Email Address\n            </label>\n          </div>\n\n          {formData.hasEmail && (\n            <>\n              <input\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => handleInputChange('email', e.target.value)}\n                className={`w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ${formErrors.email ? 'border-red-500' : 'border-gray-600'\n                  }`}\n                placeholder=\"Enter email address (can be shared with others)\"\n              />\n              {formErrors.email && (\n                <p className=\"text-red-400 text-sm mt-1\">{formErrors.email}</p>\n              )}\n            </>\n          )}\n\n        </div>\n\n\n        {/* Mobile Number */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Mobile Number\n            <span className=\"text-orange-400 ml-1\">*</span>\n          </label>\n          <p className=\"text-xs text-gray-400 mb-2\">\n            Mobile number is mandatory and must be unique. SMS will be sent to this number.\n          </p>\n          <div className=\"relative\">\n            <input\n              type=\"tel\"\n              value={formData.mobile}\n              onChange={(e) => {\n                const value = e.target.value.replace(/\\D/g, '').slice(0, 10);\n                setFormData(prev => ({ ...prev, mobile: value }));\n\n                // Clear validation state when typing\n                setMobileValidationState({ isValidating: false, isValid: false, message: '' });\n                // Properly remove mobile error key\n                setFormErrors(prev => {\n                  const newErrors = { ...prev };\n                  delete newErrors.mobile;\n                  return newErrors;\n                });\n\n                // Trigger validation when 10 digits are entered\n                if (value.length === 10) {\n                  // Use debounced validation\n                  const timeoutId = setTimeout(() => {\n                    validateMobileNumber(value);\n                  }, 500);\n\n                  // Clear previous timeout\n                  return () => clearTimeout(timeoutId);\n                }\n              }}\n              className={`w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 pr-12 ${formErrors.mobile ? 'border-red-500' :\n                mobileValidationState.isValid ? 'border-green-500' :\n                  mobileValidationState.isValidating ? 'border-blue-500' : 'border-gray-600'\n                }`}\n              placeholder=\"Enter 10-digit mobile number\"\n              maxLength={10}\n            />\n\n            {/* Validation status icons */}\n            <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n              {mobileValidationState.isValidating && (\n                <Loader className=\"w-5 h-5 text-blue-400 animate-spin\" />\n              )}\n              {mobileValidationState.isValid && (\n                <CheckCircle className=\"w-5 h-5 text-green-400\" />\n              )}\n              {formErrors.mobile && (\n                <AlertCircle className=\"w-5 h-5 text-red-400\" />\n              )}\n            </div>\n          </div>\n\n          {/* Real-time validation messages */}\n          {formErrors.mobile && (\n            <div className=\"mt-2 p-2 bg-red-900 border border-red-700 rounded-lg\">\n              <p className=\"text-red-400 text-sm flex items-center\">\n                <AlertCircle className=\"w-4 h-4 mr-2\" />\n                {formErrors.mobile}\n              </p>\n            </div>\n          )}\n\n          {/* Loading state during validation */}\n          {mobileValidationState.isValidating && (\n            <div className=\"mt-2 p-2 bg-blue-900 border border-blue-700 rounded-lg\">\n              <p className=\"text-blue-400 text-sm flex items-center\">\n                <Loader className=\"w-4 h-4 mr-2 animate-spin\" />\n                {mobileValidationState.message}\n              </p>\n            </div>\n          )}\n\n        </div>\n\n        {/* Address */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Address\n            <span className=\"text-gray-500 text-xs ml-2\">(Optional)</span>\n          </label>\n          <textarea\n            value={formData.address}\n            onChange={(e) => handleInputChange('address', e.target.value)}\n            className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500\"\n            placeholder=\"Enter full postal address (optional)\"\n            rows={3}\n          />\n        </div>\n\n        {/* Parent Promoter */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Parent Promoter\n            <span className=\"text-orange-400 ml-1\">*</span>\n          </label>\n          <p className=\"text-xs text-gray-400 mb-2\">\n            Parent promoter is mandatory for hierarchy management.\n          </p>\n          <select\n            value={formData.parentPromoter}\n            onChange={(e) => handleInputChange('parentPromoter', e.target.value)}\n            disabled={parentPromoterOptions.length === 1 || editingPromoter}\n            className={`w-full px-4 py-3 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 ${formErrors.parentPromoter ? 'border-red-500' : 'border-gray-600'\n              } ${(parentPromoterOptions.length === 1 || editingPromoter) ? 'opacity-75 cursor-not-allowed' : ''}`}\n          >\n            <option value=\"\" disabled>Select parent promoter *</option>\n            {parentPromoterOptions.map((option) => (\n              <option key={option.id} value={option.id}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {formErrors.parentPromoter && (\n            <p className=\"text-red-400 text-sm mt-1\">{formErrors.parentPromoter}</p>\n          )}\n        </div>\n\n        {/* Role and Status are automatically set by the backend */}\n\n        {/* Form Actions */}\n        <div className=\"flex justify-end space-x-4 pt-6 border-t border-gray-700\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-6 py-3 text-gray-300 hover:text-white transition-colors\"\n            disabled={loading}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading || Object.keys(formErrors).length > 0 || (!editingPromoter && (!formData.mobile || formData.mobile.length !== 10 || !formData.parentPromoter || mobileValidationState.isValidating || (formData.mobile.length === 10 && !mobileValidationState.isValid)))}\n            className=\"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n          >\n            {loading ? (\n              <>\n                <Loader className=\"w-4 h-4 animate-spin\" />\n                <span>{editingPromoter ? 'Updating...' : 'Creating...'}</span>\n              </>\n            ) : (\n              <>\n                <CheckCircle className=\"w-4 h-4\" />\n                <span>{editingPromoter ? 'Update Promoter' : 'Create Promoter'}</span>\n              </>\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n});\n\nUnifiedPromoterForm.displayName = 'UnifiedPromoterForm';\n\nexport default UnifiedPromoterForm;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useAuth } from \"../../common/context/AuthContext\";\n// import AdminNavbar removed - handled by ConditionalNavbar in App.js\nimport UnifiedPromoterForm from '../../components/UnifiedPromoterForm';\nimport SuccessModal from '../../common/components/SuccessModal';\nimport {\n  UnifiedBackground,\n  UnifiedCard,\n  UnifiedButton,\n  useScrollAnimation,\n  SharedStyles\n} from \"../../common/components/SharedTheme\";\nimport { supabase } from \"../../common/services/supabaseClient\"\nimport { Search, Plus, Edit, Trash2, Users, Mail, Phone, Shield, X, Loader, Download, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { SkeletonTable } from '../components/skeletons';\nimport { useToast } from '../services/toastService';\nimport * as exportUtils from '../../common/utils/exportUtils';\n\nfunction AdminPromoters() {\n  const { user } = useAuth();\n  const { showSuccess, showError, showWarning, handleApiError } = useToast();\n  useScrollAnimation();\n\n  // State management\n  const [promoters, setPromoters] = useState([]);\n  const [filteredPromoters, setFilteredPromoters] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [sortBy, setSortBy] = useState('created_at'); // 'created_at' or 'customer_id'\n  const [showDownloadMenu, setShowDownloadMenu] = useState(false);\n  const downloadButtonRef = useRef(null);\n  const [downloadMenuPosition, setDownloadMenuPosition] = useState({ top: 0, right: 0 });\n  const [showModal, setShowModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [editingPromoter, setEditingPromoter] = useState(null);\n  const [deletingPromoter, setDeletingPromoter] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [successData, setSuccessData] = useState(null);\n  const [showPinModal, setShowPinModal] = useState(false);\n  const [selectedPromoterForPins, setSelectedPromoterForPins] = useState(null);\n  const [pinAllocation, setPinAllocation] = useState({ amount: '', notes: '' });\n  const [adminUsers] = useState([]);\n\n  // Pagination states\n  const [currentPage, setCurrentPage] = useState(1);\n  const [entriesPerPage, setEntriesPerPage] = useState(10);\n\n  // Ultra-optimized promoters loading for instant display\n  const loadPromoters = async () => {\n    try {\n      setLoading(true);\n\n      // Load all necessary data for instant display - include fields needed for Contact Details and Parent Promoter columns\n      const { data, error } = await supabase\n        .from('profiles')\n        .select(`\n          id,\n          name,\n          email,\n          mobile,\n          phone,\n          promoter_id,\n          parent_promoter_id,\n          status,\n          address,\n          created_at\n        `)\n        .eq('role', 'promoter')\n        .order('created_at', { ascending: false })\n        .limit(100); // Load more records since we have all fields\n\n      if (error) {\n        throw error;\n      }\n\n      setPromoters(data || []);\n      setLoading(false); // Stop loading immediately after initial data\n\n      console.log('Promoter data loaded with all fields:', {\n        count: data?.length || 0,\n        sample: data?.slice(0, 2),\n        loadingStopped: true\n      });\n\n      // Load remaining data in background without showing loading state\n      setTimeout(async () => {\n        try {\n          const { data: moreData } = await supabase\n            .from('profiles')\n            .select(`\n              id,\n              name,\n              email,\n              mobile,\n              phone,\n              promoter_id,\n              parent_promoter_id,\n              status,\n              address,\n              created_at,\n              updated_at\n            `)\n            .eq('role', 'promoter')\n            .order('created_at', { ascending: false })\n            .limit(1000);\n\n          if (moreData) {\n            setPromoters(moreData);\n          }\n        } catch (error) {\n          console.error('Error loading more promoter data:', error);\n        }\n      }, 300);\n\n    } catch (error) {\n      setPromoters([]);\n      setLoading(false);\n    }\n  };\n\n  // Load promoters on component mount - optimized for performance\n  useEffect(() => {\n    loadPromoters();\n  }, []);\n\n  // Filter and search logic\n  useEffect(() => {\n    let filtered = promoters || [];\n\n    // Search filter\n    if (searchTerm) {\n      filtered = filtered.filter(promoter => {\n        const name = (promoter?.name || '').toLowerCase();\n        const email = (promoter?.email || '').toLowerCase();\n        const promoterId = (promoter?.promoter_id || '').toLowerCase();\n        const phone = (promoter?.phone || '').toLowerCase();\n        const searchLower = (searchTerm || '').toLowerCase();\n        return name.includes(searchLower) ||\n          email.includes(searchLower) ||\n          promoterId.includes(searchLower) ||\n          phone.includes(searchLower);\n      });\n    }\n\n    // Status filter\n    if (statusFilter) {\n      filtered = filtered.filter(promoter => {\n        const promoterStatus = (promoter?.status || 'active').toLowerCase();\n        return promoterStatus === statusFilter.toLowerCase();\n      });\n    }\n\n    setFilteredPromoters(filtered);\n    setCurrentPage(1); // Reset to first page when filters change\n  }, [promoters, searchTerm, statusFilter]);\n\n\n  // Form validation is now handled by UnifiedPromoterForm\n\n  // Modal handlers\n  const openCreateModal = () => {\n    setEditingPromoter(null);\n    setShowModal(true);\n  };\n\n  const openEditModal = (promoter) => {\n    setEditingPromoter(promoter);\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n    setEditingPromoter(null);\n  };\n\n  const openDeleteModal = (promoter) => {\n    setDeletingPromoter(promoter);\n    setShowDeleteModal(true);\n  };\n\n  const closeDeleteModal = () => {\n    setShowDeleteModal(false);\n    setDeletingPromoter(null);\n  };\n\n  // Toggle promoter status\n  const togglePromoterStatus = async (promoter) => {\n    try {\n      const currentStatus = promoter.status?.toLowerCase();\n      const newStatus = currentStatus === 'active' ? 'Inactive' : 'Active';\n\n      // Update status in profiles table (where the main status is stored)\n      const { error } = await supabase\n        .from('profiles')\n        .update({ status: newStatus })\n        .eq('id', promoter.id);\n\n      if (error) {\n        throw error;\n      }\n\n\n      // Reload promoters to reflect changes\n      await loadPromoters();\n      showSuccess(`Promoter status updated from ${currentStatus} to ${newStatus}`);\n    } catch (error) {\n      handleApiError(error, 'Failed to update promoter status');\n    }\n  };\n\n  // Handle form submission from UnifiedPromoterForm\n  const handleFormSubmit = async (formData) => {\n    setSubmitting(true);\n\n    // Store current admin session to prevent interference\n    const currentSession = await supabase.auth.getSession();\n    const currentUser = currentSession.data.session?.user;\n\n    try {\n      if (editingPromoter) {\n        // Update existing promoter (excluding parent promoter to preserve hierarchy)\n        console.log('Updating promoter with data:', {\n          promoter_id: editingPromoter.promoter_id,\n          name: formData.name,\n          email: formData.email,\n          mobile: formData.mobile,\n          address: formData.address,\n          status: formData.status\n        });\n\n        const { data, error } = await supabase.rpc('update_promoter_profile', {\n          p_promoter_id: editingPromoter.promoter_id,\n          p_name: formData.name,\n          p_email: formData.email,\n          p_phone: formData.mobile,\n          p_address: formData.address,\n          p_status: formData.status,\n          p_parent_promoter_id: editingPromoter.parent_promoter_id // Keep original parent promoter\n        });\n\n        if (error) throw error;\n\n        // Fallback: Ensure mobile/phone are synced directly even if RPC is not updated\n        await supabase\n          .from('profiles')\n          .update({\n            mobile: formData.mobile,\n            phone: formData.mobile,\n            updated_at: new Date().toISOString()\n          })\n          .eq('id', editingPromoter.id);\n\n        if (!data.success) {\n          throw new Error(data.error || 'Failed to update promoter');\n        }\n\n        showSuccess('Promoter updated successfully');\n      } else {\n        // Create new promoter using admin.createUser to avoid auth context interference\n\n        // Validate required fields\n        if (!formData.name || formData.name.trim() === '') {\n          throw new Error('Name is required for promoter creation.');\n        }\n\n        if (!formData.password || formData.password.trim() === '') {\n          throw new Error('Password is required for promoter creation.');\n        }\n\n        if (!formData.mobile || formData.mobile.trim() === '') {\n          throw new Error('Mobile number is required for promoter creation.');\n        }\n\n        // Step 1: Email is optional - only use if provided by user\n        const userProvidedEmail = formData.hasEmail && formData.email ? formData.email : null;\n\n\n        // Step 2: Create auth user via backend service to avoid frontend auth state changes\n        let authData, authError;\n\n        try {\n          // Try to create user via backend service first (if available)\n          const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n          const backendResponse = await fetch(`${API_URL}/create-promoter-auth`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              email: userProvidedEmail,\n              password: formData.password,\n              userData: {\n                role: 'promoter',\n                name: formData.name,\n                mobile: formData.mobile,\n                address: formData.address,\n                parent_promoter_id: formData.parentPromoter\n              }\n            })\n          });\n\n          if (backendResponse.ok) {\n            const result = await backendResponse.json();\n            authData = result; // Direct result from backend\n          } else {\n            const errorResult = await backendResponse.json();\n            throw new Error(errorResult.error || 'Backend service not available');\n          }\n\n        } catch (backendError) {\n          console.error('Backend service error:', backendError);\n          throw new Error('Failed to create promoter: ' + backendError.message);\n        }\n\n        if (!authData || !authData.success) {\n          throw new Error('Failed to create promoter: ' + (authData?.error || 'Unknown error'));\n        }\n\n        // Show clean, centered success modal\n        setSuccessData({\n          title: 'Success!',\n          message: 'Promoter created successfully and is ready to use.',\n          details: `Promoter ID: ${authData.promoterId}\\nName: ${formData.name}\\nLogin: Use Promoter ID + Password`\n        });\n        setShowSuccessModal(true);\n      }\n\n      // Reload promoters with cache busting\n      await loadPromoters();\n      // Force a second refresh after a short delay to ensure data is updated\n      setTimeout(() => {\n        loadPromoters();\n      }, 500);\n      closeModal();\n    } catch (error) {\n      handleApiError(error, 'Failed to save promoter');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (deletingPromoter) {\n      try {\n        const { error } = await supabase\n          .from('profiles')\n          .delete()\n          .eq('id', deletingPromoter.id);\n        if (error) throw error;\n        await loadPromoters();\n        closeDeleteModal();\n      } catch (error) {\n        handleApiError(error, 'Failed to delete promoter');\n      }\n    }\n  };\n\n  // Pin allocation functions\n  const openPinModal = (promoter) => {\n    setSelectedPromoterForPins(promoter);\n    setPinAllocation({ amount: '', notes: '' });\n    setShowPinModal(true);\n  };\n\n  const closePinModal = () => {\n    setShowPinModal(false);\n    setSelectedPromoterForPins(null);\n    setPinAllocation({ amount: '', notes: '' });\n  };\n\n  const handlePinAllocation = async () => {\n    if (!selectedPromoterForPins || !pinAllocation.amount) {\n      showWarning('Please enter a valid pin amount');\n      return;\n    }\n\n    const amount = parseInt(pinAllocation.amount);\n    if (amount <= 0) {\n      showWarning('Pin amount must be greater than 0');\n      return;\n    }\n\n    try {\n      setSubmitting(true);\n\n      // Call the database function to add pins\n      const { data: result, error } = await supabase.rpc('add_promoter_pins', {\n        p_promoter_id: selectedPromoterForPins.id,\n        p_pins_to_add: amount\n      });\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      // Log the pin allocation\n      await supabase.from('pin_usage_log').insert({\n        promoter_id: selectedPromoterForPins.id,\n        pins_used: -amount, // Negative for allocation (positive for usage)\n        action_type: 'admin_allocation',\n        notes: pinAllocation.notes || `Admin allocated ${amount} pins`\n      });\n\n      showSuccess(`${amount} pins allocated to ${selectedPromoterForPins.name} successfully`);\n\n      // Reload promoters to show updated pin counts\n      await loadPromoters();\n      closePinModal();\n\n    } catch (error) {\n      handleApiError(error, 'Failed to allocate pins');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Get parent promoter info for display (ID + Name)\n  const getParentPromoterInfo = (promoter) => {\n    const parentId = promoter?.parent_promoter_id;\n    if (!parentId) return null;\n\n    // Check if parent is an admin user first\n    const parentAdmin = (adminUsers || []).find(admin => admin.id === parentId);\n    if (parentAdmin) {\n      return {\n        name: parentAdmin.name || 'Admin',\n        id: 'Admin',\n        isAdmin: true\n      };\n    }\n\n    // Check if parent is a promoter\n    const parentPromoter = (promoters || []).find(p =>\n      p?.id === parentId\n    );\n\n    if (parentPromoter) {\n      return {\n        name: parentPromoter.name || 'Unknown',\n        id: parentPromoter.promoter_id || 'N/A',\n        isAdmin: false\n      };\n    }\n\n    return {\n      name: 'Unknown Parent',\n      id: 'N/A',\n      isAdmin: false\n    };\n  };\n\n  // Get available parent promoters (excluding admin users since they're passed separately)\n  const getAvailableParents = () => {\n    const allPromoters = promoters || [];\n\n    // Return only promoters (admin users are handled separately in UnifiedPromoterForm)\n    const allAvailableParents = [...allPromoters];\n\n    if (!editingPromoter) return allAvailableParents;\n\n    const getDescendants = (promoterId, allPromoters) => {\n      const descendants = [];\n      const children = allPromoters.filter(p =>\n        p?.parent_promoter_id === promoterId\n      );\n      children.forEach(child => {\n        const childId = child?.id;\n        if (childId) {\n          descendants.push(childId);\n          descendants.push(...getDescendants(childId, allPromoters));\n        }\n      });\n      return descendants;\n    };\n\n    const currentId = editingPromoter?.id;\n    if (!currentId) return allAvailableParents;\n\n    const excludeIds = [currentId, ...getDescendants(currentId, allPromoters)];\n    return allAvailableParents.filter(p => {\n      const parentId = p?.id;\n      // Admin users are never excluded (they can always be parent promoters)\n      return parentId && (p?.isAdmin || !excludeIds.includes(parentId));\n    });\n  };\n\n  // Handle download - PDF\n  const handleDownloadPDF = async () => {\n    try {\n      // Enrich promoters with parent promoter names\n      const enrichedPromoters = filteredPromoters.map(promoter => {\n        const parentInfo = getParentPromoterInfo(promoter);\n        return {\n          ...promoter,\n          parent_promoter_name: parentInfo?.name || 'N/A'\n        };\n      });\n      await exportUtils.exportPromotersToPDF(enrichedPromoters, 'promoters');\n      setShowDownloadMenu(false);\n    } catch (error) {\n      showError('Failed to export PDF: ' + error.message);\n    }\n  };\n\n  // Handle download - CSV\n  const handleDownloadCSV = () => {\n    try {\n      // Enrich promoters with parent promoter names\n      const enrichedPromoters = filteredPromoters.map(promoter => {\n        const parentInfo = getParentPromoterInfo(promoter);\n        return {\n          ...promoter,\n          parent_promoter_name: parentInfo?.name || 'N/A'\n        };\n      });\n      exportUtils.exportPromotersToCSV(enrichedPromoters, 'promoters');\n      setShowDownloadMenu(false);\n    } catch (error) {\n      showError('Failed to export CSV: ' + error.message);\n    }\n  };\n\n\n  return (\n    <>\n      <SharedStyles />\n      {/* AdminNavbar removed - handled by ConditionalNavbar in App.js */}\n      <UnifiedBackground>\n        <div className=\"min-h-screen pt-40 px-8 pb-8\">\n          <div className=\"max-w-7xl mx-auto\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center mb-8\" data-animate>\n              <div>\n                <h1 className=\"text-2xl font-bold text-white mb-2\">\n                  Promoter Management\n                </h1>\n                <p className=\"text-gray-400\">\n                  Manage promoters, hierarchies, and performance\n                </p>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <UnifiedButton onClick={openCreateModal} className=\"flex items-center space-x-2 px-3 py-2 text-sm\">\n                  <Plus className=\"w-4 h-4\" />\n                  <span>Create Promoter</span>\n                </UnifiedButton>\n\n                {/* Download Button */}\n                <div className=\"relative\" ref={downloadButtonRef}>\n                  <UnifiedButton\n                    onClick={() => {\n                      if (downloadButtonRef.current) {\n                        const rect = downloadButtonRef.current.getBoundingClientRect();\n                        setDownloadMenuPosition({\n                          top: rect.bottom + 8,\n                          right: window.innerWidth - rect.right\n                        });\n                      }\n                      setShowDownloadMenu(!showDownloadMenu);\n                    }}\n                    className=\"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-500 border border-blue-500\"\n                  >\n                    <Download className=\"w-4 h-4\" />\n                    <span>Export</span>\n                  </UnifiedButton>\n\n                  {showDownloadMenu && createPortal(\n                    <>\n                      <div\n                        className=\"fixed inset-0 z-[9998]\"\n                        onClick={() => setShowDownloadMenu(false)}\n                      />\n                      <div\n                        className=\"fixed w-48 bg-gray-800 border-2 border-gray-600 rounded-lg shadow-2xl z-[9999]\"\n                        style={{\n                          top: `${downloadMenuPosition.top}px`,\n                          right: `${downloadMenuPosition.right}px`,\n                          minWidth: '12rem'\n                        }}\n                      >\n                        <button\n                          onClick={handleDownloadPDF}\n                          className=\"w-full text-left px-4 py-3 text-white hover:bg-gray-700 rounded-t-lg flex items-center space-x-2 transition-colors\"\n                        >\n                          <span>ðŸ“„ PDF</span>\n                        </button>\n                        <button\n                          onClick={handleDownloadCSV}\n                          className=\"w-full text-left px-4 py-3 text-white hover:bg-gray-700 rounded-b-lg flex items-center space-x-2 transition-colors\"\n                        >\n                          <span>ðŸ“Š CSV</span>\n                        </button>\n                      </div>\n                    </>,\n                    document.body\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Search and Filters */}\n            <UnifiedCard className=\"mb-6\" data-animate style={{ overflow: 'visible' }}>\n              {/* Single Row Layout - All elements in one line */}\n              <div className=\"flex flex-wrap items-center gap-3\">\n                {/* Search Input - Takes more space */}\n                <div className=\"flex-1 min-w-[300px]\">\n                  <div className=\"relative\">\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search by name, email, ID, or phone...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"w-full h-10 px-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-sm\"\n                    />\n                    {/* Search Icon */}\n                    <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                      <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                      </svg>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Status Filter */}\n                <div className=\"relative\">\n                  <select\n                    value={statusFilter}\n                    onChange={(e) => setStatusFilter(e.target.value)}\n                    className=\"appearance-none h-10 bg-gray-700 border border-gray-600 rounded-lg text-white px-3 pr-8 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all cursor-pointer hover:bg-gray-650 text-sm\"\n                  >\n                    <option value=\"\">All Status</option>\n                    <option value=\"active\">Active</option>\n                    <option value=\"inactive\">Inactive</option>\n                  </select>\n                  {/* Custom Dropdown Arrow */}\n                  <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                    <svg className=\"w-3 h-3 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                    </svg>\n                  </div>\n                </div>\n\n                {/* Sort Buttons */}\n                <div className=\"flex items-center gap-1 h-10 px-3 bg-gray-700/30 rounded-lg border border-gray-600/50\">\n                  <button\n                    onClick={() => setSortBy('created_at')}\n                    className={`px-2 py-2 text-sm rounded-md transition-all font-medium whitespace-nowrap ${sortBy === 'created_at'\n                      ? 'bg-orange-500 text-white shadow-md'\n                      : 'text-gray-300 bg-gray-700/50 hover:bg-gray-600/50 hover:text-white'\n                      }`}\n                    title=\"Sort by Newest\"\n                  >\n                    Newest\n                  </button>\n                  <button\n                    onClick={() => setSortBy('customer_id')}\n                    className={`px-2 py-2 text-sm rounded-md transition-all font-medium whitespace-nowrap ${sortBy === 'customer_id'\n                      ? 'bg-orange-500 text-white shadow-md'\n                      : 'text-gray-300 bg-gray-700/50 hover:bg-gray-600/50 hover:text-white'\n                      }`}\n                    title=\"Sort by Customer ID\"\n                  >\n                    By ID\n                  </button>\n                </div>\n\n                {/* Pagination Controls */}\n                <div className=\"flex items-center gap-2 h-10 px-3 bg-gray-700/30 rounded-lg border border-gray-600/50\">\n                  <span className=\"text-gray-300 text-xs font-medium whitespace-nowrap\">Show</span>\n                  <div className=\"relative\">\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"100\"\n                      value={entriesPerPage}\n                      onChange={(e) => {\n                        const value = Math.min(100, Math.max(1, parseInt(e.target.value) || 10));\n                        setEntriesPerPage(value);\n                        setCurrentPage(1);\n                      }}\n                      className=\"w-12 h-6 bg-gray-600 border border-gray-500 rounded text-white text-xs pl-2 pr-1 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 hover:bg-gray-500 transition-all text-center\"\n                      placeholder=\"10\"\n                    />\n                  </div>\n                  <span className=\"text-gray-300 text-xs font-medium whitespace-nowrap\">per page</span>\n                </div>\n\n                {/* Status Badge - Now in the same line with consistent styling */}\n                {filteredPromoters.length > 0 && (\n                  <div className=\"flex items-center gap-2 h-10 px-3 bg-gray-700/30 rounded-lg border border-gray-600/50\">\n                    <div className=\"w-2 h-2 bg-orange-400 rounded-full animate-pulse\"></div>\n                    <span className=\"text-gray-300 text-sm font-medium\">\n                      Showing <span className=\"text-orange-300 font-bold\">{((currentPage - 1) * entriesPerPage) + 1}</span> to <span className=\"text-orange-300 font-bold\">{Math.min(currentPage * entriesPerPage, filteredPromoters.length)}</span> of <span className=\"text-orange-300 font-bold\">{filteredPromoters.length}</span> promoters\n                    </span>\n                  </div>\n                )}\n              </div>\n            </UnifiedCard>\n\n            {/* Promoters Table */}\n            <UnifiedCard className=\"overflow-hidden\" data-animate>\n              {loading ? (\n                <SkeletonTable rows={8} columns={6} />\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-700\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Promoter Details</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Contact Details</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Parent Promoter</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Status</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Pins</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-gray-800 divide-y divide-gray-700\">\n                      {filteredPromoters.length === 0 ? (\n                        <tr>\n                          <td colSpan=\"6\" className=\"px-6 py-12 text-center text-gray-400\">\n                            No promoters found\n                          </td>\n                        </tr>\n                      ) : (\n                        (() => {\n                          // Calculate pagination for promoters\n                          const indexOfLastPromoter = currentPage * entriesPerPage;\n                          const indexOfFirstPromoter = indexOfLastPromoter - entriesPerPage;\n                          const currentPromoters = filteredPromoters.slice(indexOfFirstPromoter, indexOfLastPromoter);\n\n                          return currentPromoters.map((promoter) => {\n                            const promoterId = promoter?.id;\n                            const promoterName = promoter?.name || 'Unknown';\n                            const promoterEmail = promoter?.email || 'N/A';\n                            const promoterPhone = promoter?.phone || promoter?.mobile || 'N/A';\n                            const systemPromoterID = promoter?.promoter_id || 'N/A';\n                            const status = (promoter?.status || 'Active').toLowerCase();\n\n                            return (\n                              <tr key={promoterId} className=\"hover:bg-gray-700\">\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                  <div className=\"flex items-center\">\n                                    <div className=\"w-8 h-8 bg-gradient-to-r from-orange-400 to-yellow-500 rounded-full flex items-center justify-center mr-3\">\n                                      <Users className=\"w-4 h-4 text-white\" />\n                                    </div>\n                                    <div className=\"flex flex-col\">\n                                      <span className=\"text-white font-medium\">{promoterName}</span>\n                                      <span className=\"text-xs text-gray-400\">{systemPromoterID}</span>\n                                    </div>\n                                  </div>\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                                  <div className=\"space-y-1\">\n                                    <div className=\"flex items-center\">\n                                      <Mail className=\"w-3 h-3 mr-2 text-gray-400\" />\n                                      {promoterEmail === 'N/A' ? 'No email' : promoterEmail}\n                                    </div>\n                                    <div className=\"flex items-center\">\n                                      <Phone className=\"w-3 h-3 mr-2 text-gray-400\" />\n                                      {promoterPhone || 'No mobile'}\n                                    </div>\n                                  </div>\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                                  {(() => {\n                                    const parentInfo = getParentPromoterInfo(promoter);\n                                    if (!parentInfo) return '-';\n\n                                    return (\n                                      <div className=\"flex items-center\">\n                                        {parentInfo.isAdmin ? (\n                                          <>\n                                            <span className=\"text-yellow-400 mr-2\">ðŸ‘‘</span>\n                                            <span className=\"text-white font-medium\">{parentInfo.name}</span>\n                                          </>\n                                        ) : (\n                                          <>\n                                            <Users className=\"w-4 h-4 mr-2 text-blue-400\" />\n                                            <div className=\"flex flex-col\">\n                                              <span className=\"text-white font-medium\">{parentInfo.name}</span>\n                                              <span className=\"text-xs text-gray-400\">{parentInfo.id}</span>\n                                            </div>\n                                          </>\n                                        )}\n                                      </div>\n                                    );\n                                  })()}\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\n                                  <button\n                                    onClick={() => togglePromoterStatus(promoter)}\n                                    className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize border transition-all hover:opacity-80 ${(status || 'active').toLowerCase() === 'active'\n                                      ? 'bg-green-500/10 text-green-400 border-green-500/20'\n                                      : 'bg-red-500/10 text-red-400 border-red-500/20'\n                                      }`}\n                                    title=\"Click to toggle status\"\n                                  >\n                                    <div className={`w-1.5 h-1.5 rounded-full mr-2 ${(status || 'active').toLowerCase() === 'active' ? 'bg-green-400' : 'bg-red-400'\n                                      }`} />\n                                    {status}\n                                  </button>\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-300\">\n                                  <span className=\"text-sm font-medium text-white\">ðŸ“Œ {promoter?.pins || 0}</span>\n                                </td>\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                  <div className=\"flex space-x-2\">\n                                    <button\n                                      onClick={() => openEditModal(promoter)}\n                                      className=\"text-orange-400 hover:text-orange-300 transition-colors\"\n                                    >\n                                      <Edit className=\"w-4 h-4\" />\n                                    </button>\n                                    <button\n                                      onClick={() => openDeleteModal(promoter)}\n                                      className=\"text-red-400 hover:text-red-300 transition-colors\"\n                                    >\n                                      <Trash2 className=\"w-4 h-4\" />\n                                    </button>\n                                  </div>\n                                </td>\n                              </tr>\n                            );\n                          })\n                        })()\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n\n              {/* Bottom Pagination Controls */}\n              {filteredPromoters.length > 0 && (\n                <div className=\"px-6 py-4 border-t border-gray-700/50 bg-gray-800/30\">\n                  <div className=\"flex flex-col sm:flex-row justify-between items-center gap-4\">\n                    <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-700/50 rounded-lg border border-gray-600/50\">\n                      <div className=\"w-2 h-2 bg-orange-400 rounded-full animate-pulse\"></div>\n                      <span className=\"text-gray-300 text-sm font-medium\">\n                        Page <span className=\"text-orange-400 font-bold\">{currentPage}</span> of <span className=\"text-orange-400 font-bold\">{Math.ceil(filteredPromoters.length / entriesPerPage)}</span>\n                      </span>\n                    </div>\n\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                        disabled={currentPage === 1}\n                        className={`group relative p-2.5 rounded-lg transition-all duration-200 ${currentPage === 1\n                          ? 'bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30'\n                          : 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10'\n                          }`}\n                        title=\"Previous Page\"\n                      >\n                        <ChevronLeft className=\"w-4 h-4\" />\n                        <span className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">Previous</span>\n                      </button>\n\n                      <div className=\"flex items-center gap-1 px-2 py-1 bg-gray-700/30 rounded-lg border border-gray-600/30\">\n                        {Array.from({ length: Math.min(5, Math.ceil(filteredPromoters.length / entriesPerPage)) }, (_, i) => {\n                          const totalPages = Math.ceil(filteredPromoters.length / entriesPerPage);\n                          let pageNumber;\n\n                          if (totalPages <= 5) {\n                            pageNumber = i + 1;\n                          } else if (currentPage <= 3) {\n                            pageNumber = i + 1;\n                          } else if (currentPage >= totalPages - 2) {\n                            pageNumber = totalPages - 4 + i;\n                          } else {\n                            pageNumber = currentPage - 2 + i;\n                          }\n\n                          return (\n                            <button\n                              key={pageNumber}\n                              onClick={() => setCurrentPage(pageNumber)}\n                              className={`w-8 h-8 rounded-md text-sm font-medium transition-all duration-200 ${currentPage === pageNumber\n                                ? 'bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-400/20 border border-orange-400/50'\n                                : 'bg-gray-600/50 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-500/30 hover:border-gray-400/50'\n                                }`}\n                              title={`Go to page ${pageNumber}`}\n                            >\n                              {pageNumber}\n                            </button>\n                          );\n                        })}\n                      </div>\n\n                      <button\n                        onClick={() => setCurrentPage(prev => Math.min(prev + 1, Math.ceil(filteredPromoters.length / entriesPerPage)))}\n                        disabled={currentPage === Math.ceil(filteredPromoters.length / entriesPerPage)}\n                        className={`group relative p-2.5 rounded-lg transition-all duration-200 ${currentPage === Math.ceil(filteredPromoters.length / entriesPerPage)\n                          ? 'bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30'\n                          : 'bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10'\n                          }`}\n                        title=\"Next Page\"\n                      >\n                        <ChevronRight className=\"w-4 h-4\" />\n                        <span className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">Next</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </UnifiedCard>\n          </div>\n        </div>\n\n        {/* Create/Edit Modal */}\n        {showModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <UnifiedPromoterForm\n              onSubmit={handleFormSubmit}\n              onCancel={closeModal}\n              loading={submitting}\n              editingPromoter={editingPromoter}\n              availableParents={getAvailableParents()}\n              adminUsers={adminUsers}\n            />\n          </div>\n        )}\n\n        {/* Delete Confirmation Modal */}\n        {showDeleteModal && deletingPromoter && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold text-white\">Confirm Delete</h3>\n                <button\n                  onClick={closeDeleteModal}\n                  className=\"text-gray-400 hover:text-white transition-colors\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n\n              <div className=\"mb-6\">\n                <p className=\"text-gray-300\">\n                  Are you sure you want to delete promoter <strong>{deletingPromoter.name}</strong>?\n                </p>\n                <p className=\"text-red-400 text-sm mt-2\">\n                  This action cannot be undone.\n                </p>\n              </div>\n\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={closeDeleteModal}\n                  className=\"px-4 py-2 text-gray-300 hover:text-white transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleDelete}\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Pin Allocation Modal */}\n        {showPinModal && selectedPromoterForPins && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-gray-800 rounded-xl p-6 w-full max-w-md border border-gray-700\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-xl font-semibold text-white\">Allocate Pins</h3>\n                <button\n                  onClick={closePinModal}\n                  className=\"text-gray-400 hover:text-white transition-colors\"\n                >\n                  <X className=\"w-5 h-5\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <p className=\"text-gray-300 mb-2\">\n                    Promoter: <span className=\"font-semibold text-white\">{selectedPromoterForPins.name}</span>\n                  </p>\n                  <p className=\"text-gray-300 mb-4\">\n                    Current Pins: <span className={`font-bold ${(selectedPromoterForPins?.pins || 0) > 0 ? 'text-green-400' : 'text-red-400'}`}>\n                      {selectedPromoterForPins?.pins || 0}\n                    </span>\n                  </p>\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 text-sm mb-2\">\n                    Number of Pins to Allocate <span className=\"text-red-400\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    max=\"1000\"\n                    value={pinAllocation.amount}\n                    onChange={(e) => setPinAllocation(prev => ({ ...prev, amount: e.target.value }))}\n                    placeholder=\"Enter number of pins\"\n                    className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 text-sm mb-2\">\n                    Notes (Optional)\n                  </label>\n                  <textarea\n                    value={pinAllocation.notes}\n                    onChange={(e) => setPinAllocation(prev => ({ ...prev, notes: e.target.value }))}\n                    placeholder=\"Add notes about this allocation...\"\n                    rows=\"3\"\n                    className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20\"\n                  />\n                </div>\n\n                <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <Shield className=\"w-5 h-5 text-blue-400 mt-0.5\" />\n                    <div>\n                      <p className=\"text-blue-300 text-sm font-medium\">Pin Allocation Info</p>\n                      <p className=\"text-gray-300 text-sm mt-1\">\n                        Each customer creation requires 1 pin. Allocate pins to enable promoters to create customers.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 mt-6\">\n                <button\n                  onClick={closePinModal}\n                  className=\"px-4 py-2 text-gray-300 hover:text-white transition-colors\"\n                  disabled={submitting}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handlePinAllocation}\n                  disabled={submitting || !pinAllocation.amount}\n                  className=\"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n                >\n                  {submitting ? (\n                    <>\n                      <Loader className=\"w-4 h-4 animate-spin\" />\n                      <span>Allocating...</span>\n                    </>\n                  ) : (\n                    <>\n                      <Shield className=\"w-4 h-4\" />\n                      <span>Allocate Pins</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Success Modal */}\n        <SuccessModal\n          isOpen={showSuccessModal}\n          onClose={() => {\n            setShowSuccessModal(false);\n            setSuccessData(null);\n          }}\n          title={successData?.title}\n          message={successData?.message}\n          details={successData?.details}\n        />\n      </UnifiedBackground>\n    </>\n  );\n}\n\nexport default AdminPromoters;\n"],"names":["UnifiedPromoterForm","React","_ref","onSubmit","onCancel","loading","editingPromoter","availableParents","adminUsers","formData","setFormData","useState","name","email","hasEmail","password","confirmPassword","mobile","address","parentPromoter","formErrors","setFormErrors","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","mobileValidationState","setMobileValidationState","isValidating","isValid","message","useEffect","promoterEmail","hasRealEmail","includes","phone","parent_promoter_id","parentPromoterOptions","useMemo","map","admin","id","label","concat","type","promoter","_id","isCurrentUser","promoter_id","validateField","useCallback","async","field","value","errors","_objectSpread","trim","length","test","clientValidation","MobileValidationService","validateMobileFormat","is_valid","serverValidation","validateMobileNumber","success","error","handleInputChange","fieldName","prev","fieldErrors","newErrors","mobileNumber","errorMessage","validateForm","timeoutId","setTimeout","clearTimeout","Object","keys","forEach","assign","handleSubmit","e","preventDefault","submissionData","useNewSystem","_jsxs","className","children","_jsx","onClick","disabled","X","onChange","target","placeholder","checked","htmlFor","_Fragment","replace","slice","maxLength","Loader","CheckCircle","AlertCircle","rows","option","displayName","user","useAuth","showSuccess","showError","showWarning","handleApiError","useToast","useScrollAnimation","promoters","setPromoters","filteredPromoters","setFilteredPromoters","searchTerm","setSearchTerm","statusFilter","setStatusFilter","sortBy","setSortBy","showDownloadMenu","setShowDownloadMenu","downloadButtonRef","useRef","downloadMenuPosition","setDownloadMenuPosition","top","right","showModal","setShowModal","showDeleteModal","setShowDeleteModal","setEditingPromoter","deletingPromoter","setDeletingPromoter","setLoading","submitting","setSubmitting","showSuccessModal","setShowSuccessModal","successData","setSuccessData","showPinModal","setShowPinModal","selectedPromoterForPins","setSelectedPromoterForPins","pinAllocation","setPinAllocation","amount","notes","currentPage","setCurrentPage","entriesPerPage","setEntriesPerPage","loadPromoters","data","supabase","from","select","eq","order","ascending","limit","console","log","count","sample","loadingStopped","moreData","filtered","filter","toLowerCase","promoterId","searchLower","status","closeModal","closeDeleteModal","closePinModal","getParentPromoterInfo","parentId","parentAdmin","find","isAdmin","p","SharedStyles","UnifiedBackground","UnifiedButton","openCreateModal","Plus","ref","current","rect","getBoundingClientRect","bottom","window","innerWidth","Download","createPortal","style","minWidth","enrichedPromoters","parentInfo","parent_promoter_name","exportUtils","handleDownloadCSV","document","body","UnifiedCard","overflow","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","title","min","max","Math","parseInt","SkeletonTable","columns","colSpan","indexOfLastPromoter","indexOfFirstPromoter","promoterName","promoterPhone","systemPromoterID","Users","Mail","Phone","_promoter$status","currentStatus","newStatus","update","togglePromoterStatus","pins","openEditModal","Edit","openDeleteModal","Trash2","ceil","ChevronLeft","Array","_","i","totalPages","pageNumber","ChevronRight","_currentSession$data$","auth","getSession","session","rpc","p_promoter_id","p_name","p_email","p_phone","p_address","p_status","p_parent_promoter_id","updated_at","Date","toISOString","Error","userProvidedEmail","authData","API_URL","process","backendResponse","fetch","method","headers","JSON","stringify","userData","role","ok","errorResult","json","backendError","_authData","details","getAvailableParents","allPromoters","allAvailableParents","getDescendants","descendants","child","childId","push","currentId","excludeIds","delete","Shield","result","p_pins_to_add","insert","pins_used","action_type","SuccessModal","isOpen","onClose"],"sourceRoot":""}