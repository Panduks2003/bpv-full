"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[884],{1754:(e,t,s)=>{s.d(t,{YB:()=>p,cU:()=>c});s(5043);var a=s(579);const r="rgba(247, 147, 30, 0.1)",n="rgba(255, 255, 255, 0.05)",i="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(n," 25%,\n      ").concat(r," 50%,\n      ").concat(n," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=i,document.head.appendChild(e)}const l=e=>{let{width:t="100%",height:s="1rem",className:r="",rounded:i="rounded-lg",animate:l=!0}=e;return(0,a.jsx)("div",{className:"".concat(i," border border-white/10 ").concat(l?"bp-skeleton-shimmer":""," ").concat(r),style:{width:t,height:s,background:l?void 0:n}})},o=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(t),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(l,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,a.jsx)(l,{width:"3rem",height:"2rem"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"70%",height:"1rem"}),(0,a.jsx)(l,{width:"90%",height:"0.75rem"})]})]})},c=e=>{let{rows:t=5,columns:s=4,className:r=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(r),children:[(0,a.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,a.jsx)(l,{width:"80%",height:"1rem"},t))})}),(0,a.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)")},children:Array.from({length:s}).map((e,t)=>(0,a.jsx)(l,{width:0===t?"90%":"70%",height:"1rem"},t))})},t))})]})},d=e=>{let{count:t=2,className:s=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,a.jsx)(o,{},t))})},x=e=>{let{count:t=4,className:s=""}=e;return(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 ".concat(s),children:Array.from({length:t}).map((e,t)=>(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-5 h-full",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(l,{width:"3.5rem",height:"3.5rem",rounded:"rounded-xl",className:"mx-auto"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"70%",height:"1rem",className:"mx-auto"}),(0,a.jsx)(l,{width:"90%",height:"0.75rem",className:"mx-auto"})]})]})},t))})},m=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"text-center mb-6 ".concat(t),children:[(0,a.jsx)(l,{width:"4rem",height:"4rem",rounded:"rounded-2xl",className:"mx-auto mb-4"}),(0,a.jsx)(l,{width:"15rem",height:"2rem",className:"mx-auto mb-2"}),(0,a.jsx)(l,{width:"20rem",height:"1rem",className:"mx-auto"})]})},h=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6 ".concat(t),children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(l,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"}),(0,a.jsx)(l,{width:"6rem",height:"2.5rem",rounded:"rounded-lg"})]})]})},g=e=>{let{className:t=""}=e;return(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(t),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l,{width:"8rem",height:"1rem"}),(0,a.jsx)(l,{width:"6rem",height:"0.75rem"})]}),(0,a.jsx)(l,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(l,{width:"4rem",height:"0.75rem"}),(0,a.jsx)(l,{width:"6rem",height:"0.75rem"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(l,{width:"5rem",height:"0.75rem"}),(0,a.jsx)(l,{width:"7rem",height:"0.75rem"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,a.jsx)(l,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,a.jsx)(l,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},p=e=>{let{type:t="dashboard"}=e;switch(t){case"dashboard":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(m,{}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l,{width:"10rem",height:"1.5rem",className:"mb-4"}),(0,a.jsx)(d,{})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l,{width:"12rem",height:"1.5rem",className:"mb-4"}),(0,a.jsx)(x,{})]})]})]})});case"table":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(m,{}),(0,a.jsx)(h,{}),(0,a.jsx)(c,{rows:8,columns:5})]})});case"cards":return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)(m,{}),(0,a.jsx)(h,{}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)(g,{},t))})]})});default:return(0,a.jsx)(p,{type:"dashboard"})}}},4725:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5680:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8112:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8432:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(3797).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8884:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var a=s(9379),r=s(5043),n=s(6621),i=s(3959),l=s(3792),o=s(5229),c=s(254),d=s(917),x=s(4725),m=s(8432),h=s(98),g=s(5897),p=s(9589),u=s(5680),j=s(9213),y=s(430),b=s(8112),N=s(1065),f=s(1172),v=s(1754),w=s(579);const k=e=>{let{stage:t}=e;const s=(()=>{switch(t){case"requests":return{icon:(0,w.jsx)(h.A,{className:"w-8 h-8 text-blue-400 animate-pulse"}),title:"Loading PIN Requests...",description:"Fetching PIN request data from database"};case"transactions":return{icon:(0,w.jsx)(y.A,{className:"w-8 h-8 text-green-400 animate-pulse"}),title:"Loading Transactions...",description:"Analyzing PIN transaction history"};case"promoters":return{icon:(0,w.jsx)(b.A,{className:"w-8 h-8 text-purple-400 animate-pulse"}),title:"Loading Promoters...",description:"Fetching promoter information"};case"complete":return{icon:(0,w.jsx)(d.A,{className:"w-8 h-8 text-orange-400 animate-bounce"}),title:"Almost Done...",description:"Finalizing data loading"};case"error":return{icon:(0,w.jsx)(N.A,{className:"w-8 h-8 text-red-400"}),title:"Error Loading Data",description:"Please refresh the page and try again"};default:return{icon:(0,w.jsx)(g.A,{className:"w-8 h-8 text-orange-400 animate-spin"}),title:"Initializing...",description:"Preparing to load your data"}}})();return(0,w.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 space-y-4",children:[(0,w.jsxs)("div",{className:"relative",children:[s.icon,(0,w.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:s.title}),(0,w.jsx)("p",{className:"text-sm text-slate-400",children:s.description}),(0,w.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-4",children:[(0,w.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("requests"===t||"transactions"===t||"promoters"===t||"complete"===t?"bg-blue-400":"bg-slate-600")}),(0,w.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("transactions"===t||"promoters"===t||"complete"===t?"bg-blue-400":"bg-slate-600")}),(0,w.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("promoters"===t||"complete"===t?"bg-blue-400":"bg-slate-600")}),(0,w.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("complete"===t?"bg-blue-400":"bg-slate-600")})]})]})]})},A=e=>e.transaction_id||e.requestId||"TXN-".concat(e.id.slice(0,8));const P=function(){var e,t;const{user:s}=(0,n.As)();(0,i.r9)();const[P,_]=(0,r.useState)([]),[C,S]=(0,r.useState)([]),[q,M]=(0,r.useState)([]),[I,D]=(0,r.useState)([]),[L,T]=(0,r.useState)([]),[R,E]=(0,r.useState)([]),[U,F]=(0,r.useState)(""),[z,B]=(0,r.useState)("all"),[X,O]=(0,r.useState)("pin-requests"),[W,Q]=(0,r.useState)(!0),[G,H]=(0,r.useState)("initial"),[V,J]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(1),[Z,$]=(0,r.useState)(10),[ee,te]=(0,r.useState)(1),[se,ae]=(0,r.useState)(10),[re,ne]=(0,r.useState)(1),[ie,le]=(0,r.useState)(10),[oe,ce]=(0,r.useState)(null),[de,xe]=(0,r.useState)(0),[me,he]=(0,r.useState)(!1),[ge,pe]=(0,r.useState)(!1),[ue,je]=(0,r.useState)({action:"approve",adminNotes:""}),[ye,be]=(0,r.useState)(!1),[Ne,fe]=(0,r.useState)(null),[ve,we]=(0,r.useState)({promoterId:"",pins:"",action:"add"}),[ke,Ae]=(0,r.useState)({}),[Pe,_e]=(0,r.useState)({show:!1,message:"",type:""}),Ce=function(e){_e({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout(()=>{_e({show:!1,message:"",type:""})},4e3)};(0,r.useEffect)(()=>{Se();const e=setInterval(()=>{Se()},3e4);return()=>clearInterval(e)},[]);const Se=async()=>{await Promise.all([qe(),Me(),Ie()])};(0,r.useEffect)(()=>{let e=P||[];U&&(e=e.filter(e=>{var t,s;const a=(e.request_number||"").toLowerCase(),r=((null===(t=e.promoter)||void 0===t?void 0:t.email)||"").toLowerCase(),n=((null===(s=e.promoter)||void 0===s?void 0:s.name)||"").toLowerCase(),i=(U||"").toLowerCase();return a.includes(i)||r.includes(i)||n.includes(i)})),e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),M(e),te(1)},[P,U]),(0,r.useEffect)(()=>{let e=C||[];"all"!==z&&(e=e.filter(e=>(e.actionType||"pending")===z)),U&&(e=e.filter(e=>{const t=(e.requestId||"").toLowerCase(),s=(e.promoterEmail||"").toLowerCase(),a=(e.promoterName||"").toLowerCase(),r=(U||"").toLowerCase();return t.includes(r)||s.includes(r)||a.includes(r)})),e.sort((e,t)=>new Date(t.requestDate)-new Date(e.requestDate)),D(e),Y(1)},[C,U,z]),(0,r.useEffect)(()=>{let e=L||[];U&&(e=e.filter(e=>{const t=(e.name||"").toLowerCase(),s=(e.email||"").toLowerCase(),a=(e.promoter_id||"").toLowerCase(),r=(e.phone||"").toLowerCase(),n=(U||"").toLowerCase();return t.includes(n)||s.includes(n)||a.includes(n)||r.includes(n)})),e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),E(e),ne(1)},[L,U]);const qe=async()=>{try{Q(!0),H("requests");const e=await c.Ay.getPinRequests(null,null,20);_(e),M(e),Q(!1),H("promoters"),setTimeout(async()=>{try{const e=await c.Ay.getPinRequests(null,null,100);_(e),M(e)}catch(e){console.error("Error loading more PIN requests:",e)}},200),setTimeout(async()=>{try{const e=await c.Ay.getPinRequests(null,null,1e3);_(e),M(e)}catch(e){console.error("Error loading all PIN requests:",e)}},800)}catch(e){_([]),M([]),H("error"),Q(!1)}},Me=async()=>{try{Q(!0),H("transactions");const e=await o.Ay.getAllPinTransactions({},20);S(e||[]),D(e||[]),H("promoters"),setTimeout(async()=>{try{const e=await o.Ay.getAllPinTransactions({},100);S(e||[]),D(e||[])}catch(e){console.error("Error loading more PIN transactions:",e)}},200),setTimeout(async()=>{try{const e=await o.Ay.getAllPinTransactions({},1e3);S(e||[]),D(e||[])}catch(e){console.error("Error loading all PIN transactions:",e)}},800)}catch(e){S([]),D([]),H("error")}},Ie=async()=>{try{const{data:e,error:t}=await l.ND.from("profiles").select("id, name, email, phone, mobile, pins, promoter_id, created_at").eq("role","promoter").order("created_at",{ascending:!1});if(!t&&e){const t=e.map(e=>({id:e.id,name:e.name||"Unknown",email:e.email||"Unknown",phone:e.phone||e.mobile||"Not provided",mobile:e.mobile||e.phone||"Not provided",promoter_id:e.promoter_id||"N/A",pins:e.pins||0,created_at:e.created_at}));T(t),E(t)}else T([]),E([])}catch(e){T([]),E([])}},De=(e,t,s)=>{ce(e),xe(s),je({action:t,adminNotes:""}),pe(!0)},Le=()=>{be(!1),fe(null),we({promoterId:"",pins:"",action:"add"}),Ae({})};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.wE,{}),(0,w.jsxs)(i.dQ,{children:[(0,w.jsx)("div",{className:"min-h-screen pt-40 px-8 pb-8",children:(0,w.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-8","data-animate":!0,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Pin Management System"}),(0,w.jsx)("p",{className:"text-gray-400",children:"Manage pin requests and direct pin allocation"})]}),(0,w.jsx)("div",{className:"flex space-x-1","data-animate":!0,children:[{id:"pin-requests",label:"PIN Requests",icon:y.A},{id:"direct",label:"Allocate Pins",icon:b.A},{id:"requests",label:"Pin History",icon:h.A}].map(e=>{const t=e.icon;return(0,w.jsxs)("button",{onClick:()=>O(e.id),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-300 ".concat(X===e.id?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50 hover:text-white"),children:[(0,w.jsx)(t,{className:"w-5 h-5"}),(0,w.jsx)("span",{children:e.label})]},e.id)})})]}),"requests"===X&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.Xg,{className:"mb-6","data-animate":!0,style:{overflow:"visible"},children:(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,w.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("input",{type:"text",placeholder:"Search by Transaction ID (BPV-AA-01), promoter name...",value:U,onChange:e=>F(e.target.value),className:"w-full h-10 px-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-sm"}),(0,w.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,w.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"Show"}),(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)("input",{type:"number",min:"1",max:"100",value:Z,onChange:e=>{const t=Math.min(100,Math.max(1,parseInt(e.target.value)||10));$(t),Y(1)},className:"w-16 h-10 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm pl-3 pr-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 hover:bg-gray-600 transition-colors text-center",placeholder:"10"})}),(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"entries per page"})]}),I.length>0&&(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Showing ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:(K-1)*Z+1})," to ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.min(K*Z,I.length)})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:I.length})," entries"]})]})]})}),(0,w.jsxs)(i.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:[W?(0,w.jsx)(k,{stage:G}):(0,w.jsx)("div",{className:"overflow-x-auto",children:(0,w.jsxs)("table",{className:"w-full",children:[(0,w.jsx)("thead",{className:"bg-gray-800/50",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Pins"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Action Type"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===I.length?(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("div",{children:"No pin transactions found"}),(0,w.jsxs)("div",{className:"text-xs text-gray-500",children:["Debug: Total transactions = ",C.length,", Filtered = ",I.length,", Loading = ",W?"true":"false"]}),0===C.length&&!W&&(0,w.jsx)("div",{className:"text-xs text-blue-400",children:'\ud83d\udca1 Try creating some PIN transactions first using the "Allocate Pins" tab'})]})})}):(()=>{const e=K*Z,t=e-Z;return I.slice(t,e).map((e,t)=>(0,w.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("admin_allocation"===e.actionType?"bg-green-100 text-green-800":"customer_creation"===e.actionType?"bg-blue-100 text-blue-800":"admin_deduction"===e.actionType?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:A(e)})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(b.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{className:"text-white font-medium",children:(()=>{if(e.userName)return e.userName;const t=L.find(t=>t.id===e.user_id);return null!==t&&void 0!==t&&t.name?t.name:e.user_id?"User ".concat(e.user_id.slice(0,8),"..."):"N/A"})()}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:(()=>{if(e.userPromoterId)return e.userPromoterId;const t=L.find(t=>t.id===e.user_id);return null!==t&&void 0!==t&&t.promoter_id?t.promoter_id:e.user_id?"ID: ".concat(e.user_id.slice(0,8),"..."):"N/A"})()})]})]})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("div",{className:"flex items-center",children:(()=>{const t=null!==e.quantity&&void 0!==e.quantity?e.quantity:null!==e.pin_change_value&&void 0!==e.pin_change_value?e.pin_change_value:0;let s,a;return"admin_allocation"===e.actionType?(s=Math.abs(t),a=!0):"customer_creation"===e.actionType?(s=Math.abs(t),a=!1,0===s&&(s=1)):"admin_deduction"===e.actionType?(s=Math.abs(t),a=!1):(s=Math.abs(t),a=t>0),(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("span",{className:"text-sm font-medium ".concat(a?"text-green-300":"text-red-300"),children:["\ud83d\udccc ",a?"+":"-",s]})})})()})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("customer_creation"===e.actionType?"bg-blue-100 text-blue-800":"admin_allocation"===e.actionType?"bg-green-100 text-green-800":"admin_deduction"===e.actionType?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.displayConfig?"".concat(e.displayConfig.emoji," ").concat(e.displayConfig.label):"customer_creation"===e.actionType?"\ud83d\udc64 Customer Creation":"admin_allocation"===e.actionType?"\u2705 Admin Allocation":"admin_deduction"===e.actionType?"\u274c Admin Deduction":"\u2753 Unknown"})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString()})]}):"N/A"})]},e.id))})()})]})}),I.length>0&&(0,w.jsx)("div",{className:"px-6 py-4 border-t border-gray-700/50 bg-gray-800/30",children:(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Page ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:K})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.ceil(I.length/Z)})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("button",{onClick:()=>Y(e=>Math.max(e-1,1)),disabled:1===K,className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(1===K?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Previous Page",children:[(0,w.jsx)(x.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Previous"})]}),(0,w.jsx)("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-700/30 rounded-lg border border-gray-600/30",children:Array.from({length:Math.min(5,Math.ceil(I.length/Z))},(e,t)=>{const s=Math.ceil(I.length/Z);let a;return a=s<=5||K<=3?t+1:K>=s-2?s-4+t:K-2+t,(0,w.jsx)("button",{onClick:()=>Y(a),className:"w-8 h-8 rounded-md text-sm font-medium transition-all duration-200 ".concat(K===a?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-400/20 border border-orange-400/50":"bg-gray-600/50 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-500/30 hover:border-gray-400/50"),title:"Go to page ".concat(a),children:a},a)})}),(0,w.jsxs)("button",{onClick:()=>Y(e=>Math.min(e+1,Math.ceil(I.length/Z))),disabled:K===Math.ceil(I.length/Z),className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(K===Math.ceil(I.length/Z)?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Next Page",children:[(0,w.jsx)(m.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Next"})]})]})]})})]})]}),"pin-requests"===X&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.Xg,{className:"mb-6","data-animate":!0,style:{overflow:"visible"},children:(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,w.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("input",{type:"text",placeholder:"Search by Request ID (PIN_REQ-01), promoter name, or reason...",value:U,onChange:e=>F(e.target.value),className:"w-full h-10 px-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-sm"}),(0,w.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,w.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"Show"}),(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)("input",{type:"number",min:"1",max:"100",value:se,onChange:e=>{const t=Math.min(100,Math.max(1,parseInt(e.target.value)||10));ae(t),te(1)},className:"w-16 h-10 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm pl-3 pr-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 hover:bg-gray-600 transition-colors text-center",placeholder:"10"})}),(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"entries per page"})]}),q.length>0&&(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Showing ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:(ee-1)*se+1})," to ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.min(ee*se,q.length)})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:q.length})," requests"]})]})]})}),(0,w.jsxs)(i.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:[W?(0,w.jsx)(v.cU,{rows:6,columns:5}):(0,w.jsx)("div",{className:"overflow-x-auto",children:(0,w.jsxs)("table",{className:"w-full",children:[(0,w.jsx)("thead",{className:"bg-gray-800/50",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Requested PINs"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===q.length?(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:"No PIN requests found"})}):(()=>{const e=ee*se,t=e-se;return q.slice(t,e).map((e,t)=>{var s;return(0,w.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(b.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{className:"text-white font-medium",children:e.promoter_name||(null===(s=e.promoter)||void 0===s?void 0:s.name)||"Unknown"}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:(()=>{const t=L.find(t=>t.id===e.promoter_id);return(null===t||void 0===t?void 0:t.promoter_id)||"No ID"})()})]})]})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("div",{className:"flex items-center",children:(0,w.jsxs)("span",{className:"text-sm font-medium text-blue-400",children:["\ud83d\udccc +",e.requested_pins||0]})})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString()})]}):"N/A"}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"pending"===e.status?"\u23f3 Pending":"approved"===e.status?"\u2705 Approved":"rejected"===e.status?"\u274c Rejected":"\u2753 Unknown"})}),(0,w.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["pending"===e.status&&(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)("button",{onClick:()=>De(e,"approve",t),className:"text-green-400 hover:text-green-300 transition-colors",children:(0,w.jsx)(d.A,{className:"w-5 h-5"})}),(0,w.jsx)("button",{onClick:()=>De(e,"reject",t),className:"text-red-400 hover:text-red-300 transition-colors",children:(0,w.jsx)(N.A,{className:"w-5 h-5"})})]}),"pending"!==e.status&&(0,w.jsx)("span",{className:"text-gray-500",children:"No actions"})]})]},e.id)})})()})]})}),q.length>0&&(0,w.jsx)("div",{className:"px-6 py-4 border-t border-gray-700/50 bg-gray-800/30",children:(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Page ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:ee})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.ceil(q.length/se)})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("button",{onClick:()=>te(e=>Math.max(e-1,1)),disabled:1===ee,className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(1===ee?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Previous Page",children:[(0,w.jsx)(x.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Previous"})]}),(0,w.jsx)("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-700/30 rounded-lg border border-gray-600/30",children:Array.from({length:Math.min(5,Math.ceil(q.length/se))},(e,t)=>{const s=Math.ceil(q.length/se);let a;return a=s<=5||ee<=3?t+1:ee>=s-2?s-4+t:ee-2+t,(0,w.jsx)("button",{onClick:()=>te(a),className:"w-8 h-8 rounded-md text-sm font-medium transition-all duration-200 ".concat(ee===a?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-400/20 border border-orange-400/50":"bg-gray-600/50 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-500/30 hover:border-gray-400/50"),title:"Go to page ".concat(a),children:a},a)})}),(0,w.jsxs)("button",{onClick:()=>te(e=>Math.min(e+1,Math.ceil(q.length/se))),disabled:ee===Math.ceil(q.length/se),className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(ee===Math.ceil(q.length/se)?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Next Page",children:[(0,w.jsx)(m.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Next"})]})]})]})})]})]}),"direct"===X&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.Xg,{className:"mb-6","data-animate":!0,style:{overflow:"visible"},children:(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,w.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("input",{type:"text",placeholder:"Search promoters by name, email, or ID (BPVP15)...",value:U,onChange:e=>F(e.target.value),className:"w-full h-10 px-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-sm"}),(0,w.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,w.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"Show"}),(0,w.jsx)("div",{className:"relative",children:(0,w.jsx)("input",{type:"number",min:"1",max:"100",value:ie,onChange:e=>{const t=Math.min(100,Math.max(1,parseInt(e.target.value)||10));le(t),ne(1)},className:"w-16 h-10 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm pl-3 pr-2 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 hover:bg-gray-600 transition-colors text-center",placeholder:"10"})}),(0,w.jsx)("span",{className:"text-gray-300 text-sm font-medium",children:"promoters per page"})]}),R.length>0&&(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Showing ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:(re-1)*ie+1})," to ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.min(re*ie,R.length)})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:R.length})," promoters"]})]})]})}),(0,w.jsxs)(i.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:[W?(0,w.jsx)(k,{stage:G}):(0,w.jsx)("div",{className:"overflow-x-auto",children:(0,w.jsxs)("table",{className:"w-full",children:[(0,w.jsx)("thead",{className:"bg-gray-800/50",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter Details"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact Details"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Current Pins"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Join Date"}),(0,w.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===R.length?(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:U?"No promoters found matching your search":"No promoters found"})}):(()=>{const e=re*ie,t=e-ie;return R.slice(t,e).map(e=>(0,w.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(b.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{className:"text-white font-medium",children:e.name||"Unknown"}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:e.promoter_id||"No ID"})]})]})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,w.jsxs)("div",{className:"space-y-1",children:[(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(p.A,{className:"w-3 h-3 mr-2 text-gray-400"}),e.email||"No email"]}),(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(u.A,{className:"w-3 h-3 mr-2 text-gray-400"}),e.phone||e.mobile||"Not provided"]})]})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,w.jsx)("div",{className:"flex items-center",children:(0,w.jsxs)("span",{className:"text-sm font-medium text-white",children:["\ud83d\udccc ",e.pins||0]})})}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?(0,w.jsxs)("div",{className:"flex flex-col",children:[(0,w.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()}),(0,w.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString()})]}):"N/A"}),(0,w.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,w.jsx)("div",{className:"flex space-x-2",children:(0,w.jsx)("button",{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;fe(e),we({promoterId:(null===e||void 0===e?void 0:e.id)||"",pins:"",action:"add"}),Ae({}),be(!0)}(e),className:"text-purple-400 hover:text-purple-300 transition-colors",title:"Allocate Pins",children:(0,w.jsx)(j.A,{className:"w-4 h-4"})})})})]},e.id))})()})]})}),R.length>0&&(0,w.jsx)("div",{className:"px-6 py-4 border-t border-gray-700/50 bg-gray-800/30",children:(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),(0,w.jsxs)("span",{className:"text-gray-300 text-sm font-medium",children:["Page ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:re})," of ",(0,w.jsx)("span",{className:"text-orange-400 font-bold",children:Math.ceil(R.length/ie)})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("button",{onClick:()=>ne(e=>Math.max(e-1,1)),disabled:1===re,className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(1===re?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Previous Page",children:[(0,w.jsx)(x.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Previous"})]}),(0,w.jsx)("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-700/30 rounded-lg border border-gray-600/30",children:Array.from({length:Math.min(5,Math.ceil(R.length/ie))},(e,t)=>{const s=Math.ceil(R.length/ie);let a;return a=s<=5||re<=3?t+1:re>=s-2?s-4+t:re-2+t,(0,w.jsx)("button",{onClick:()=>ne(a),className:"w-8 h-8 rounded-md text-sm font-medium transition-all duration-200 ".concat(re===a?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-400/20 border border-orange-400/50":"bg-gray-600/50 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-500/30 hover:border-gray-400/50"),title:"Go to page ".concat(a),children:a},a)})}),(0,w.jsxs)("button",{onClick:()=>ne(e=>Math.min(e+1,Math.ceil(R.length/ie))),disabled:re===Math.ceil(R.length/ie),className:"group relative p-2.5 rounded-lg transition-all duration-200 ".concat(re===Math.ceil(R.length/ie)?"bg-gray-700/50 text-gray-500 cursor-not-allowed border border-gray-600/30":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white border border-gray-600/50 hover:border-gray-500 hover:shadow-lg hover:shadow-orange-400/10"),title:"Next Page",children:[(0,w.jsx)(m.A,{className:"w-4 h-4"}),(0,w.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Next"})]})]})]})})]})]})]})}),ge&&oe&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,w.jsx)(i.Xg,{className:"w-full max-w-lg mx-4",variant:"glassDark",children:(0,w.jsxs)("div",{className:"p-6",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["approve"===ue.action?"Approve":"Reject"," Pin Request"]}),(0,w.jsx)("button",{onClick:()=>pe(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,w.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:(0,w.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-gray-400",children:"Request ID:"}),(0,w.jsx)("span",{className:"text-white font-medium font-mono",children:(Te=oe,Te.request_id||Te.request_number?"PIN_REQ-".concat(Te.request_id||Te.request_number):Te.id?"PIN_REQ-".concat(Te.id):"PIN_REQ-UNKNOWN")})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-gray-400",children:"User:"}),(0,w.jsx)("span",{className:"text-white font-medium",children:oe.promoter_name||(null===(e=oe.promoter)||void 0===e?void 0:e.name)||"Unknown"})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-gray-400",children:"Action Type:"}),(0,w.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((oe.action_type||oe.actionType)===o.hO.CUSTOMER_CREATION?"bg-green-500/20 text-green-300":(oe.action_type||oe.actionType)===o.hO.ADMIN_ALLOCATION?"bg-blue-500/20 text-blue-300":"bg-red-500/20 text-red-300"),children:null===(t=oe.action_type||oe.actionType||"PIN_REQUEST")||void 0===t?void 0:t.replace("_"," ").toUpperCase()})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-gray-400",children:"PIN Requested:"}),(0,w.jsxs)("span",{className:"font-medium text-blue-400",children:["+",oe.requested_pins||oe.pin_quantity||oe.quantity||0]})]}),(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsx)("span",{className:"text-gray-400",children:"Date:"}),(0,w.jsx)("span",{className:"text-white font-medium",children:oe.created_at||oe.requestDate?new Date(oe.created_at||oe.requestDate).toLocaleDateString():"N/A"})]})]})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-gray-300 text-sm mb-2",children:"Admin Notes"}),(0,w.jsx)("textarea",{value:ue.adminNotes,onChange:e=>je((0,a.A)((0,a.A)({},ue),{},{adminNotes:e.target.value})),placeholder:"Add notes for ".concat(ue.action," this request..."),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"})]})]}),(0,w.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,w.jsx)(i.Rq,{variant:"secondary",onClick:()=>pe(!1),children:"Cancel"}),(0,w.jsx)(i.Rq,{onClick:()=>(async(e,t)=>{try{J(!0),"approve"===t?await c.Ay.approvePinRequest(e.id,s.id,ue.adminNotes||"Request approved by admin"):"reject"===t&&await c.Ay.rejectPinRequest(e.id,s.id,ue.adminNotes||"Request rejected by admin"),await qe(),pe(!1),ce(null)}catch(a){}finally{J(!1)}})(oe,ue.action),disabled:V,className:"flex items-center space-x-2 ".concat("approve"===ue.action?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"),children:V?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.A,{className:"w-4 h-4 bp-animate-spin"}),(0,w.jsx)("span",{children:"Processing..."})]}):(0,w.jsxs)(w.Fragment,{children:["approve"===ue.action?(0,w.jsx)(d.A,{className:"w-4 h-4"}):(0,w.jsx)(N.A,{className:"w-4 h-4"}),(0,w.jsxs)("span",{children:["approve"===ue.action?"Approve":"Reject"," Request"]})]})})]})]})})}),ye&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,w.jsx)(i.Xg,{className:"w-full max-w-md mx-4",variant:"glassDark",children:(0,w.jsxs)("div",{className:"p-6",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-white",children:Ne?"Allocate Pins - ".concat(Ne.name):"Allocate Pins"}),(0,w.jsx)("button",{onClick:Le,className:"text-gray-400 hover:text-white transition-colors",children:(0,w.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,w.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return ve.promoterId||(e.promoterId="Please select a promoter"),(!ve.pins||ve.pins<=0)&&(e.pins="Please enter a valid number of pins"),Ae(e),0===Object.keys(e).length})()){J(!0);try{const e=L.find(e=>e.id===ve.promoterId)||Ne;if(!e)throw new Error("Promoter not found");const t=parseInt(ve.pins);let a;if(a="add"===ve.action?await o.Ay.adminAllocatePins(e.id,t,s.id):await o.Ay.adminDeductPins(e.id,t,s.id),!a.success)throw new Error(a.error||"PIN transaction failed");Ce("\ud83c\udf89 Successfully ".concat("add"===ve.action?"allocated":"deducted"," ").concat(t," PIN").concat(t>1?"s":""," ").concat("add"===ve.action?"to":"from"," ").concat(e.name,"!\n\nNew balance: ").concat(a.balance_after," PINs"),"success"),Le(),await Ie(),await qe()}catch(t){Ce("\u274c Failed to ".concat(ve.action," pins. Error: ").concat(t.message),"error")}finally{J(!1)}}},className:"space-y-4",children:[!Ne&&(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Promoter *"}),(0,w.jsxs)("select",{value:ve.promoterId,onChange:e=>we((0,a.A)((0,a.A)({},ve),{},{promoterId:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(ke.promoterId?"border-red-500":"border-gray-600"),children:[(0,w.jsx)("option",{value:"",children:"Select promoter"}),L.map(e=>(0,w.jsxs)("option",{value:e.id,children:[e.name," (",e.promoter_id,") - ",e.pins||0," pins"]},e.id))]}),ke.promoterId&&(0,w.jsx)("p",{className:"text-red-400 text-sm mt-1",children:ke.promoterId})]}),Ne&&(0,w.jsx)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-white font-medium",children:Ne.name}),(0,w.jsx)("p",{className:"text-gray-400 text-sm",children:Ne.promoter_id})]}),(0,w.jsxs)("div",{className:"text-right",children:[(0,w.jsx)("p",{className:"text-gray-400 text-sm",children:"Current Pins"}),(0,w.jsx)("p",{className:"text-white font-bold text-lg",children:Ne.pins||0})]})]})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Action *"}),(0,w.jsxs)("select",{value:ve.action,onChange:e=>we((0,a.A)((0,a.A)({},ve),{},{action:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,w.jsx)("option",{value:"add",children:"Add Pins"}),(0,w.jsx)("option",{value:"subtract",children:"Subtract Pins"})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Number of Pins *"}),(0,w.jsx)("input",{type:"number",min:"1",value:ve.pins,onChange:e=>we((0,a.A)((0,a.A)({},ve),{},{pins:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 ".concat(ke.pins?"border-red-500":"border-gray-600"),placeholder:"Enter number of pins"}),ke.pins&&(0,w.jsx)("p",{className:"text-red-400 text-sm mt-1",children:ke.pins})]}),(0,w.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,w.jsx)(i.Rq,{type:"button",variant:"secondary",onClick:Le,children:"Cancel"}),(0,w.jsx)(i.Rq,{type:"submit",disabled:V,className:"flex items-center space-x-2",children:V?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.A,{className:"w-4 h-4 bp-animate-spin"}),(0,w.jsx)("span",{children:"Processing..."})]}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("span",{children:["\ud83d\udccc ","add"===ve.action?"Add Pins":"Subtract Pins"]})})})]})]})]})})}),Pe.show&&(0,w.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg shadow-lg border transition-all duration-300 ".concat("success"===Pe.type?"bg-green-500/10 border-green-500/30 text-green-300":"bg-red-500/10 border-red-500/30 text-red-300"),children:(0,w.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,w.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat("success"===Pe.type?"bg-green-500":"bg-red-500"),children:"success"===Pe.type?(0,w.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,w.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,w.jsx)("div",{className:"flex-1",children:(0,w.jsx)("p",{className:"text-sm font-medium whitespace-pre-line",children:Pe.message})}),(0,w.jsx)("button",{onClick:()=>_e({show:!1,message:"",type:""}),className:"text-gray-400 hover:text-white transition-colors",children:(0,w.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})]});var Te}}}]);
//# sourceMappingURL=884.41a521b8.chunk.js.map