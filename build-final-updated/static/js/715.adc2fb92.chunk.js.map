{"version":3,"file":"static/js/715.adc2fb92.chunk.js","mappings":"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","sources":["common/services/customerService.js","../node_modules/lucide-react/src/icons/plus.ts","common/utils/supabaseServiceClient.js","promoter/pages/PromoterCustomers.js","common/config/api.js","../node_modules/lucide-react/src/icons/credit-card.ts"],"sourcesContent":["import { API_URL } from '../config/api';\n\nclass CustomerService {\n  // Create customer\n  static async createCustomer(customerData, parentPromoterId) {\n    try {\n      const response = await fetch(`${API_URL}/customer/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...customerData,\n          parentPromoterId: parentPromoterId\n        })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        throw new Error(data.message || 'Failed to create customer');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Customer creation error:', error);\n      throw error;\n    }\n  }\n\n  // Update customer\n  static async updateCustomer(customerId, customerData) {\n    try {\n      const response = await fetch(`${API_URL}/customer/update`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          customerId,\n          ...customerData\n        })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        throw new Error(data.message || 'Failed to update customer');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Customer update error:', error);\n      throw error;\n    }\n  }\n\n  // Delete customer\n  static async deleteCustomer(customerId) {\n    try {\n      const response = await fetch(`${API_URL}/customer/delete`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          customerId\n        })\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        throw new Error(data.message || 'Failed to delete customer');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Customer deletion error:', error);\n      throw error;\n    }\n  }\n\n  // Get customer by ID\n  static async getCustomerById(customerId) {\n    try {\n      const response = await fetch(`${API_URL}/customer/${customerId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        throw new Error(data.message || 'Failed to get customer');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Get customer error:', error);\n      throw error;\n    }\n  }\n\n  // Get all customers\n  static async getAllCustomers(promoterId = null) {\n    try {\n      const url = promoterId\n        ? `${API_URL}/customer/list?promoterId=${promoterId}`\n        : `${API_URL}/customer/list`;\n\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      const data = await response.json();\n\n      if (!response.ok || !data.success) {\n        throw new Error(data.message || 'Failed to get customers');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Get customers error:', error);\n      throw error;\n    }\n  }\n}\n\nexport default CustomerService;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","/**\n * Service Role Supabase Client\n * This client bypasses RLS for backend operations and local sessions\n * Use ONLY for trusted operations where authentication is handled by the app\n */\n\nimport { createClient } from '@supabase/supabase-js';\n\n// Use service role key for backend operations\nconst SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.REACT_APP_SUPABASE_SERVICE_ROLE_KEY;\n\nif (!SUPABASE_URL) {\n  throw new Error('Supabase URL configuration required. Please check your .env file.');\n}\n\n// Create service role client that bypasses RLS\n// If service role key is missing, we'll handle this gracefully in the component\nexport const supabaseService = SUPABASE_SERVICE_ROLE_KEY ? createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, {\n  auth: {\n    autoRefreshToken: false,\n    persistSession: false\n  }\n}) : null;\n\nexport default supabaseService;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useAuth } from \"../../common/context/AuthContext\";\nimport { useUnifiedToast } from \"../../common\";\nimport { supabase } from \"../../common/services/supabaseClient\"\nimport { supabaseService } from '../../common/utils/supabaseServiceClient';\nimport customerService from '../../common/services/customerService';\nimport { Search, Plus, Users, CreditCard, Mail, Phone, X, ArrowLeft, Download, Calendar, Clock, CheckCircle, AlertCircle, Loader2 } from 'lucide-react';\nimport { exportToCSV, exportToPDF } from '../../common/utils/exportUtils';\nimport { SkeletonFullPage } from '../components/skeletons';\nimport UnifiedCustomerForm from '../../common/components/UnifiedCustomerForm';\nimport PaymentManager from '../../common/components/PaymentManager';\nimport { useNavigate } from 'react-router-dom';\nimport { format, parseISO } from 'date-fns';\n\n// MultiStage Loading Component\nconst MultiStageLoading = ({ stage }) => {\n  const getStageContent = () => {\n    switch (stage) {\n      case 'customers':\n        return {\n          icon: <Users className=\"w-8 h-8 text-blue-400 animate-pulse\" />,\n          title: 'Loading Customers...',\n          description: 'Fetching customer data from database'\n        };\n      case 'payments':\n        return {\n          icon: <CreditCard className=\"w-8 h-8 text-green-400 animate-pulse\" />,\n          title: 'Loading Payment Data...',\n          description: 'Analyzing payment information'\n        };\n      case 'complete':\n        return {\n          icon: <CheckCircle className=\"w-8 h-8 text-orange-400 animate-bounce\" />,\n          title: 'Almost Done...',\n          description: 'Finalizing data loading'\n        };\n      case 'error':\n        return {\n          icon: <AlertCircle className=\"w-8 h-8 text-red-400\" />,\n          title: 'Error Loading Data',\n          description: 'Please refresh the page and try again'\n        };\n      default:\n        return {\n          icon: <Loader2 className=\"w-8 h-8 text-orange-400 animate-spin\" />,\n          title: 'Initializing...',\n          description: 'Preparing to load your data'\n        };\n    }\n  };\n\n  const content = getStageContent();\n\n  return (\n    <div className=\"flex flex-col items-center justify-center p-12 space-y-4\">\n      <div className=\"relative\">\n        {content.icon}\n        <div className=\"absolute inset-0 rounded-full bg-blue-400/20 animate-ping\"></div>\n      </div>\n      <div className=\"text-center\">\n        <h3 className=\"text-lg font-semibold text-white mb-2\">{content.title}</h3>\n        <p className=\"text-sm text-slate-400\">{content.description}</p>\n\n        {/* Progress indicators */}\n        <div className=\"flex items-center justify-center space-x-2 mt-4\">\n          <div className={`w-2 h-2 rounded-full transition-colors duration-300 ${stage === 'customers' || stage === 'payments' || stage === 'complete' ? 'bg-blue-400' : 'bg-slate-600'\n            }`}></div>\n          <div className={`w-2 h-2 rounded-full transition-colors duration-300 ${stage === 'payments' || stage === 'complete' ? 'bg-blue-400' : 'bg-slate-600'\n            }`}></div>\n          <div className={`w-2 h-2 rounded-full transition-colors duration-300 ${stage === 'complete' ? 'bg-blue-400' : 'bg-slate-600'\n            }`}></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction PromoterCustomers() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const { showSuccess, showError } = useUnifiedToast();\n\n  // State management - unified with AdminCustomers\n  const [customers, setCustomers] = useState([]);\n  const [filteredCustomers, setFilteredCustomers] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [batchFilter, setBatchFilter] = useState('');\n  const [paymentMonthFilter, setPaymentMonthFilter] = useState('');\n  const [sortBy, setSortBy] = useState('created_at'); // 'created_at' or 'customer_id'\n  const [loading, setLoading] = useState(true);\n  const [loadingStage, setLoadingStage] = useState('initial'); // 'initial', 'customers', 'payments', 'complete'\n  const [showPaymentManager, setShowPaymentManager] = useState(false);\n  const [selectedCustomerForPayments, setSelectedCustomerForPayments] = useState(null);\n  const [showDownloadMenu, setShowDownloadMenu] = useState(false);\n  const [customerPayments, setCustomerPayments] = useState({}); // Map of customer_id -> payments array\n  const downloadButtonRef = useRef(null);\n  const [downloadMenuPosition, setDownloadMenuPosition] = useState({ top: 0, right: 0 });\n  // Promoter-specific states\n  const [availablePins, setAvailablePins] = useState(0);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [editingCustomer, setEditingCustomer] = useState(null);\n\n  // Repayment request states\n  const [showRepaymentModal, setShowRepaymentModal] = useState(false);\n  const [selectedCustomerForRepayment, setSelectedCustomerForRepayment] = useState(null);\n  const [selectedMonth, setSelectedMonth] = useState(1); // Default to Month 1 to show paid status\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\n  const [remarks, setRemarks] = useState('');\n  const [isSubmittingRepayment, setIsSubmittingRepayment] = useState(false);\n  const [pendingRequests, setPendingRequests] = useState({});\n  const [paymentStatus, setPaymentStatus] = useState({});\n\n  // Additional states for RepaymentDashboard functionality\n  const [customerDetails, setCustomerDetails] = useState(null);\n  const [savingPlan, setSavingPlan] = useState(null);\n  const [unpaidMonths, setUnpaidMonths] = useState([]);\n  const [isFetchingCustomer, setIsFetchingCustomer] = useState(false);\n\n  // Filter and search logic - unified with AdminCustomers\n  useEffect(() => {\n    let filtered = customers || [];\n\n    // Search filter\n    if (searchTerm) {\n      filtered = filtered.filter(customer => {\n        const name = (customer?.name || '').toLowerCase();\n        const emailValue = customer?.email;\n        const phoneValue = customer?.phone || customer?.mobile; // Use mobile as fallback\n        const email = (emailValue && String(emailValue).trim() !== '') ? String(emailValue).toLowerCase() : '';\n        const phone = (phoneValue !== null && phoneValue !== undefined && String(phoneValue).trim() !== '') ? String(phoneValue).toLowerCase() : '';\n        const customerId = (customer?.customer_id || '').toLowerCase();\n        const searchLower = (searchTerm || '').toLowerCase();\n        return name.includes(searchLower) ||\n          email.includes(searchLower) ||\n          phone.includes(searchLower) ||\n          customerId.includes(searchLower);\n      });\n    }\n\n    // Status filter\n    if (statusFilter) {\n      filtered = filtered.filter(customer =>\n        (customer?.status || 'active') === statusFilter\n      );\n    }\n\n    // Payment month filter\n    if (paymentMonthFilter) {\n      const monthNumber = parseInt(paymentMonthFilter);\n      filtered = filtered.filter(customer => {\n        const payments = customerPayments[customer.id] || [];\n        const payment = payments.find(p => p.month_number === monthNumber);\n        return payment && payment.status === 'paid';\n      });\n    }\n\n    // Batch filter\n    if (batchFilter) {\n      filtered = filtered.filter(customer =>\n        (customer?.batch || '') === batchFilter\n      );\n    }\n\n    // Apply sorting\n    if (sortBy === 'customer_id') {\n      // Sort by customer ID (numeric part) - ascending order\n      filtered = [...filtered].sort((a, b) => {\n        // Extract numeric parts from customer IDs\n        const getNumericPart = (id) => {\n          if (!id) return 0;\n          const match = id.match(/\\d+/);\n          return match ? parseInt(match[0], 10) : 0;\n        };\n\n        const numA = getNumericPart(a.customer_id);\n        const numB = getNumericPart(b.customer_id);\n        return numA - numB; // Ascending order for IDs (1, 2, 3...)\n      });\n    } else {\n      // Default sort by created_at (newest first)\n      filtered = [...filtered].sort((a, b) => {\n        const dateA = a.created_at ? new Date(a.created_at).getTime() : 0;\n        const dateB = b.created_at ? new Date(b.created_at).getTime() : 0;\n        return dateB - dateA; // Newest first\n      });\n    }\n\n    setFilteredCustomers(filtered);\n  }, [customers, searchTerm, statusFilter, batchFilter, paymentMonthFilter, sortBy, customerPayments]);\n\n  // Load promoter pins\n  const loadPromoterPins = useCallback(async () => {\n    if (!user?.id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('pins')\n        .eq('id', user.id)\n        .single();\n\n      if (error && error.code !== 'PGRST116') {\n        return;\n      }\n\n      setAvailablePins(data?.pins || 0);\n    } catch (error) {\n    }\n  }, [user.id]);\n\n  // Load customers for the current promoter\n  const loadCustomers = useCallback(async () => {\n    if (!user?.id) return;\n\n    try {\n      setLoading(true);\n      setLoadingStage('customers');\n\n      const { data, error } = await supabase\n        .from('profiles')\n        .select(`\n          id,\n          name,\n          email,\n          phone,\n          mobile,\n          customer_id,\n          status,\n          created_at,\n          updated_at,\n          created_at,\n          updated_at,\n          parent_promoter_id,\n          batch\n        `)\n        .eq('parent_promoter_id', user.id)\n        .eq('role', 'customer')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n\n      setCustomers(data || []);\n      setFilteredCustomers(data || []);\n\n      // Load payments for all customers\n      setLoadingStage('payments');\n      await loadCustomerPayments(data || []);\n      setLoadingStage('complete');\n    } catch (error) {\n      showError('Failed to load customers');\n      setLoadingStage('error');\n    } finally {\n      setLoading(false);\n    }\n  }, [user.id, showError]);\n\n  // Load customer payments for filtering\n  const loadCustomerPayments = async (customerList) => {\n    try {\n      // Fetch data via RPC functions to bypass RLS issues with local sessions (401 fix)\n      console.log('Fetching payments and requests via RPC for promoter:', user.id);\n\n      const [paymentsRes, requestsRes] = await Promise.all([\n        supabase.rpc('get_promoter_customer_repayments', { p_promoter_id: user.id }),\n        supabase.rpc('get_promoter_pending_requests', { p_promoter_id: user.id })\n      ]);\n\n      if (paymentsRes.error) {\n        console.error('RPC payments error:', paymentsRes.error);\n        // Fallback or handle failure\n      }\n\n      if (requestsRes.error) {\n        console.error('RPC requests error:', requestsRes.error);\n      }\n\n      const allPayments = paymentsRes.data || [];\n      const requests = requestsRes.data || [];\n\n      console.log(`PROMOTER: Total payments loaded via RPC: ${allPayments.length}`);\n      console.log(`PROMOTER: Total requests loaded via RPC: ${requests.length}`);\n\n      // Group payments by customer_id\n      const paymentsMap = {};\n      const statusMap = {};\n      const requestsMap = {};\n\n      allPayments?.forEach(payment => {\n        if (!paymentsMap[payment.customer_id]) {\n          paymentsMap[payment.customer_id] = [];\n        }\n        paymentsMap[payment.customer_id].push(payment);\n\n        // Set payment status for current month\n        if (payment.month_number === selectedMonth) {\n          statusMap[payment.customer_id] = payment.status === 'paid' ? 'paid' : 'unpaid';\n        }\n      });\n\n      // Set pending requests using composite key: customerId-month-year\n      requests?.forEach(request => {\n        requestsMap[`${request.customer_id}-${request.month}-${request.year}`] = true;\n      });\n\n      setCustomerPayments(paymentsMap);\n      setPaymentStatus(statusMap);\n      setPendingRequests(requestsMap);\n\n      console.log(`PROMOTER: Payment status for Month ${selectedMonth}:`, statusMap);\n      console.log(`PROMOTER: Customers with paid status: ${Object.values(statusMap).filter(s => s === 'paid').length}`);\n      console.log(`PROMOTER: Customers with unpaid status: ${Object.values(statusMap).filter(s => s === 'unpaid').length}`);\n    } catch (error) {\n      console.error('PROMOTER: Error loading customer payments:', error);\n    }\n  };\n\n  // Load customers and pins on component mount\n  useEffect(() => {\n    if (user?.id) {\n      loadCustomers();\n      loadPromoterPins();\n    }\n  }, [user?.id, loadCustomers, loadPromoterPins]);\n\n  // Payment management handlers\n  const openPaymentManager = (customer) => {\n    setSelectedCustomerForPayments(customer);\n    setShowPaymentManager(true);\n  };\n\n  const closePaymentManager = () => {\n    setShowPaymentManager(false);\n    setSelectedCustomerForPayments(null);\n  };\n\n  // Customer creation modal handlers\n  const openCreateModal = () => {\n    setShowCreateModal(true);\n  };\n\n  const closeCreateModal = () => {\n    setShowCreateModal(false);\n  };\n\n  // Handle customer creation using unified service (ensures single PIN deduction)\n  const handleCreateCustomer = async (formData) => {\n    try {\n      // Check if promoter has sufficient pins (client-side check)\n      if (availablePins < 1) {\n        throw new Error(`You have insufficient pins (${availablePins} available). Please request more pins from admin to create customers.`);\n      }\n\n      // Create customer using unified service\n      const result = await customerService.createCustomer(formData, user.id);\n\n      if (!result.success) {\n        throw new Error(result.error || result.message || 'Failed to create customer');\n      }\n\n      // Show success message\n      showSuccess(result.message || `Customer Created Successfully!\\n\\nCard No: ${formData.cardNo}\\nName: ${formData.name}\\nLogin: Use Card No + Password`);\n\n      // Reload data\n      await loadCustomers();\n      await loadPromoterPins();\n      closeCreateModal();\n\n    } catch (error) {\n      showError(`Failed to create customer: ${error.message}`);\n    }\n  };\n\n  // Handle repayment request submission\n  const handleRepaymentRequest = async () => {\n    if (!selectedCustomerForRepayment || !selectedMonth) {\n      showError('Please select a customer and month');\n      return;\n    }\n\n    // Validation: Ensure the selected month is actually in the unpaid list\n    const monthNum = parseInt(selectedMonth);\n    if (!unpaidMonths.includes(monthNum)) {\n      showError(`Month ${monthNum} is already marked as paid for this customer.`);\n      return;\n    }\n\n    // Check if a request for THIS SPECIFIC MONTH and YEAR is already pending\n    // This is handled by the database unique constraint as well, but client check is better for UX\n    if (pendingRequests[`${selectedCustomerForRepayment.id}-${selectedMonth}-${selectedYear}`]) {\n      showError(`A pending request for Month ${selectedMonth} already exists.`);\n      return;\n    }\n\n    try {\n      setIsSubmittingRepayment(true);\n\n      // Execute via Secure Bridge RPC\n      const { data: result, error: rpcError } = await supabase.rpc('submit_repayment_request_secure', {\n        p_promoter_id: user.id,\n        p_customer_id: selectedCustomerForRepayment.id,\n        p_month: parseInt(selectedMonth),\n        p_year: parseInt(selectedYear),\n        p_remarks: remarks.trim() || null\n      });\n\n      if (rpcError || !result?.success) {\n        throw new Error(rpcError?.message || result?.error || 'Failed to submit request via secure bridge');\n      }\n\n      // Update UI state locally\n      const requestKey = `${selectedCustomerForRepayment.id}-${selectedMonth}-${selectedYear}`;\n      setPendingRequests(prev => ({\n        ...prev,\n        [requestKey]: true\n      }));\n\n      showSuccess('Repayment request submitted for approval');\n\n      // Close modal and fully reset state\n      document.getElementById('request_modal').close();\n      setSelectedCustomerForRepayment(null);\n      setCustomerDetails(null);\n      setSavingPlan(null);\n      setUnpaidMonths([]);\n      setSelectedMonth(1);\n      setRemarks('');\n      setShowRepaymentModal(false);\n    } catch (error) {\n      console.error('Submission error:', error);\n      showError(error.message || 'Failed to submit repayment request');\n    } finally {\n      setIsSubmittingRepayment(false);\n    }\n  };\n\n  // Open repayment modal\n  const openRepaymentModal = (customer) => {\n    setSelectedCustomerForRepayment(customer);\n    setRemarks('');\n    setShowRepaymentModal(true);\n  };\n\n  // Close repayment modal\n  const closeRepaymentModal = () => {\n    setShowRepaymentModal(false);\n    setSelectedCustomerForRepayment(null);\n    setRemarks('');\n  };\n\n  // Fetch customer details and unpaid months (from RepaymentDashboard)\n  const fetchCustomerDetails = async (customerId) => {\n    if (!customerId) return;\n\n    setIsFetchingCustomer(true);\n    try {\n      // Fetch via Secure Bridge RPC\n      const { data: result, error } = await supabase.rpc('get_customer_repayment_details', {\n        p_customer_id: customerId\n      });\n\n      if (error) throw error;\n      if (!result) throw new Error('No data returned from secure bridge');\n\n      const { profile: customerData, payments } = result;\n\n      setCustomerDetails(customerData);\n\n      // Parse saving plan\n      if (customerData?.saving_plan) {\n        const match = customerData.saving_plan.match(/â‚¹(\\d+).*?(\\d+)\\s+months?/i);\n        if (match) {\n          const monthlyAmount = parseInt(match[1]);\n          const durationMonths = parseInt(match[2]);\n          setSavingPlan({\n            monthly_amount: monthlyAmount,\n            duration_months: durationMonths,\n            maturity_amount: monthlyAmount * durationMonths,\n            description: customerData.saving_plan\n          });\n        }\n      }\n\n      if (!payments || payments.length === 0) {\n        console.warn('No payment records found');\n        setUnpaidMonths([]);\n        return;\n      }\n\n      // Calculate unpaid months\n      const paidMonths = payments\n        .filter(p => p.status?.toLowerCase() === 'paid')\n        .map(p => p.month_number);\n\n      const allPossibleMonths = Array.from({ length: 20 }, (_, i) => i + 1);\n      const unpaid = allPossibleMonths.filter(month => !paidMonths.includes(month));\n\n      setUnpaidMonths(unpaid);\n\n      if (unpaid.length > 0) {\n        setSelectedMonth(unpaid[0].toString());\n      }\n    } catch (error) {\n      console.error('Detailed fetch error:', error);\n      showError('Failed to load customer repayment info. Please retry.');\n      setUnpaidMonths([]);\n    } finally {\n      setIsFetchingCustomer(false);\n    }\n  };\n\n  // Get status badge\n  const getStatusBadge = (customerId) => {\n    if (paymentStatus[customerId] === 'paid') {\n      return (\n        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-400\">\n          <CheckCircle className=\"w-3 h-3 mr-1\" />\n          Paid\n        </span>\n      );\n    } else if (pendingRequests[customerId]) {\n      return (\n        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-500/20 text-yellow-400\">\n          <Clock className=\"w-3 h-3 mr-1\" />\n          Pending Approval\n        </span>\n      );\n    } else {\n      return (\n        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400\">\n          <AlertCircle className=\"w-3 h-3 mr-1\" />\n          Unpaid\n        </span>\n      );\n    }\n  };\n\n  // Download handlers\n  const handleDownloadCSV = () => {\n    const dataToExport = filteredCustomers.map(customer => ({\n      'Customer Name': customer.name || 'N/A',\n      'Customer ID': customer.customer_id || 'N/A',\n      'Assigned Promoter': getPromoterName(customer),\n      'Email': customer.email || 'N/A',\n      'Phone': customer.phone || 'N/A',\n      'Status': customer.status || 'active',\n      'Created At': customer.created_at ? new Date(customer.created_at).toLocaleDateString() : 'N/A'\n    }));\n\n    exportToCSV(dataToExport, `customers_${new Date().toISOString().split('T')[0]}.csv`);\n    setShowDownloadMenu(false);\n  };\n\n  const handleDownloadPDF = () => {\n    const dataToExport = filteredCustomers.map(customer => ({\n      'Customer Name': customer.name || 'N/A',\n      'Customer ID': customer.customer_id || 'N/A',\n      'Assigned Promoter': getPromoterName(customer),\n      'Email': customer.email || 'N/A',\n      'Phone': customer.phone || 'N/A',\n      'Status': customer.status || 'active',\n      'Created At': customer.created_at ? new Date(customer.created_at).toLocaleDateString() : 'N/A'\n    }));\n\n    exportToPDF(dataToExport, 'Customers List', `customers_${new Date().toISOString().split('T')[0]}.pdf`);\n    setShowDownloadMenu(false);\n  };\n\n  // Get promoter name for display (simplified for promoter view)\n  const getPromoterName = (customer) => {\n    const promoterId = customer?.parent_promoter_id;\n    if (!promoterId) return 'Unassigned';\n\n    // For promoter view, customers should be assigned to current promoter\n    if (promoterId === user?.id) {\n      return user?.name || 'You';\n    }\n\n    return 'Other Promoter';\n  };\n\n  // Get promoter system ID for display\n  const getPromoterSystemId = (customer) => {\n    const promoterId = customer?.parent_promoter_id;\n    if (!promoterId || promoterId !== user?.id) return '';\n\n    return user?.promoter_id || 'SELF';\n  };\n\n  return (\n    <>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\n        <div className=\"container mx-auto px-4 py-6 pt-40\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-white\">Customer Management</h1>\n              <p className=\"text-slate-400\">Manage customer accounts and assignments</p>\n            </div>\n            <div className=\"mt-4 md:mt-0 flex items-center space-x-4\">\n              {/* Request Repayment Button */}\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => {\n                    if (filteredCustomers.length === 0) {\n                      showError('No customers available to request repayment');\n                      return;\n                    }\n                    document.getElementById('request_modal').showModal();\n                  }}\n                  className=\"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-orange-500/25 flex items-center space-x-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  <span>Request Repayment</span>\n                </button>\n              </div>\n\n              {/* Create Customer Button */}\n              <button\n                onClick={openCreateModal}\n                disabled={availablePins < 1}\n                className=\"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center space-x-2\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Create Customer</span>\n              </button>\n\n              {/* Pin Display */}\n              <div className=\"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 min-w-[200px]\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm font-medium text-slate-300\">Available Pins</p>\n                    <p className={`text-2xl font-bold ${availablePins > 0 ? 'text-white' : 'text-red-400'}`}>\n                      {availablePins}\n                    </p>\n                    <p className=\"text-xs text-slate-400 mt-1\">\n                      {availablePins === 0 ? 'No pins available - contact admin' : 'Required: 1 pin per customer'}\n                    </p>\n                  </div>\n                  <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${availablePins > 0 ? 'bg-orange-500' : 'bg-red-500'\n                    }`}>\n                    <svg className=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-slate-800/50 rounded-xl p-4 mb-6 border border-slate-700/50\" style={{ overflow: 'visible' }}>\n            {/* Single Row Layout - All elements in one line */}\n            <div className=\"flex flex-wrap items-center gap-3\">\n              {/* Search Input - Takes more space */}\n              <div className=\"flex-1 min-w-[300px]\">\n                <div className=\"relative\">\n\n                  <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                    <svg className=\"w-4 h-4 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                    </svg>\n                  </div>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search by name, ID, phone, or email...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full h-10 pl-10 pr-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all text-sm\"\n                  />\n                </div>\n              </div>\n\n              {/* Status Filter */}\n              <div className=\"relative\">\n                <select\n                  value={statusFilter}\n                  onChange={(e) => setStatusFilter(e.target.value)}\n                  className=\"appearance-none h-10 bg-slate-700/50 border border-slate-600 rounded-lg text-white px-3 pr-8 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all cursor-pointer hover:bg-slate-600/50 text-sm\"\n                >\n                  <option value=\"\">All Status</option>\n                  <option value=\"active\">Active</option>\n                  <option value=\"inactive\">Inactive</option>\n                </select>\n                {/* Custom Dropdown Arrow */}\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                  <svg className=\"w-3 h-3 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n\n              {/* Batch Filter */}\n              <div className=\"relative\">\n                <select\n                  value={batchFilter}\n                  onChange={(e) => setBatchFilter(e.target.value)}\n                  className=\"appearance-none h-10 bg-slate-700/50 border border-slate-600 rounded-lg text-white px-3 pr-8 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all cursor-pointer hover:bg-slate-600/50 text-sm\"\n                >\n                  <option value=\"\">All Batches</option>\n                  <option value=\"Batch 1\">Batch 1</option>\n                  <option value=\"Batch 2\">Batch 2</option>\n                </select>\n                {/* Custom Dropdown Arrow */}\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                  <svg className=\"w-3 h-3 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n\n              {/* Payment Filter */}\n              <div className=\"relative\">\n                <select\n                  value={paymentMonthFilter}\n                  onChange={(e) => setPaymentMonthFilter(e.target.value)}\n                  className=\"appearance-none h-10 bg-slate-700/50 border border-slate-600 rounded-lg text-white px-3 pr-8 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all cursor-pointer hover:bg-slate-600/50 text-sm\"\n                >\n                  <option value=\"\">All Payments</option>\n                  {Array.from({ length: 20 }, (_, i) => i + 1).map(month => (\n                    <option key={month} value={month.toString()}>Paid - Month {month}</option>\n                  ))}\n                </select>\n                {/* Custom Dropdown Arrow */}\n                <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none\">\n                  <svg className=\"w-3 h-3 text-slate-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n              </div>\n\n              {/* Sort Buttons */}\n              <div className=\"flex items-center bg-slate-700/50 rounded-lg p-1 border border-slate-600 h-10\">\n                <button\n                  onClick={() => setSortBy('created_at')}\n                  className={`px-3 h-full flex items-center text-sm rounded-md transition-all font-medium whitespace-nowrap ${sortBy === 'created_at'\n                    ? 'bg-orange-500 text-white shadow-md'\n                    : 'text-slate-300 hover:text-white'\n                    }`}\n                  title=\"Sort by Newest\"\n                >\n                  Newest\n                </button>\n                <button\n                  onClick={() => setSortBy('customer_id')}\n                  className={`px-3 h-full flex items-center text-sm rounded-md transition-all font-medium whitespace-nowrap ${sortBy === 'customer_id'\n                    ? 'bg-orange-500 text-white shadow-md'\n                    : 'text-slate-300 hover:text-white'\n                    }`}\n                  title=\"Sort by Customer ID\"\n                >\n                  By ID\n                </button>\n              </div>\n\n\n\n              {/* Download Button */}\n              <div className=\"relative\" ref={downloadButtonRef}>\n                <button\n                  onClick={() => {\n                    if (downloadButtonRef.current) {\n                      const rect = downloadButtonRef.current.getBoundingClientRect();\n                      setDownloadMenuPosition({\n                        top: rect.bottom + 8,\n                        right: window.innerWidth - rect.right\n                      });\n                    }\n                    setShowDownloadMenu(!showDownloadMenu);\n                  }}\n                  className=\"h-10 px-4 bg-blue-600 hover:bg-blue-500 border border-blue-500 rounded-lg text-white font-medium transition-all flex items-center space-x-2 text-sm\"\n                  title=\"Download options\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  <span>Export</span>\n                </button>\n\n                {showDownloadMenu && createPortal(\n                  <>\n                    <div\n                      className=\"fixed inset-0 z-[9998]\"\n                      onClick={() => setShowDownloadMenu(false)}\n                    />\n                    <div\n                      className=\"fixed w-48 bg-slate-800 border-2 border-slate-600 rounded-lg shadow-2xl z-[9999]\"\n                      style={{\n                        top: `${downloadMenuPosition.top}px`,\n                        right: `${downloadMenuPosition.right}px`,\n                        minWidth: '12rem'\n                      }}\n                    >\n                      <button\n                        onClick={handleDownloadPDF}\n                        className=\"w-full text-left px-4 py-3 text-white hover:bg-slate-700 rounded-t-lg flex items-center space-x-2 transition-colors\"\n                      >\n                        <span>ðŸ“„ PDF</span>\n                      </button>\n                      <button\n                        onClick={handleDownloadCSV}\n                        className=\"w-full text-left px-4 py-3 text-white hover:bg-slate-700 rounded-b-lg flex items-center space-x-2 transition-colors\"\n                      >\n                        <span>ðŸ“Š CSV</span>\n                      </button>\n                    </div>\n                  </>,\n                  document.body\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Customer List */}\n          <div className=\"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden\">\n            {loading ? (\n              <MultiStageLoading stage={loadingStage} />\n            ) : filteredCustomers.length === 0 ? (\n              <div className=\"text-center p-12\">\n                <Users className=\"mx-auto h-12 w-12 text-slate-500\" />\n                <h3 className=\"mt-2 text-sm font-medium text-white\">No customers found</h3>\n                <p className=\"text-sm text-slate-400\">\n                  {searchTerm ? 'Try a different search term' : 'You have no customers assigned yet'}\n                </p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-slate-700/50\">\n                    <tr>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider\">\n                        Customer Details\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider\">\n                        Contact Details\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider\">\n                        Batch & Saving Plan\n                      </th>\n                      <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider\">\n                        Status\n                      </th>\n\n\n                      <th scope=\"col\" className=\"px-6 py-3 text-right text-xs font-medium text-slate-300 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-slate-800/50 divide-y divide-slate-700\">\n                    {filteredCustomers.map((customer) => (\n                      <tr key={customer.id} className=\"hover:bg-slate-700/30\">\n                        {/* Customer Details */}\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <div className=\"w-8 h-8 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center mr-3\">\n                              <span className=\"text-white text-sm font-bold\">{(customer?.name || 'C').charAt(0)}</span>\n                            </div>\n                            <div className=\"flex flex-col\">\n                              <span className=\"text-white font-medium\">{customer?.name || 'Unnamed Customer'}</span>\n                              <span className=\"text-xs text-slate-400\">{customer?.customer_id || 'N/A'}</span>\n                            </div>\n                          </div>\n                        </td>\n\n                        {/* Contact Details */}\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-slate-300\">\n                          <div className=\"space-y-1\">\n                            <div className=\"flex items-center\">\n                              <Mail className=\"w-3 h-3 mr-2 text-slate-400\" />\n                              {customer?.email || 'No email'}\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Phone className=\"w-3 h-3 mr-2 text-slate-400\" />\n                              {customer?.phone || customer?.mobile || 'No phone'}\n                            </div>\n                          </div>\n                        </td>\n\n                        {/* Batch & Saving Plan */}\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex flex-col space-y-1.5\">\n                            {customer?.batch && (\n                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border w-fit ${customer.batch === 'Batch 1'\n                                ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20'\n                                : 'bg-purple-500/10 text-purple-400 border-purple-500/20'\n                                }`}>\n                                <div className={`w-1 h-1 rounded-full mr-1.5 ${customer.batch === 'Batch 1' ? 'bg-emerald-400' : 'bg-purple-400'}`} />\n                                {customer.batch}\n                              </span>\n                            )}\n                            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20 w-fit\">\n                              <div className=\"w-1 h-1 rounded-full mr-1.5 bg-blue-400\" />\n                              â‚¹1000 Ã— 20 Months\n                            </span>\n                          </div>\n                        </td>\n\n                        {/* Status */}\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium capitalize border ${(customer.status || 'active') === 'active'\n                            ? 'bg-green-500/10 text-green-400 border-green-500/20'\n                            : 'bg-red-500/10 text-red-400 border-red-500/20'\n                            }`}>\n                            <span className={`w-1.5 h-1.5 rounded-full mr-2 ${(customer.status || 'active') === 'active' ? 'bg-green-400' : 'bg-red-400'\n                              }`}></span>\n                            {customer.status || 'Active'}\n                          </span>\n                        </td>\n\n\n\n\n\n                        {/* Actions */}\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                          <div className=\"flex items-center justify-end space-x-2\">\n                            {/* Payment Management Button */}\n                            <button\n                              onClick={() => openPaymentManager(customer)}\n                              className=\"text-green-400 hover:text-green-300 transition-colors p-2 hover:bg-green-500/10 rounded cursor-pointer\"\n                              title=\"Manage Payments\"\n                            >\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n                              </svg>\n                            </button>\n\n                            {/* Request Repayment Button */}\n                            <button\n                              onClick={() => {\n                                // Reset customer-specific state before fetching\n                                setCustomerDetails(null);\n                                setSavingPlan(null);\n                                setUnpaidMonths([]);\n\n                                setSelectedCustomerForRepayment(customer);\n                                fetchCustomerDetails(customer.id);\n                                setRemarks('');\n                                document.getElementById('request_modal').showModal();\n                              }}\n                              className=\"text-orange-400 hover:text-orange-300 transition-colors p-2 hover:bg-orange-500/10 rounded cursor-pointer\"\n                              title=\"Request Repayment\"\n                            >\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H8m8 8l-4-4m0 0l4 4\" />\n                              </svg>\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n\n          {/* Create Customer Modal */}\n          {showCreateModal && (\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n              <div className=\"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-orange-400/30 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl\">\n                {/* Header */}\n                <div className=\"bg-gradient-to-r from-orange-500/20 to-red-500/20 p-6 border-b border-orange-400/30\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center shadow-lg\">\n                      <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 00-4-4H4a4 4 0 00-4 4v8a4 4 0 004 4h8a4 4 0 004-4v8a4 4 0 004-4z\" />\n                      </svg>\n                    </div>\n                    <div className=\"ml-4\">\n                      <h2 className=\"text-2xl font-bold text-white\">Create New Customer</h2>\n                      <p className=\"text-orange-100 text-sm\">Add a new customer to your network (1 PIN required)</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-6\">\n                  <UnifiedCustomerForm\n                    isOpen={showCreateModal}\n                    onClose={closeCreateModal}\n                    onSubmit={handleCreateCustomer}\n                    onCancel={closeCreateModal}\n                    promoters={[{\n                      id: user.id,\n                      name: user.name,\n                      promoter_id: user.promoter_id,\n                      role: user.role\n                    }]} // Pass current promoter as the only option\n                    availablePins={availablePins}\n                    currentUserRole=\"promoter\"\n                    isEditing={!!editingCustomer}\n                    initialData={editingCustomer}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Payment Manager Modal */}\n          {showPaymentManager && selectedCustomerForPayments?.id && (\n            <PaymentManager\n              customerId={selectedCustomerForPayments.id}\n              customerName={selectedCustomerForPayments.name}\n              isOpen={showPaymentManager}\n              onClose={closePaymentManager}\n              currentUser={user}\n            />\n          )}\n\n          {/* Request Repayment Modal - Exact Copy from RepaymentDashboard */}\n          <dialog id=\"request_modal\" className=\"modal backdrop-blur-sm\" onClick={(e) => {\n            // Only close if clicking directly on the backdrop (outside modal content)\n            if (e.target === e.currentTarget) {\n              e.currentTarget.close();\n              // Reset form state\n              setSelectedCustomerForRepayment(null);\n              setCustomerDetails(null);\n              setSavingPlan(null);\n              setUnpaidMonths([]);\n              setSelectedMonth(1); // Reset to Month 1\n              setRemarks('');\n            }\n          }}>\n            <div className=\"modal-box bg-gradient-to-br from-slate-800 to-slate-900 border border-orange-400/30 max-w-2xl shadow-2xl transform transition-all duration-300 scale-95 hover:scale-100\" onClick={(e) => e.stopPropagation()}>\n              {/* Header */}\n              <div className=\"bg-gradient-to-r from-orange-600/90 to-red-600/90 p-6 border-b border-orange-400/30 rounded-t-xl\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-14 h-14 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center shadow-lg transform transition-transform hover:rotate-6\">\n                    <svg className=\"w-7 h-7 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </div>\n                  <div className=\"ml-4\">\n                    <h3 className=\"text-2xl font-bold text-white\">Request Repayment</h3>\n                    <p className=\"text-orange-100 text-sm\">Submit repayment request for customer</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"p-6 space-y-6\">\n                {/* Customer Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-slate-300\">\n                    Select Customer\n                  </label>\n                  <select\n                    className=\"select select-bordered w-full bg-slate-800/50 border-slate-700/50 text-white focus:border-orange-500 focus:ring-orange-500\"\n                    value={selectedCustomerForRepayment?.id || ''}\n                    onChange={(e) => {\n                      const customer = filteredCustomers.find(c => c.id === e.target.value);\n                      // Reset customer-specific state\n                      setCustomerDetails(null);\n                      setSavingPlan(null);\n                      setUnpaidMonths([]);\n\n                      setSelectedCustomerForRepayment(customer);\n                      if (customer) {\n                        fetchCustomerDetails(customer.id);\n                      }\n                    }}\n                    disabled={isFetchingCustomer}\n                  >\n                    <option value=\"\">Select a customer</option>\n                    {filteredCustomers.map((customer) => (\n                      <option key={customer.id} value={customer.id}>\n                        {customer.name} ({customer.customer_id || 'No ID'})\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Loading State */}\n                {isFetchingCustomer && (\n                  <div className=\"flex items-center justify-center p-4\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500\"></div>\n                  </div>\n                )}\n\n                {/* Customer Details */}\n                {selectedCustomerForRepayment && (\n                  <div className=\"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm text-slate-400\">Customer Name</p>\n                        <p className=\"text-white font-medium\">{selectedCustomerForRepayment.name}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-slate-400\">Customer ID</p>\n                        <p className=\"text-blue-400 font-mono\">#{selectedCustomerForRepayment.customer_id || 'N/A'}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-slate-400\">Phone</p>\n                        <p className=\"text-white\">{selectedCustomerForRepayment.phone || 'N/A'}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-slate-400\">KYC Status</p>\n                        <span className={`text-xs px-2 py-1 rounded-full ${selectedCustomerForRepayment.kyc_status === 'approved'\n                          ? 'bg-green-500/20 text-green-300'\n                          : 'bg-yellow-500/20 text-yellow-300'\n                          }`}>\n                          {selectedCustomerForRepayment.kyc_status === 'approved' ? 'Verified' : 'Pending KYC'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Saving Plan Details */}\n                {savingPlan && (\n                  <div className=\"bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-xl p-4 border border-blue-500/20\">\n                    <h4 className=\"text-sm font-medium text-blue-300 mb-2\">SAVING PLAN</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div>\n                        <p className=\"text-xs text-slate-400\">Monthly Amount</p>\n                        <p className=\"text-white font-medium\">â‚¹{savingPlan.monthly_amount?.toLocaleString() || 'N/A'}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-slate-400\">Duration</p>\n                        <p className=\"text-white\">{savingPlan.duration_months || 'N/A'} months</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-slate-400\">Maturity Amount</p>\n                        <p className=\"text-white font-medium\">\n                          â‚¹{savingPlan.maturity_amount?.toLocaleString() || 'N/A'}\n                        </p>\n                      </div>\n                    </div>\n                    {savingPlan.description && (\n                      <p className=\"text-xs text-slate-400 mt-2\">{savingPlan.description}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Month Selection */}\n                {unpaidMonths.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium text-slate-300\">\n                      Select Month for Repayment\n                    </label>\n                    <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2\">\n                      {unpaidMonths.map((month) => (\n                        <button\n                          key={month}\n                          type=\"button\"\n                          onClick={() => setSelectedMonth(month.toString())}\n                          className={`py-2 px-3 rounded-lg text-center border transition-colors ${selectedMonth === month.toString()\n                            ? 'bg-orange-600 border-orange-500 text-white'\n                            : 'bg-slate-800/50 border-slate-700/50 text-slate-300 hover:border-orange-500/50'\n                            }`}\n                        >\n                          Month {month}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* No Unpaid Months Message */}\n                {selectedCustomerForRepayment && !isFetchingCustomer && unpaidMonths.length === 0 && (\n                  <div className=\"bg-yellow-900/20 border border-yellow-800/50 text-yellow-400 p-4 rounded-lg text-center\">\n                    <p className=\"font-medium\">No pending repayments found.</p>\n                    <p className=\"text-xs mt-1 opacity-80\">This customer either has no payment schedule or all 20 months are marked as paid.</p>\n                  </div>\n                )}\n\n                {/* Remarks */}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-slate-300\">\n                    Additional Notes (Optional)\n                  </label>\n                  <textarea\n                    className=\"w-full bg-slate-800/50 border border-slate-700/50 rounded-lg p-3 text-white placeholder-slate-400 focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                    rows={3}\n                    placeholder=\"Add any additional information about this payment...\"\n                    value={remarks}\n                    onChange={(e) => setRemarks(e.target.value)}\n                  ></textarea>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex justify-end pt-4 space-x-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      document.getElementById('request_modal').close();\n                      // Reset form state\n                      setSelectedCustomerForRepayment(null);\n                      setCustomerDetails(null);\n                      setSavingPlan(null);\n                      setUnpaidMonths([]);\n                      setSelectedMonth(1); // Reset to Month 1\n                      setRemarks('');\n                    }}\n                    className=\"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors\"\n                    disabled={isSubmittingRepayment}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleRepaymentRequest}\n                    disabled={isSubmittingRepayment || !selectedCustomerForRepayment?.id || !selectedMonth || unpaidMonths.length === 0}\n                    className=\"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n                  >\n                    {isSubmittingRepayment ? (\n                      <>\n                        <Loader2 className=\"animate-spin -ml-1 mr-2 h-4 w-4\" />\n                        Submitting...\n                      </>\n                    ) : (\n                      'Submit Request'\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </dialog>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default PromoterCustomers;\n","export const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CreditCard\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHg9IjIiIHk9IjUiIHJ4PSIyIiAvPgogIDxsaW5lIHgxPSIyIiB4Mj0iMjIiIHkxPSIxMCIgeTI9IjEwIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/credit-card\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CreditCard = createLucideIcon('CreditCard', [\n  [\n    'rect',\n    { width: '20', height: '14', x: '2', y: '5', rx: '2', key: 'ynyp8z' },\n  ],\n  ['line', { x1: '2', x2: '22', y1: '10', y2: '10', key: '1b3vmo' }],\n]);\n\nexport default CreditCard;\n"],"names":["createCustomer","customerData","parentPromoterId","response","fetch","concat","API_URL","method","headers","body","JSON","stringify","_objectSpread","data","json","ok","success","Error","message","error","console","updateCustomer","customerId","deleteCustomer","getCustomerById","getAllCustomers","promoterId","arguments","length","undefined","url","Plus","createLucideIcon","d","key","SUPABASE_URL","process","SUPABASE_SERVICE_ROLE_KEY","createClient","auth","autoRefreshToken","persistSession","MultiStageLoading","_ref","stage","content","getStageContent","icon","_jsx","Users","className","title","description","CreditCard","CheckCircle","AlertCircle","Loader2","_jsxs","children","_savingPlan$monthly_a","_savingPlan$maturity_","user","useAuth","showSuccess","showError","useNavigate","useUnifiedToast","customers","setCustomers","useState","filteredCustomers","setFilteredCustomers","searchTerm","setSearchTerm","statusFilter","setStatusFilter","batchFilter","setBatchFilter","paymentMonthFilter","setPaymentMonthFilter","sortBy","setSortBy","loading","setLoading","loadingStage","setLoadingStage","showPaymentManager","setShowPaymentManager","selectedCustomerForPayments","setSelectedCustomerForPayments","showDownloadMenu","setShowDownloadMenu","customerPayments","setCustomerPayments","downloadButtonRef","useRef","downloadMenuPosition","setDownloadMenuPosition","top","right","availablePins","setAvailablePins","showCreateModal","setShowCreateModal","editingCustomer","setEditingCustomer","showRepaymentModal","setShowRepaymentModal","selectedCustomerForRepayment","setSelectedCustomerForRepayment","selectedMonth","setSelectedMonth","selectedYear","setSelectedYear","Date","getFullYear","remarks","setRemarks","isSubmittingRepayment","setIsSubmittingRepayment","pendingRequests","setPendingRequests","paymentStatus","setPaymentStatus","customerDetails","setCustomerDetails","savingPlan","setSavingPlan","unpaidMonths","setUnpaidMonths","isFetchingCustomer","setIsFetchingCustomer","useEffect","filtered","filter","customer","name","toLowerCase","emailValue","email","phoneValue","phone","mobile","String","trim","customer_id","searchLower","includes","status","monthNumber","parseInt","payment","id","find","p","month_number","batch","sort","a","b","getNumericPart","match","dateA","created_at","getTime","loadPromoterPins","useCallback","async","supabase","from","select","eq","single","code","pins","loadCustomers","order","ascending","loadCustomerPayments","log","paymentsRes","requestsRes","Promise","all","rpc","p_promoter_id","allPayments","requests","paymentsMap","statusMap","requestsMap","forEach","push","request","month","year","Object","values","s","closeCreateModal","fetchCustomerDetails","result","p_customer_id","profile","payments","saving_plan","monthlyAmount","durationMonths","monthly_amount","duration_months","maturity_amount","warn","paidMonths","_p$status","map","unpaid","Array","_","i","toString","getPromoterName","parent_promoter_id","_Fragment","onClick","document","getElementById","showModal","openCreateModal","disabled","fill","viewBox","fillRule","clipRule","style","overflow","stroke","strokeLinecap","strokeLinejoin","strokeWidth","type","placeholder","value","onChange","e","target","ref","current","rect","getBoundingClientRect","bottom","window","innerWidth","Download","createPortal","minWidth","handleDownloadPDF","dataToExport","toLocaleDateString","exportToPDF","toISOString","split","handleDownloadCSV","exportToCSV","scope","charAt","Mail","Phone","openPaymentManager","UnifiedCustomerForm","isOpen","onClose","onSubmit","customerService","formData","cardNo","onCancel","promoters","promoter_id","role","currentUserRole","isEditing","initialData","PaymentManager","customerName","closePaymentManager","currentUser","currentTarget","close","stopPropagation","xmlns","c","kyc_status","toLocaleString","rows","monthNum","rpcError","p_month","p_year","p_remarks","requestKey","prev","width","height","x","y","rx","x1","x2","y1","y2"],"sourceRoot":""}