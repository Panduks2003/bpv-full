"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[603],{1065:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2603:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var r=s(5043),a=s(6621),l=s(1921),n=s(3959),c=s(3792),d=s(2938),i=s(917),x=s(3458),m=s(9120),o=s(1065),h=s(579);const u=function(){const{user:e}=(0,a.As)(),{showSuccess:t,showError:s}=(0,l.L5)();(0,n.r9)();const[u,p]=(0,r.useState)([]),[g,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{b()},[e]);const b=async()=>{try{y(!0);const{data:t,error:s}=await c.ND.from("customer_payments").select("*").eq("customer_id",e.id).order("month_number",{ascending:!0});if(s)throw s;p(t||[])}catch(t){s("Failed to load payment history: "+t.message)}finally{y(!1)}},j=e=>{switch(e){case"paid":return(0,h.jsx)(i.A,{className:"w-5 h-5 text-green-400"});case"unpaid":return(0,h.jsx)(o.A,{className:"w-5 h-5 text-red-400"});case"pending":return(0,h.jsx)(x.A,{className:"w-5 h-5 text-yellow-400"});default:return(0,h.jsx)(x.A,{className:"w-5 h-5 text-gray-400"})}},f=e=>{switch(e){case"paid":return"bg-green-500/20 text-green-300 border-green-500/30";case"unpaid":return"bg-red-500/20 text-red-300 border-red-500/30";case"pending":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}},N={total:u.length,paid:u.filter(e=>"paid"===e.status).length,pending:u.filter(e=>"pending"===e.status).length,unpaid:u.filter(e=>"unpaid"===e.status).length,totalAmount:u.reduce((e,t)=>e+(t.payment_amount||0),0)};return g?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.wE,{}),(0,h.jsx)(n.dQ,{children:(0,h.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-400"})})})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.wE,{}),(0,h.jsx)(n.dQ,{children:(0,h.jsx)("div",{className:"min-h-screen pt-24 px-8 pb-8",children:(0,h.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Payment History"}),(0,h.jsx)("p",{className:"text-gray-400",children:"View and manage your payment records"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[(0,h.jsx)(n.Xg,{className:"bg-gradient-to-br from-blue-700/30 to-blue-800/30 border border-blue-500/20",children:(0,h.jsxs)("div",{className:"p-3 text-center",children:[(0,h.jsx)("div",{className:"w-6 h-6 bg-blue-500/30 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,h.jsx)(d.A,{className:"w-3 h-3 text-blue-300"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-white mb-1",children:N.total}),(0,h.jsx)("p",{className:"text-blue-200 text-xs",children:"Total Months"})]})}),(0,h.jsx)(n.Xg,{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-500/20",children:(0,h.jsxs)("div",{className:"p-3 text-center",children:[(0,h.jsx)("div",{className:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,h.jsx)(i.A,{className:"w-3 h-3 text-green-300"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-white mb-1",children:N.paid}),(0,h.jsx)("p",{className:"text-green-200 text-xs",children:"Paid Months"})]})}),(0,h.jsx)(n.Xg,{className:"bg-gradient-to-br from-yellow-700/30 to-yellow-800/30 border border-yellow-500/20",children:(0,h.jsxs)("div",{className:"p-3 text-center",children:[(0,h.jsx)("div",{className:"w-6 h-6 bg-yellow-500/30 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,h.jsx)(x.A,{className:"w-3 h-3 text-yellow-300"})}),(0,h.jsx)("h3",{className:"text-sm font-bold text-white mb-1",children:N.pending}),(0,h.jsx)("p",{className:"text-yellow-200 text-xs",children:"Pending Months"})]})}),(0,h.jsx)(n.Xg,{className:"bg-gradient-to-br from-purple-700/30 to-purple-800/30 border border-purple-500/20",children:(0,h.jsxs)("div",{className:"p-3 text-center",children:[(0,h.jsx)("div",{className:"w-6 h-6 bg-purple-500/30 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,h.jsx)(m.A,{className:"w-3 h-3 text-purple-300"})}),(0,h.jsxs)("h3",{className:"text-sm font-bold text-white mb-1",children:["\u20b9",N.totalAmount.toLocaleString()]}),(0,h.jsx)("p",{className:"text-purple-200 text-xs",children:"Total Amount"})]})})]}),(0,h.jsx)(n.Xg,{children:(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full",children:[(0,h.jsx)("thead",{className:"bg-gray-700",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Month"}),(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"})]})}),(0,h.jsx)("tbody",{className:"divide-y divide-gray-700",children:0===u.length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"3",className:"px-6 py-12 text-center text-gray-400",children:"No payment records found"})}):u.map(e=>(0,h.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-400 to-blue-500 rounded-full flex items-center justify-center mr-3",children:(0,h.jsx)("span",{className:"text-white text-sm font-bold",children:e.month_number})}),(0,h.jsxs)("span",{className:"text-white font-medium",children:["Month ",e.month_number]})]})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,h.jsxs)("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-all ".concat(f(e.status)),children:[j(e.status),(0,h.jsx)("span",{className:"ml-2 capitalize",children:e.status})]})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(0,h.jsx)("span",{className:"font-medium text-white",children:e.payment_amount?"\u20b9".concat(e.payment_amount.toLocaleString()):"N/A"})})]},e.id))})]})})})]})})})]})}},2938:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9120:(e,t,s)=>{s.d(t,{A:()=>r});const r=(0,s(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}}]);
//# sourceMappingURL=603.1a246c58.chunk.js.map