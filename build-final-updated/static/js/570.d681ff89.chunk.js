"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[570],{98:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},622:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},1754:(e,a,t)=>{t.d(a,{YB:()=>p,cU:()=>d});t(5043);var s=t(579);const r="rgba(247, 147, 30, 0.1)",l="rgba(255, 255, 255, 0.05)",i="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(l," 25%,\n      ").concat(r," 50%,\n      ").concat(l," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=i,document.head.appendChild(e)}const o=e=>{let{width:a="100%",height:t="1rem",className:r="",rounded:i="rounded-lg",animate:o=!0}=e;return(0,s.jsx)("div",{className:"".concat(i," border border-white/10 ").concat(o?"bp-skeleton-shimmer":""," ").concat(r),style:{width:a,height:t,background:o?void 0:l}})},n=e=>{let{className:a=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(o,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,s.jsx)(o,{width:"3rem",height:"2rem"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o,{width:"70%",height:"1rem"}),(0,s.jsx)(o,{width:"90%",height:"0.75rem"})]})]})},d=e=>{let{rows:a=5,columns:t=4,className:r=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(r),children:[(0,s.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,s.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,a)=>(0,s.jsx)(o,{width:"80%",height:"1rem"},a))})}),(0,s.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:a}).map((e,a)=>(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,a)=>(0,s.jsx)(o,{width:0===a?"90%":"70%",height:"1rem"},a))})},a))})]})},c=e=>{let{count:a=2,className:t=""}=e;return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ".concat(t),children:Array.from({length:a}).map((e,a)=>(0,s.jsx)(n,{},a))})},m=e=>{let{count:a=4,className:t=""}=e;return(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 ".concat(t),children:Array.from({length:a}).map((e,a)=>(0,s.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-5 h-full",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(o,{width:"3.5rem",height:"3.5rem",rounded:"rounded-xl",className:"mx-auto"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o,{width:"70%",height:"1rem",className:"mx-auto"}),(0,s.jsx)(o,{width:"90%",height:"0.75rem",className:"mx-auto"})]})]})},a))})},h=e=>{let{className:a=""}=e;return(0,s.jsxs)("div",{className:"text-center mb-6 ".concat(a),children:[(0,s.jsx)(o,{width:"4rem",height:"4rem",rounded:"rounded-2xl",className:"mx-auto mb-4"}),(0,s.jsx)(o,{width:"15rem",height:"2rem",className:"mx-auto mb-2"}),(0,s.jsx)(o,{width:"20rem",height:"1rem",className:"mx-auto"})]})},x=e=>{let{className:a=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6 ".concat(a),children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(o,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"}),(0,s.jsx)(o,{width:"6rem",height:"2.5rem",rounded:"rounded-lg"})]})]})},u=e=>{let{className:a=""}=e;return(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(a),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o,{width:"8rem",height:"1rem"}),(0,s.jsx)(o,{width:"6rem",height:"0.75rem"})]}),(0,s.jsx)(o,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o,{width:"4rem",height:"0.75rem"}),(0,s.jsx)(o,{width:"6rem",height:"0.75rem"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o,{width:"5rem",height:"0.75rem"}),(0,s.jsx)(o,{width:"7rem",height:"0.75rem"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,s.jsx)(o,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,s.jsx)(o,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},p=e=>{let{type:a="dashboard"}=e;switch(a){case"dashboard":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(h,{}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o,{width:"10rem",height:"1.5rem",className:"mb-4"}),(0,s.jsx)(c,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(o,{width:"12rem",height:"1.5rem",className:"mb-4"}),(0,s.jsx)(m,{})]})]})]})});case"table":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(h,{}),(0,s.jsx)(x,{}),(0,s.jsx)(d,{rows:8,columns:5})]})});case"cards":return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsx)(h,{}),(0,s.jsx)(x,{}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,a)=>(0,s.jsx)(u,{},a))})]})});default:return(0,s.jsx)(p,{type:"dashboard"})}}},3395:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},5722:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6487:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},6950:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]])},7486:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},7570:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var s=t(9379),r=t(5043),l=t(3216),i=t(6621),o=t(1921),n=t(3959),d=t(1754),c=t(3792),m=t(3848),h=t(3395),x=t(7486),u=t(5722),p=t(9120),g=t(98),b=t(6950),v=t(9213),y=t(4068),j=t(6487),w=t(622),f=t(8112),N=t(579);const k=function(){const{user:e}=(0,i.As)(),{showSuccess:a,showError:t}=(0,o.L5)(),k=(0,l.Zp)();(0,n.r9)();const[A,C]=(0,r.useState)({totalPromoters:0,activePromoters:0,totalCustomers:0,totalRevenue:0,totalPins:0,usedPins:0,activeWithdrawals:0,pendingWithdrawals:0,totalCommissions:0,pendingCommissions:0,pendingKYC:0,batch1Count:0,batch2Count:0}),[P,_]=(0,r.useState)(!0),M=(0,r.useCallback)(async()=>{performance.now();try{var a,r,l;m.Ay.info("Loading admin dashboard data",{userId:null===e||void 0===e?void 0:e.id}),_(!0);const[t,i]=await Promise.all([c.ND.from("profiles").select("id, status").eq("role","promoter"),c.ND.from("profiles").select("id").eq("role","customer")]),o=(null===(a=t.data)||void 0===a?void 0:a.length)||0,n=(null===(r=t.data)||void 0===r?void 0:r.filter(e=>"Active"===e.status||"active"===e.status).length)||0,d=(null===(l=i.data)||void 0===l?void 0:l.length)||0;C({totalPromoters:o,activePromoters:n,totalCustomers:d,totalRevenue:0,totalPins:0,usedPins:0,activeWithdrawals:0,pendingWithdrawals:0,totalCommissions:0,pendingCommissions:0,pendingKYC:0}),setTimeout(async()=>{try{const[e,a,t,r,l,i]=await Promise.all([c.ND.rpc("get_pin_stats"),c.ND.rpc("get_withdrawal_stats"),c.ND.rpc("get_commission_stats"),c.ND.from("kyc_submissions").select("id",{count:"exact",head:!0}).eq("status","Pending"),c.ND.from("profiles").select("id",{count:"exact",head:!0}).eq("role","customer").or("batch.eq.Batch 1,batch.is.null"),c.ND.from("profiles").select("id",{count:"exact",head:!0}).eq("role","customer").eq("batch","Batch 2")]);C(o=>{var n,d,c,m,h,x,u;return(0,s.A)((0,s.A)({},o),{},{totalRevenue:(null===(n=t.data)||void 0===n?void 0:n.total_revenue)||0,totalPins:(null===(d=e.data)||void 0===d?void 0:d.total_pins)||0,usedPins:(null===(c=e.data)||void 0===c?void 0:c.used_pins)||0,activeWithdrawals:(null===(m=a.data)||void 0===m?void 0:m.active_withdrawals)||0,pendingWithdrawals:(null===(h=a.data)||void 0===h?void 0:h.pending_withdrawals)||0,totalCommissions:(null===(x=t.data)||void 0===x?void 0:x.total_commissions)||0,pendingCommissions:(null===(u=t.data)||void 0===u?void 0:u.pending_commissions)||0,pendingKYC:r.count||0,batch1Count:l.count||0,batch2Count:i.count||0})})}catch(a){m.Ay.error("Error loading background dashboard data",{error:a,userId:null===e||void 0===e?void 0:e.id})}},300)}catch(i){m.Ay.error("Error loading dashboard data",{error:i,userId:null===e||void 0===e?void 0:e.id}),t("Failed to load dashboard data")}finally{_(!1)}},[null===e||void 0===e?void 0:e.id,t]);return(0,r.useEffect)(()=>{if(null!==e&&void 0!==e&&e.id){M();const e=setInterval(M,3e5);return()=>clearInterval(e)}},[e,M]),P?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.wE,{}),(0,N.jsx)(n.dQ,{minHeight:"min-h-screen",children:(0,N.jsx)(d.YB,{type:"dashboard"})})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("style",{children:"\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translateY(30px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        [data-animate] { animation: fadeInUp 0.6s ease-out; }\n      "}),(0,N.jsx)(n.wE,{}),(0,N.jsx)(n.dQ,{minHeight:"min-h-screen",className:"flex flex-col",children:(0,N.jsxs)("div",{className:"relative flex-1",children:[(0,N.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,N.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 via-transparent to-yellow-500/5"}),(0,N.jsx)("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-400/5 rounded-full filter blur-3xl animate-pulse"})]}),(0,N.jsxs)("div",{className:"relative max-w-6xl mx-auto px-6 pt-36 pb-8",children:[(0,N.jsx)("div",{className:"mb-6","data-animate":!0,children:(0,N.jsxs)("div",{className:"flex flex-col space-y-0.5",children:[(0,N.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,N.jsx)("span",{className:"px-2 py-0.5 bg-orange-500/10 border border-orange-500/20 rounded text-orange-400 text-[9px] font-black uppercase tracking-widest",children:"System Online"}),(0,N.jsx)("div",{className:"h-px flex-1 bg-slate-800/30"})]}),(0,N.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("h2",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em]",children:"Administrator Dashboard"}),(0,N.jsx)("h1",{className:"text-3xl font-black text-white tracking-tighter",children:"Command Center"})]}),(0,N.jsx)("button",{onClick:M,className:"p-2.5 bg-slate-800/40 hover:bg-slate-700/60 border border-slate-700/50 rounded-xl transition-all group shadow-lg",title:"Refresh Live Metrics",children:(0,N.jsx)(y.A,{className:"w-4 h-4 text-orange-400 group-hover:rotate-180 transition-transform duration-700"})})]})]})}),(0,N.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8","data-animate":!0,children:[{label:"Total Promoters",value:A.totalPromoters,color:"text-orange-400",border:"hover:border-orange-500/50",icon:f.A,route:"/admin/promoters"},{label:"Total Customers",value:A.totalCustomers,color:"text-blue-400",border:"hover:border-blue-500/50",icon:w.A,route:"/admin/customers"},{label:"Batch 1",value:A.batch1Count,color:"text-emerald-400",border:"hover:border-emerald-500/50",icon:h.A,route:"/admin/customers?batch=Batch 1"},{label:"Batch 2",value:A.batch2Count,color:"text-purple-400",border:"hover:border-purple-500/50",icon:b.A,route:"/admin/customers?batch=Batch 2"}].map((e,a)=>(0,N.jsxs)(n.Xg,{className:"group relative overflow-hidden p-6 border border-slate-700/40 ".concat(e.border," bg-slate-900/60 backdrop-blur-xl transition-all duration-300 transform hover:-translate-y-1"),onClick:()=>{return a=e.route,void k(a);var a},children:[(0,N.jsxs)("div",{className:"relative z-10 flex flex-col",children:[(0,N.jsx)("span",{className:"".concat(e.color," text-[9px] font-black uppercase tracking-widest mb-1 opacity-80"),children:e.label}),(0,N.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,N.jsx)("span",{className:"text-3xl font-black text-white tracking-tighter",children:e.value}),(0,N.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500/50 animate-pulse"})]})]}),(0,N.jsx)(e.icon,{className:"absolute -right-2 -bottom-2 w-16 h-16 ".concat(e.color," opacity-[0.02] group-hover:opacity-[0.06] transition-all duration-500 transform group-hover:scale-110")})]},a))}),(0,N.jsxs)("div",{className:"mt-6","data-animate":!0,children:[(0,N.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,N.jsx)("div",{className:"w-1 h-6 bg-gradient-to-b from-orange-500 to-red-600 rounded-full"}),(0,N.jsx)("h2",{className:"text-lg font-black text-white tracking-tight uppercase",children:"Administrative Tools"})]}),(0,N.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Promoters",icon:f.A,route:"/admin/promoters",color:"orange"},{label:"Customers",icon:w.A,route:"/admin/customers",color:"blue"},{label:"Pin Mgmt",icon:v.A,route:"/admin/pins",color:"purple"},{label:"KYC Sync",icon:g.A,route:"/admin/approval?tab=kyc",color:"yellow"},{label:"Bank Approvals",icon:x.A,route:"/admin/approval?tab=bank",color:"emerald"},{label:"Income",icon:p.A,route:"/admin/income",color:"emerald"},{label:"Withdrawal",icon:u.A,route:"/admin/withdrawals",color:"green"},{label:"Repayment",icon:j.A,route:"/admin/repayments",color:"indigo"}].map((e,a)=>(0,N.jsxs)("div",{className:"group cursor-pointer transition-all duration-300 border border-slate-700/40 hover:border-orange-500/40 bg-slate-900/60 p-5 rounded-3xl hover:shadow-xl hover:shadow-orange-500/5 flex flex-col items-center text-center space-y-3",onClick:()=>k(e.route),children:[(0,N.jsx)("div",{className:"w-12 h-12 bg-orange-500/10 rounded-xl flex items-center justify-center group-hover:bg-orange-500 group-hover:rotate-3 transition-all duration-300 shadow-inner",children:(0,N.jsx)(e.icon,{className:"w-6 h-6 text-orange-400 group-hover:text-white transition-colors duration-300"})}),(0,N.jsx)("h3",{className:"text-[10px] font-black text-white tracking-wider uppercase opacity-80 group-hover:opacity-100",children:e.label})]},a))})]})]})]})})]})}},8112:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9120:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9213:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(3797).A)("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]])}}]);
//# sourceMappingURL=570.d681ff89.chunk.js.map