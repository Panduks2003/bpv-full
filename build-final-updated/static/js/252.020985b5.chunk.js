"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[252],{2252:(e,s,t)=>{t.r(s),t.d(s,{default:()=>C});var r=t(5043),a=t(6621),n=t(1921),l=t(3216),i=t(5229),d=t(254),c=t(9213);t(5275);(0,t(3797).A)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var o=t(3458),x=t(1065),m=t(917),h=t(987),u=t(579);var p=t(9379),g=t(2699),j=t(430),N=t(3959);const f=e=>{let{isOpen:s,onClose:t,promoterId:a,onSuccess:n,onError:l}=e;const[i,o]=(0,r.useState)({requestedPins:"",reason:""}),[x,m]=(0,r.useState)({}),[f,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&a&&v()},[s,a]);const v=async()=>{try{const e=await d.Ay.hasPendingRequests(a);y(e)}catch(e){console.error("Failed to check pending requests:",e)}};return s?(0,u.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,u.jsxs)(N.Xg,{className:"w-full max-w-lg bg-gradient-to-br from-slate-800 to-slate-900 border border-orange-400/30 shadow-2xl",children:[(0,u.jsx)("div",{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 p-6 border-b border-orange-400/30",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center shadow-lg",children:(0,u.jsx)(c.A,{className:"w-6 h-6 text-white"})}),(0,u.jsxs)("div",{className:"ml-4",children:[(0,u.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Request PINs"}),(0,u.jsx)("p",{className:"text-orange-100 text-sm",children:"Request additional PINs from admin for customer creation"})]})]})}),(0,u.jsxs)("div",{className:"p-6",children:[w&&(0,u.jsx)("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(h.A,{className:"w-5 h-5 text-yellow-400 mt-0.5 flex-shrink-0"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-yellow-300 text-sm font-medium",children:"Pending Request Found"}),(0,u.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:"You already have a pending PIN request. Please wait for admin approval before submitting a new request."})]})]})}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=d.Ay.validatePinRequest(parseInt(i.requestedPins),i.reason);if(!e.isValid){const s={};return e.errors.forEach(e=>{e.includes("PINs must be greater")||e.includes("more than 1000")?s.requestedPins=e:e.includes("Reason")&&(s.reason=e)}),m(s),!1}return m({}),!0})())if(w)l("You already have a pending PIN request. Please wait for admin approval.");else{b(!0);try{await d.Ay.submitPinRequest(a,parseInt(i.requestedPins),i.reason||null);n("PIN Request Submitted Successfully!\n\nRequested PINs: ".concat(i.requestedPins,"\nStatus: Pending Admin Approval\n\nYour request will appear in the PIN Requests list with a sequential ID.")),o({requestedPins:"",reason:""}),m({}),t()}catch(s){console.error("PIN request submission failed:",s),l("Failed to Submit PIN Request\n\nError: ".concat(s.message))}finally{b(!1)}}},className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)(c.A,{className:"w-4 h-4 mr-1 text-orange-400"}),"Number of PINs ",(0,u.jsx)("span",{className:"text-red-400",children:"*"})]})}),(0,u.jsx)("input",{type:"number",min:"1",max:"1000",value:i.requestedPins,onChange:e=>o((0,p.A)((0,p.A)({},i),{},{requestedPins:e.target.value})),placeholder:"Enter quantity (e.g., 10)",disabled:f||w,className:"w-full px-4 py-3 bg-slate-800/50 border border-slate-600/50 text-white rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-400 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),x.requestedPins&&(0,u.jsx)("p",{className:"text-red-400 text-xs mt-1",children:x.requestedPins}),(0,u.jsx)("p",{className:"text-slate-400 text-xs mt-1",children:"Request between 1-1000 PINs"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-slate-300 text-sm font-medium mb-2",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("svg",{className:"w-4 h-4 mr-1 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v10a2 2 0 002 2h5a2 2 0 002 2V7a2 2 0 00-2-2z"})}),"Purpose/Reason ",(0,u.jsx)("span",{className:"text-slate-500",children:"(Optional)"})]})}),(0,u.jsx)("textarea",{value:i.reason,onChange:e=>o((0,p.A)((0,p.A)({},i),{},{reason:e.target.value})),placeholder:"Explain why you need additional PINs (optional but encouraged)",rows:4,maxLength:500,disabled:f||w,className:"w-full bg-slate-800/50 border border-slate-600/50 text-white rounded-lg p-4 focus:ring-2 focus:ring-orange-500 focus:border-orange-400 transition-all resize-none"}),x.reason&&(0,u.jsx)("p",{className:"text-red-400 text-xs mt-1",children:x.reason}),(0,u.jsxs)("p",{className:"text-slate-400 text-xs mt-1",children:[i.reason.length,"/500 characters"]})]}),(0,u.jsx)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(g.A,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-blue-300 text-sm font-medium",children:"PIN Request Process"}),(0,u.jsx)("p",{className:"text-slate-300 text-sm mt-1",children:"Your request will be sent to admin for review. Once approved, requested PINs will be automatically allocated to your account and you'll receive a notification."})]})]})}),(0,u.jsxs)("div",{className:"flex justify-end space-x-3 pt-6",children:[(0,u.jsx)(N.Rq,{type:"button",variant:"secondary",onClick:()=>{f||(o({requestedPins:"",reason:""}),m({}),t())},disabled:f,className:"px-6 py-3 bg-slate-600 text-slate-300 rounded-lg hover:bg-slate-700 transition-all duration-200",children:"Cancel"}),(0,u.jsx)(N.Rq,{type:"submit",disabled:!i.requestedPins||f||w,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg hover:from-orange-600 hover:to-red-700 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-orange-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center",children:f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),(0,u.jsx)("span",{className:"ml-2",children:"Submitting..."})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.A,{className:"w-4 h-4"}),(0,u.jsx)("span",{children:"Submit Request"})]})})]})]})]})]})}):null};var b=t(98),w=t(2817),y=t(2938);const v=(0,r.memo)(e=>{let{requests:s,loading:t=!1,showPromoter:r=!1,emptyMessage:a="No PIN requests found",onApprove:n=null,onReject:l=null,showActions:i=!1}=e;const d=e=>{switch(e){case"pending":return(0,u.jsx)(o.A,{className:"w-4 h-4 text-yellow-400"});case"approved":return(0,u.jsx)(m.A,{className:"w-4 h-4 text-green-400"});case"rejected":return(0,u.jsx)(x.A,{className:"w-4 h-4 text-red-400"});default:return(0,u.jsx)(b.A,{className:"w-4 h-4 text-gray-400"})}},c=e=>{const s=e.statusConfig;return(0,u.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2.5 py-1 rounded-full text-xs font-medium border ".concat({yellow:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",green:"bg-green-500/20 text-green-400 border-green-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30",gray:"bg-gray-500/20 text-gray-400 border-gray-500/30"}[s.color]),children:[d(e.status),(0,u.jsxs)("span",{children:[s.emoji," ",s.label]})]})};return t?(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gray-800/50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Request ID"}),r&&(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"PINs"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reason"}),i&&(0,u.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:[1,2,3,4,5].map(e=>(0,u.jsxs)("tr",{className:"animate-pulse",children:[(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-20"})}),r&&(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-32"})}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-12"})}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-24"})}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-20"})}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-40"})}),i&&(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("div",{className:"h-4 bg-gray-700 rounded w-24"})})]},e))})]})}):0===s.length?(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)(b.A,{className:"w-16 h-16 text-gray-600 mb-4 mx-auto"}),(0,u.jsx)("p",{className:"text-gray-300 text-lg mb-2",children:a}),(0,u.jsx)("p",{className:"text-gray-400 text-sm",children:"PIN requests will appear here when submitted."})]}):(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gray-800/50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Request ID"}),r&&(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Promoter"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"PINs"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reason"}),r&&(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Admin Response"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:s.map(e=>(0,u.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.formattedRequestNumber})}),r&&(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)(w.A,{className:"w-4 h-4 text-gray-400"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium text-white",children:e.promoter_name||"Promoter"}),(0,u.jsx)("div",{className:"text-xs text-gray-400",children:e.promoter_email||"Email not available"})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("div",{className:"w-8 h-8 bg-orange-500/20 rounded-lg flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-orange-400 text-sm font-bold",children:e.requested_pins})}),(0,u.jsxs)("span",{className:"text-gray-300 text-sm",children:["PIN",e.requested_pins>1?"s":""]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:c(e)}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)(y.A,{className:"w-4 h-4 text-gray-400"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm text-white",children:e.formattedDate}),(0,u.jsx)("div",{className:"text-xs text-gray-400",children:e.formattedTime})]})]})}),(0,u.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs",children:(0,u.jsx)("div",{className:"truncate",title:e.reason||"No reason provided",children:e.reason||(0,u.jsx)("span",{className:"text-gray-500 italic",children:"No reason provided"})})}),r&&(0,u.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs",children:e.admin_notes?(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"truncate",title:e.admin_notes,children:e.admin_notes}),e.admin_name&&(0,u.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["by ",e.admin_name]})]}):(0,u.jsx)("span",{className:"text-gray-500 italic",children:"pending"===e.status?"Awaiting review":"No notes"})}),i&&(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:"pending"===e.status?(0,u.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,u.jsxs)("button",{onClick:()=>n&&n(e),className:"inline-flex items-center px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-lg transition-colors",title:"Approve and allocate PINs",children:[(0,u.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"Approve"]}),(0,u.jsxs)("button",{onClick:()=>l&&l(e),className:"inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs font-medium rounded-lg transition-colors",title:"Reject request",children:[(0,u.jsx)(x.A,{className:"w-3 h-3 mr-1"}),"Reject"]})]}):(0,u.jsx)("span",{className:"text-gray-500 text-xs italic",children:"approved"===e.status?"Approved":"Rejected"})})]},e.id))})]})})});v.displayName="PinRequestTable";const k=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{autoRefresh:t=!0,refreshInterval:a=3e4,enableRealtime:n=!0}=s,[l,d]=(0,r.useState)(0),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(null),j=(0,r.useCallback)(async()=>{if(console.log("[usePinBalance] Loading balance for userId: ".concat(e)),e)try{o(!0),m(null);const s=await i.Ay.getUserPinBalance(e);console.log("[usePinBalance] Balance fetched from service: ".concat(s)),d(s),u(new Date)}catch(s){console.error("Failed to load PIN balance:",s),m(s.message)}finally{o(!1)}},[e]),N=(0,r.useCallback)(()=>{j()},[j]);return(0,r.useEffect)(()=>{if(!e||!n)return;const s=i.Ay.subscribeToPinBalance(e,e=>{j()});return p.current=s,()=>{p.current&&p.current.unsubscribe()}},[e,n,j]),(0,r.useEffect)(()=>{if(!t||!e)return;const s=setInterval(()=>{j()},a);return g.current=s,()=>{g.current&&clearInterval(g.current)}},[t,a,j,e]),(0,r.useEffect)(()=>{j()},[j]),{balance:l,loading:c,error:x,lastUpdated:h,refresh:N}},P=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{limit:t=50,autoRefresh:a=!0,refreshInterval:n=6e4,enableRealtime:l=!0,filters:d={}}=s,[c,o]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),j=(0,r.useRef)(null),N=(0,r.useRef)(null),f=(0,r.useCallback)(async()=>{if(e)try{m(!0),u(null),console.log("[usePinTransactions] Loading transactions for userId: ".concat(e));const s=await i.Ay.getUserPinTransactions(e,t);console.log("[usePinTransactions] Transactions fetched from service:",s),o(s),g(new Date)}catch(s){console.error("Failed to load PIN transactions:",s),u(s.message)}finally{m(!1)}},[e,t]),b=(0,r.useCallback)(()=>{f()},[f]);return(0,r.useEffect)(()=>{if(!e||!l)return;const s=i.Ay.subscribeToPinTransactions(e=>{f()},e);return j.current=s,()=>{j.current&&j.current.unsubscribe()}},[e,l,f]),(0,r.useEffect)(()=>{if(!a||!e)return;const s=setInterval(()=>{f()},n);return N.current=s,()=>{N.current&&clearInterval(N.current)}},[a,n,f,e]),(0,r.useEffect)(()=>{f()},[f]),{transactions:c,loading:x,error:h,lastUpdated:p,refresh:b}},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{autoRefresh:t=!0,refreshInterval:a=12e4,enableRealtime:n=!1}=s,[l,d]=(0,r.useState)({totalTransactions:0,customerCreations:0,adminAllocations:0,adminDeductions:0,totalPinsAllocated:0,totalPinsDeducted:0}),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(null),p=(0,r.useRef)(null),g=(0,r.useCallback)(async()=>{try{o(!0),m(null),console.log("[usePinStats] Loading stats for userId: ".concat(e));const s=await i.Ay.getPinTransactionStats(e);console.log("[usePinStats] Stats fetched from service:",s),d(s),u(new Date)}catch(s){console.error("Failed to load PIN stats:",s),m(s.message)}finally{o(!1)}},[e]),j=(0,r.useCallback)(()=>{g()},[g]);return(0,r.useEffect)(()=>{if(!t)return;const e=setInterval(()=>{g()},a);return p.current=e,()=>{p.current&&clearInterval(p.current)}},[t,a,g]),(0,r.useEffect)(()=>{g()},[g]),{stats:l,loading:c,error:x,lastUpdated:h,refresh:j}},q=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=k(e,s),a=P(e,s),n=A(e,s),l=(0,r.useCallback)(()=>{t.refresh(),a.refresh(),n.refresh()},[t.refresh,a.refresh,n.refresh]);return{balance:t,transactions:a,stats:n,refreshAll:l,loading:t.loading||a.loading||n.loading}};var I=t(2631),R=t(2380);const S=(e,s)=>{const t=[...s].sort((e,s)=>new Date(e.created_at)-new Date(s.created_at)).findIndex(s=>s.id===e.id),r=String(t+1).padStart(2,"0");return"PIN_REQ-".concat(r)};const C=function(){const{user:e}=(0,a.As)(),{showSuccess:s,showError:t}=(0,n.L5)();(0,l.Zp)(),(0,N.r9)();const[i,o]=(0,r.useState)("pin-requests"),[x,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[b,w]=(0,r.useState)(!1),[y,v]=(0,r.useState)({totalRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0}),{balance:k,transactions:P,stats:A,refreshAll:C,loading:E}=q(null===e||void 0===e?void 0:e.id,{autoRefresh:!0,refreshInterval:3e4,enableRealtime:!0}),D=async()=>{try{w(!0);const s=await d.Ay.getPinRequests(null,null,100),t=s.filter(s=>s.promoter_id===e.id),r=await d.Ay.getPinRequestStats(e.id);j(s),p(t),v(r)}catch(s){t("Failed to load PIN requests. Please try again.")}finally{w(!1)}};return(0,r.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&D()},[null===e||void 0===e?void 0:e.id]),E||b?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(N.wE,{}),(0,u.jsx)(N.dQ,{children:(0,u.jsx)(I.YB,{type:"pin-management"})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(N.wE,{}),(0,u.jsxs)(N.dQ,{children:[(0,u.jsx)("div",{className:"min-h-screen pt-40 px-8 pb-8",children:(0,u.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,u.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8","data-animate":!0,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"PIN Management"}),(0,u.jsx)("p",{className:"text-slate-400",children:"Monitor your PIN balance and request new PINs"})]}),(0,u.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center space-x-4",children:[(0,u.jsxs)(N.Rq,{onClick:()=>m(!0),className:"flex items-center space-x-2",children:[(0,u.jsx)(R.A,{className:"w-5 h-5"}),(0,u.jsx)("span",{children:"Request PINs"})]}),(0,u.jsx)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 min-w-[200px]",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"text-sm font-medium text-slate-300",children:"Available Pins"}),(0,u.jsx)("p",{className:"text-2xl font-bold ".concat(((null===k||void 0===k?void 0:k.balance)||0)>0?"text-white":"text-red-400"),children:(null===k||void 0===k?void 0:k.balance)||0}),(0,u.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:0===((null===k||void 0===k?void 0:k.balance)||0)?"No pins available - contact admin":"Required: 1 pin per customer"})]}),(0,u.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(((null===k||void 0===k?void 0:k.balance)||0)>0?"bg-orange-500":"bg-red-500"),children:(0,u.jsx)(c.A,{className:"w-5 h-5 text-white"})})]})})]})]}),(0,u.jsx)(N.Xg,{className:"overflow-hidden",variant:"glassDark","data-animate":!0,children:b?(0,u.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-400 mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-gray-400",children:"Loading PIN requests..."})]})}):(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"w-full",children:[(0,u.jsx)("thead",{className:"bg-gray-800/50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Request ID"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"PINs"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,u.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Reason"})]})}),(0,u.jsx)("tbody",{className:"divide-y divide-gray-700/50",children:0===(h||[]).length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:"No PIN requests found. Submit your first request to get started!"})}):(h||[]).map((e,s)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:S(e,g)})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(c.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,u.jsx)("span",{className:"text-lg font-bold text-white",children:e.requested_pins||e.quantity})]})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,u.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"pending"===e.status?"\u23f3 Pending":"approved"===e.status?"\u2705 Approved":"rejected"===e.status?"\u274c Rejected":"\u2753 Unknown"})}),(0,u.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300 max-w-xs truncate",children:e.reason||"No reason provided"})]},e.id))})]})})})]})}),(0,u.jsx)(f,{isOpen:x,onClose:()=>m(!1),promoterId:null===e||void 0===e?void 0:e.id,onSuccess:e=>{s(e),D(),C()},onError:e=>{t(e)}})]})]})}},2380:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(3797).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2631:(e,s,t)=>{t.d(s,{YB:()=>j});t(5043);var r=t(579);const a="rgba(247, 147, 30, 0.1)",n="rgba(255, 255, 255, 0.05)",l="\n  @keyframes bp-skeleton-shimmer {\n    0% {\n      background-position: -200px 0;\n    }\n    100% {\n      background-position: calc(200px + 100%) 0;\n    }\n  }\n  \n  .bp-skeleton-shimmer {\n    background: linear-gradient(\n      90deg,\n      ".concat(n," 25%,\n      ").concat(a," 50%,\n      ").concat(n," 75%\n    );\n    background-size: 200px 100%;\n    animation: bp-skeleton-shimmer 1.5s infinite linear;\n  }\n");if("undefined"!==typeof document&&!document.getElementById("bp-skeleton-styles")){const e=document.createElement("style");e.id="bp-skeleton-styles",e.textContent=l,document.head.appendChild(e)}const i=e=>{let{width:s="100%",height:t="1rem",className:a="",rounded:l="rounded-lg",animate:i=!0}=e;return(0,r.jsx)("div",{className:"".concat(l," border border-white/10 ").concat(i?"bp-skeleton-shimmer":""," ").concat(a),style:{width:s,height:t,background:i?void 0:n}})},d=e=>{let{className:s=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 h-full ".concat(s),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)(i,{width:"3rem",height:"3rem",rounded:"rounded-xl"}),(0,r.jsx)(i,{width:"3rem",height:"2rem"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i,{width:"70%",height:"1rem"}),(0,r.jsx)(i,{width:"90%",height:"0.75rem"})]})]})},c=e=>{let{rows:s=5,columns:t=4,className:a=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl overflow-hidden ".concat(a),children:[(0,r.jsx)("div",{className:"bg-white/5 p-4 border-b border-white/10",children:(0,r.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,s)=>(0,r.jsx)(i,{width:"80%",height:"1rem"},s))})}),(0,r.jsx)("div",{className:"divide-y divide-white/10",children:Array.from({length:s}).map((e,s)=>(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:Array.from({length:t}).map((e,s)=>(0,r.jsx)(i,{width:0===s?"90%":"70%",height:"1rem"},s))})},s))})]})},o=e=>{let{count:s=2,className:t=""}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-".concat(Math.min(s,4)," gap-4 ").concat(t),children:Array.from({length:s}).map((e,s)=>(0,r.jsx)(d,{},s))})},x=e=>{let{count:s=6,className:t=""}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ".concat(t),children:Array.from({length:s}).map((e,s)=>(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i,{width:"8rem",height:"0.75rem"}),(0,r.jsx)(i,{width:"4rem",height:"2rem"})]}),(0,r.jsx)(i,{width:"3rem",height:"3rem",rounded:"rounded-xl"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(i,{width:"60%",height:"0.75rem"})})]},s))})},m=e=>{let{className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-4 ".concat(s),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(i,{width:"3rem",height:"3rem",rounded:"rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)(i,{width:"60%",height:"1rem"}),(0,r.jsx)(i,{width:"40%",height:"0.75rem"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i,{width:"2rem",height:"2rem",rounded:"rounded-lg"}),(0,r.jsx)(i,{width:"2rem",height:"2rem",rounded:"rounded-lg"})]})]})})},h=e=>{let{className:s="",showButton:t=!1}=e;return(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8 ".concat(s),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i,{width:"15rem",height:"2.5rem",className:"mb-2"}),(0,r.jsx)(i,{width:"20rem",height:"1rem"})]}),t&&(0,r.jsx)(i,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"})]})},u=e=>{let{tabs:s=3,className:t=""}=e;return(0,r.jsx)("div",{className:"flex space-x-1 mb-8 ".concat(t),children:Array.from({length:s}).map((e,s)=>(0,r.jsx)(i,{width:"8rem",height:"3rem",rounded:"rounded-lg"},s))})},p=e=>{let{className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 mb-8 ".concat(s),children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(i,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})}),(0,r.jsx)("div",{className:"md:w-48",children:(0,r.jsx)(i,{width:"100%",height:"2.5rem",rounded:"rounded-lg"})})]})})},g=e=>{let{className:s=""}=e;return(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 ".concat(s),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i,{width:"8rem",height:"1rem"}),(0,r.jsx)(i,{width:"6rem",height:"0.75rem"})]}),(0,r.jsx)(i,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(i,{width:"4rem",height:"0.75rem"}),(0,r.jsx)(i,{width:"6rem",height:"0.75rem"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(i,{width:"5rem",height:"0.75rem"}),(0,r.jsx)(i,{width:"7rem",height:"0.75rem"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 mt-4 pt-4 border-t border-white/10",children:[(0,r.jsx)(i,{width:"4rem",height:"2rem",rounded:"rounded-lg"}),(0,r.jsx)(i,{width:"4rem",height:"2rem",rounded:"rounded-lg"})]})]})},j=e=>{let{type:s="dashboard"}=e;switch(s){case"dashboard":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(o,{count:4}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>(0,r.jsx)(d,{},s))})]})]})});case"pin-management":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{showButton:!0}),(0,r.jsx)(u,{tabs:3}),(0,r.jsx)(x,{count:6}),(0,r.jsx)(p,{}),(0,r.jsx)(c,{rows:8,columns:5})]})});case"customers":case"promoters":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{showButton:!0}),(0,r.jsx)(p,{}),(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:8}).map((e,s)=>(0,r.jsx)(m,{},s))})]})});case"withdrawals":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{}),(0,r.jsx)(p,{}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>(0,r.jsx)(g,{},s))})]})});case"approval":return(0,r.jsx)("div",{className:"min-h-screen p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)(h,{}),(0,r.jsxs)("div",{className:"mb-8 flex justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i,{width:"12rem",height:"2rem"}),(0,r.jsx)(i,{width:"20rem",height:"1rem",className:"mt-2"})]}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(i,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"}),(0,r.jsx)(i,{width:"8rem",height:"2.5rem",rounded:"rounded-lg"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-4",children:(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-6 h-[calc(100vh-250px)]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)(i,{width:"8rem",height:"1.5rem"}),(0,r.jsx)(i,{width:"4rem",height:"1.5rem",rounded:"rounded-full"})]}),(0,r.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,s)=>(0,r.jsxs)("div",{className:"bg-white/5 border border-slate-200/10 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)(i,{width:"10rem",height:"1rem"}),(0,r.jsx)(i,{width:"4rem",height:"0.75rem"})]}),(0,r.jsx)(i,{width:"12rem",height:"0.75rem"})]},s))})]})}),(0,r.jsx)("div",{className:"lg:col-span-8",children:(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-slate-200/10 rounded-xl p-8",children:[(0,r.jsxs)("div",{className:"flex items-center mb-8",children:[(0,r.jsx)(i,{width:"3.5rem",height:"3.5rem",rounded:"rounded-xl"}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)(i,{width:"8rem",height:"1.5rem"}),(0,r.jsx)(i,{width:"12rem",height:"0.75rem",className:"mt-1"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(i,{width:"6rem",height:"0.75rem"}),(0,r.jsxs)("div",{className:"bg-white/5 border border-slate-200/10 rounded-xl p-5 space-y-4",children:[(0,r.jsx)(i,{width:"8rem",height:"0.5rem"}),(0,r.jsx)(i,{width:"12rem",height:"1rem"}),(0,r.jsx)(i,{width:"10rem",height:"0.5rem"}),(0,r.jsx)(i,{width:"14rem",height:"1rem"})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(i,{width:"6rem",height:"0.75rem"}),(0,r.jsxs)("div",{className:"bg-white/5 border border-slate-200/10 rounded-xl p-5 space-y-4",children:[(0,r.jsx)(i,{width:"8rem",height:"0.5rem"}),(0,r.jsx)(i,{width:"10rem",height:"1rem"}),(0,r.jsx)(i,{width:"12rem",height:"1rem"}),(0,r.jsx)(i,{width:"8rem",height:"1rem"})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-slate-200/10 pt-8",children:[(0,r.jsx)(i,{width:"6rem",height:"0.75rem",className:"mb-3"}),(0,r.jsx)(i,{width:"100%",height:"6rem",rounded:"rounded-xl"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)(i,{width:"5rem",height:"2.5rem",rounded:"rounded-lg"}),(0,r.jsx)(i,{width:"5rem",height:"2.5rem",rounded:"rounded-lg"}),(0,r.jsx)(i,{width:"6rem",height:"2.5rem",rounded:"rounded-lg"})]})]})]})})]})]})});default:return(0,r.jsx)(j,{type:"dashboard"})}}},2817:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(3797).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2938:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(3797).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5275:(e,s,t)=>{t.d(s,{A:()=>r});const r=(0,t(3797).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])}}]);
//# sourceMappingURL=252.020985b5.chunk.js.map