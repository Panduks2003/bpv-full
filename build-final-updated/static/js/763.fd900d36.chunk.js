"use strict";(self.webpackChunkbrightplanet_ventures=self.webpackChunkbrightplanet_ventures||[]).push([[763],{763:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var a=t(9379),r=t(5043),l=t(6621),d=t(3216),n=t(1921),i=t(3959),c=t(3792),o=t(2699),m=t(1172),x=t(987),u=t(5923),h=t(8775),p=t(5897),b=t(917),g=t(4847);const j=class{static async verifyCurrentPassword(e,s){try{const t=await fetch("".concat(g.H,"/customer-password-reset/verify-current-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e.trim().toUpperCase(),currentPassword:s.trim()})}),a=await t.json();if(!t.ok||!a.success)throw new Error(a.message||"Password verification failed");return a}catch(t){throw console.error("Password verification error:",t),t}}static async updatePassword(e,s,t){try{const a=await fetch("".concat(g.H,"/customer-password-reset/update-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e.trim().toUpperCase(),currentPassword:s.trim(),newPassword:t.trim()})}),r=await a.json();if(!a.ok||!r.success)throw new Error(r.message||"Password update failed");return r}catch(a){throw console.error("Password update error:",a),a}}static validatePasswordStrength(e){const s=e.length>=8,t=/[A-Z]/.test(e),a=/[a-z]/.test(e),r=/\d/.test(e),l=/[@$!%*?&]/.test(e),d=[];return s||d.push("At least 8 characters"),t||d.push("1 uppercase letter"),a||d.push("1 lowercase letter"),r||d.push("1 number"),l||d.push("1 special character (@$!%*&)"),{isValid:s&&t&&a&&r&&l,errors:d,strength:this.calculatePasswordStrength(e)}}static calculatePasswordStrength(e){let s=0;return e.length>=8&&(s+=20),e.length>=12&&(s+=10),/[a-z]/.test(e)&&(s+=15),/[A-Z]/.test(e)&&(s+=15),/\d/.test(e)&&(s+=15),/[@$!%*?&]/.test(e)&&(s+=15),/[^a-zA-Z0-9@$!%*?&]/.test(e)&&(s+=10),Math.min(s,100)}static getStrengthColor(e){return e<30?"text-red-500":e<50?"text-orange-500":e<70?"text-yellow-500":e<90?"text-green-500":"text-green-600"}static getStrengthText(e){return e<30?"Very Weak":e<50?"Weak":e<70?"Fair":e<90?"Good":"Strong"}};var f=t(579);const N=function(e){let{isOpen:s,onClose:t,customerInfo:l}=e;const{showSuccess:d,showError:i}=(0,n.L5)(),[c,g]=(0,r.useState)("verify"),[N,y]=(0,r.useState)(""),[w,v]=(0,r.useState)(""),[A,P]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!1),[F,M]=(0,r.useState)(!1),[D,q]=(0,r.useState)(!1),[I,B]=(0,r.useState)(0),[R,U]=(0,r.useState)({});(0,r.useEffect)(()=>{s&&L()},[s]);const L=()=>{g("verify"),y(""),v(""),P(""),B(0),U({}),E(!1),M(!1),q(!1)};return(0,r.useEffect)(()=>{if(w){const e=j.validatePasswordStrength(w);B(e.strength),e.isValid?U(e=>(0,a.A)((0,a.A)({},e),{},{newPassword:""})):U(s=>(0,a.A)((0,a.A)({},s),{},{newPassword:e.errors.join(", ")}))}else B(0),U(e=>(0,a.A)((0,a.A)({},e),{},{newPassword:""}))},[w]),(0,r.useEffect)(()=>{U(A&&w&&w!==A?e=>(0,a.A)((0,a.A)({},e),{},{confirmPassword:"Passwords do not match"}):e=>(0,a.A)((0,a.A)({},e),{},{confirmPassword:""}))},[A,w]),s?(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,f.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(o.A,{className:"w-6 h-6 text-blue-600 mr-3"}),(0,f.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["verify"===c&&"Verify Current Password","new-password"===c&&"Set New Password","success"===c&&"Password Updated!"]})]}),(0,f.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,f.jsx)(m.A,{className:"w-5 h-5"})})]}),(0,f.jsxs)("div",{className:"p-6",children:["verify"===c&&(0,f.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N){C(!0),U({});try{await j.verifyCurrentPassword(l.customerId,N),d("Current password verified successfully"),g("new-password")}catch(s){U({currentPassword:s.message})}finally{C(!1)}}else U({currentPassword:"Please enter your current password"})},className:"space-y-4",children:[(0,f.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)(x.A,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0"}),(0,f.jsx)("p",{className:"text-sm text-blue-700",children:"For your security, please enter your current password to continue."})]})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("input",{type:S?"text":"password",value:N,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Enter current password",disabled:k}),(0,f.jsx)("button",{type:"button",onClick:()=>E(!S),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S?(0,f.jsx)(u.A,{className:"w-4 h-4"}):(0,f.jsx)(h.A,{className:"w-4 h-4"})})]}),R.currentPassword&&(0,f.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.currentPassword})]}),(0,f.jsx)("button",{type:"submit",disabled:k||!N,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:k?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Password"})]}),"new-password"===c&&(0,f.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s={};w||(s.newPassword="Please enter a new password"),A||(s.confirmPassword="Please confirm your new password");const a=j.validatePasswordStrength(w);if(a.isValid||(s.newPassword=a.errors.join(", ")),w!==A&&(s.confirmPassword="Passwords do not match"),Object.keys(s).length>0)U(s);else{C(!0),U({});try{await j.updatePassword(l.customerId,N,w),d("Password updated successfully!"),g("success"),setTimeout(()=>{t(),L()},3e3)}catch(r){U({update:r.message||"Failed to update password. Please try again."})}finally{C(!1)}}},className:"space-y-4",children:[(0,f.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded",children:(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)(b.A,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}),(0,f.jsx)("p",{className:"text-sm text-green-700",children:"Current password verified! Now set your new password."})]})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("input",{type:F?"text":"password",value:w,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Enter new password",disabled:k}),(0,f.jsx)("button",{type:"button",onClick:()=>M(!F),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:F?(0,f.jsx)(u.A,{className:"w-4 h-4"}):(0,f.jsx)(h.A,{className:"w-4 h-4"})})]}),w&&(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,f.jsx)("span",{className:"text-xs text-gray-600",children:"Password Strength"}),(0,f.jsx)("span",{className:"text-xs font-medium ".concat(j.getStrengthColor(I)),children:j.getStrengthText(I)})]}),(0,f.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,f.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(I<30?"bg-red-500":I<50?"bg-orange-500":I<70?"bg-yellow-500":I<90?"bg-green-500":"bg-green-600"),style:{width:"".concat(I,"%")}})})]}),R.newPassword&&(0,f.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.newPassword})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("input",{type:D?"text":"password",value:A,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Confirm new password",disabled:k}),(0,f.jsx)("button",{type:"button",onClick:()=>q(!D),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:D?(0,f.jsx)(u.A,{className:"w-4 h-4"}):(0,f.jsx)(h.A,{className:"w-4 h-4"})})]}),R.confirmPassword&&(0,f.jsx)("p",{className:"mt-1 text-sm text-red-600",children:R.confirmPassword})]}),(0,f.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,f.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Password Requirements:"}),(0,f.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,f.jsxs)("li",{className:"flex items-center",children:[w.length>=8?(0,f.jsx)(b.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,f.jsx)("div",{className:"w-3 h-3 border border-gray-300 rounded-full mr-1"}),"At least 8 characters"]}),(0,f.jsxs)("li",{className:"flex items-center",children:[/[A-Z]/.test(w)?(0,f.jsx)(b.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,f.jsx)("div",{className:"w-3 h-3 border border-gray-300 rounded-full mr-1"}),"1 uppercase letter"]}),(0,f.jsxs)("li",{className:"flex items-center",children:[/[a-z]/.test(w)?(0,f.jsx)(b.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,f.jsx)("div",{className:"w-3 h-3 border border-gray-300 rounded-full mr-1"}),"1 lowercase letter"]}),(0,f.jsxs)("li",{className:"flex items-center",children:[/\d/.test(w)?(0,f.jsx)(b.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,f.jsx)("div",{className:"w-3 h-3 border border-gray-300 rounded-full mr-1"}),"1 number"]}),(0,f.jsxs)("li",{className:"flex items-center",children:[/[@$!%*?&]/.test(w)?(0,f.jsx)(b.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,f.jsx)("div",{className:"w-3 h-3 border border-gray-300 rounded-full mr-1"}),"1 special character (@$!%*&)"]})]})]}),R.update&&(0,f.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 rounded",children:(0,f.jsx)("p",{className:"text-sm text-red-600",children:R.update})}),(0,f.jsxs)("div",{className:"flex space-x-3",children:[(0,f.jsx)("button",{type:"button",onClick:()=>g("verify"),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300",children:"Back"}),(0,f.jsx)("button",{type:"submit",disabled:k||!w||!A||!j.validatePasswordStrength(w).isValid||w!==A,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:k?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Password"})]})]}),"success"===c&&(0,f.jsxs)("div",{className:"text-center py-8",children:[(0,f.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,f.jsx)(b.A,{className:"w-8 h-8 text-green-600"})}),(0,f.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Password Updated Successfully!"}),(0,f.jsx)("p",{className:"text-gray-600 mb-6",children:"Your password has been changed. You will be redirected automatically."}),(0,f.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded text-left",children:(0,f.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,f.jsx)("strong",{children:"Security Note:"})," For your protection, you may need to login again with your new password."]})})]})]})]})}):null};var y=t(2817),w=t(9120),v=t(8024),A=t(9589),P=t(5680),k=t(2938),C=t(6713),S=t(8296),E=t(3458);const F=e=>{let{stage:s}=e;const t=(()=>{switch(s){case"profile":return{icon:(0,f.jsx)(y.A,{className:"w-8 h-8 text-blue-400 animate-pulse"}),title:"Loading Profile...",description:"Fetching your profile information"};case"payments":return{icon:(0,f.jsx)(w.A,{className:"w-8 h-8 text-green-400 animate-pulse"}),title:"Loading Payment Status...",description:"Checking your payment history"};case"complete":return{icon:(0,f.jsx)(b.A,{className:"w-8 h-8 text-orange-400 animate-bounce"}),title:"Almost Done...",description:"Finalizing data loading"};case"error":return{icon:(0,f.jsx)(x.A,{className:"w-8 h-8 text-red-400"}),title:"Error Loading Data",description:"Please refresh the page and try again"};default:return{icon:(0,f.jsx)(p.A,{className:"w-8 h-8 text-orange-400 animate-spin"}),title:"Initializing...",description:"Preparing to load your data"}}})();return(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 space-y-4",children:[(0,f.jsxs)("div",{className:"relative",children:[t.icon,(0,f.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:t.title}),(0,f.jsx)("p",{className:"text-sm text-slate-400",children:t.description}),(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-4",children:[(0,f.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("profile"===s||"payments"===s||"complete"===s?"bg-blue-400":"bg-slate-600")}),(0,f.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("payments"===s||"complete"===s?"bg-blue-400":"bg-slate-600")}),(0,f.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 ".concat("complete"===s?"bg-blue-400":"bg-slate-600")})]})]})]})};function M(e){let{onClose:s,onSave:t}=e;const[l,d]=(0,r.useState)({fullName:"",gender:"",mobileNumber:"",email:"",fathersName:"",address:"",city:"",state:"",pincode:"",aadhaarNumber:"",panNumber:"",aadhaarFront:null,aadhaarBack:null,panFront:null,panBack:null}),n=e=>{const{name:s,value:t,files:r}=e.target;d(e=>(0,a.A)((0,a.A)({},e),{},{[s]:r?r[0]:t}))};return(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,f.jsx)("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,f.jsxs)("div",{className:"p-6",children:[(0,f.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,f.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"KYC Verification"}),(0,f.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:(0,f.jsx)(m.A,{className:"w-6 h-6"})})]}),(0,f.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded",children:(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)(v.A,{className:"h-5 w-5 text-blue-500"})}),(0,f.jsx)("div",{className:"ml-3",children:(0,f.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,f.jsx)("strong",{children:"Auto-filled Information:"})," Some fields have been pre-filled from your profile. Please review and update any information as needed before submitting."]})})]})}),(0,f.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded",children:(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)("div",{className:"flex-shrink-0",children:(0,f.jsx)(x.A,{className:"h-5 w-5 text-yellow-500"})}),(0,f.jsx)("div",{className:"ml-3",children:(0,f.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,f.jsx)("strong",{children:"Important:"})," Please ensure all information is accurate and documents are clear and readable. KYC verification is mandatory for account security and compliance."]})})]})}),(0,f.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(l)},className:"space-y-8",children:[(0,f.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,f.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FULL NAME"}),(0,f.jsx)("input",{type:"text",name:"fullName",value:l.fullName,onChange:n,className:"w-full p-2 border rounded-md bg-gray-50",required:!0,disabled:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GENDER"}),(0,f.jsxs)("select",{name:"gender",value:l.gender,onChange:n,className:"w-full p-2 border rounded-md",required:!0,children:[(0,f.jsx)("option",{value:"",children:"Select Gender"}),(0,f.jsx)("option",{value:"male",children:"Male"}),(0,f.jsx)("option",{value:"female",children:"Female"}),(0,f.jsx)("option",{value:"other",children:"Other"}),(0,f.jsx)("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),(0,f.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,f.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MOBILE NUMBER"}),(0,f.jsx)("input",{type:"tel",name:"mobileNumber",value:l.mobileNumber,onChange:n,className:"w-full p-2 border rounded-md bg-gray-50",required:!0,disabled:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FATHER'S NAME"}),(0,f.jsx)("input",{type:"text",name:"fathersName",value:l.fathersName,onChange:n,className:"w-full p-2 border rounded-md",placeholder:"Enter your father's name",required:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"EMAIL ADDRESS"}),(0,f.jsx)("input",{type:"email",name:"email",value:l.email,onChange:n,className:"w-full p-2 border rounded-md bg-gray-50",required:!0,disabled:!0})]})]})]}),(0,f.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,f.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Address Information"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{className:"md:col-span-2",children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"FULL ADDRESS"}),(0,f.jsx)("input",{type:"text",name:"address",value:l.address,onChange:n,className:"w-full p-2 border rounded-md",required:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CITY"}),(0,f.jsx)("input",{type:"text",name:"city",value:l.city,onChange:n,className:"w-full p-2 border rounded-md",required:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"STATE"}),(0,f.jsx)("input",{type:"text",name:"state",value:l.state,onChange:n,className:"w-full p-2 border rounded-md",required:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN CODE"}),(0,f.jsx)("input",{type:"text",name:"pincode",value:l.pincode,onChange:n,className:"w-full p-2 border rounded-md",required:!0})]})]})]}),(0,f.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,f.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Identity Information"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AADHAAR NUMBER"}),(0,f.jsx)("input",{type:"text",name:"aadhaarNumber",value:l.aadhaarNumber,onChange:n,className:"w-full p-2 border rounded-md",placeholder:"Enter 12-digit Aadhaar number",pattern:"[0-9]{12}",maxLength:"12",required:!0})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PAN NUMBER"}),(0,f.jsx)("input",{type:"text",name:"panNumber",value:l.panNumber,onChange:n,className:"w-full p-2 border rounded-md uppercase",placeholder:"Enter 10-character PAN number (e.g., ABCDE1234F)",pattern:"[A-Z]{5}[0-9]{4}[A-Z]{1}",maxLength:"10",required:!0})]})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:["Document Uploads ",(0,f.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,f.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"All documents are mandatory"}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AADHAAR CARD (FRONT)"}),(0,f.jsx)("input",{type:"file",name:"aadhaarFront",onChange:n,className:"w-full p-2 border rounded-md text-sm",accept:".jpg,.jpeg,.png",required:!0}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload clear image of Aadhaar front side (Max: 2MB)"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AADHAAR CARD (BACK)"}),(0,f.jsx)("input",{type:"file",name:"aadhaarBack",onChange:n,className:"w-full p-2 border rounded-md text-sm",accept:".jpg,.jpeg,.png",required:!0}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload clear image of Aadhaar back side (Max: 2MB)"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PAN CARD (FRONT)"}),(0,f.jsx)("input",{type:"file",name:"panFront",onChange:n,className:"w-full p-2 border rounded-md text-sm",accept:".jpg,.jpeg,.png",required:!0}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload clear image of PAN front side (Max: 2MB)"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PAN CARD (BACK)"}),(0,f.jsx)("input",{type:"file",name:"panBack",onChange:n,className:"w-full p-2 border rounded-md text-sm",accept:".jpg,.jpeg,.png",required:!0}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload clear image of PAN back side (Max: 2MB)"})]})]})]}),(0,f.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,f.jsx)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to reset the form? All entered data will be lost.")&&d({fullName:"",gender:"",mobileNumber:"",email:"",fathersName:"",address:"",city:"",state:"",pincode:"",aadhaarNumber:"",panNumber:"",aadhaarFront:null,aadhaarBack:null,panFront:null,panBack:null})},className:"px-6 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Reset Form"}),(0,f.jsxs)("div",{className:"space-x-3",children:[(0,f.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,f.jsx)("button",{type:"submit",className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Submit KYC"})]})]})]})]})})})}const D=function(){var e,s;const{user:t}=(0,l.As)(),{showSuccess:a,showError:o}=(0,n.L5)();(0,d.Zp)(),(0,i.r9)();const[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!0),[j,w]=(0,r.useState)("initial"),[v,D]=(0,r.useState)(!1),[q,I]=(0,r.useState)(!1),[B,R]=(0,r.useState)({totalPaid:0,pendingPayments:0,completedMonths:0}),[U,L]=(0,r.useState)({name:"",email:"",phone:"",address:"",city:"",state:"",pincode:""});return(0,r.useEffect)(()=>{t&&(async()=>{try{g(!0),w("profile");const{data:e,error:s}=await c.ND.from("profiles").select("*").eq("id",t.id).single();if(s)throw s;x(e),L({name:e.name||"",email:e.email||"",phone:e.phone||e.mobile||"",address:e.address||"",city:e.city||"",state:e.state||"",pincode:e.pincode||""}),w("payments");const{data:a,error:r}=await c.ND.from("customer_payments").select("status, month_number").eq("customer_id",t.id);if(!r&&a){const e=a.filter(e=>"paid"===e.status).length,s=a.filter(e=>"pending"===e.status).length;a.filter(e=>"unpaid"===e.status).length,R({totalPaid:e,pendingPayments:s,completedMonths:e})}w("complete")}catch(e){o("Failed to load profile: "+e.message),w("error")}finally{g(!1)}})()},[t]),p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.wE,{}),(0,f.jsx)(i.dQ,{children:(0,f.jsx)(F,{stage:j})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.wE,{}),(0,f.jsx)(i.dQ,{children:(0,f.jsx)("div",{className:"min-h-screen pt-20 pb-4",children:(0,f.jsxs)("div",{className:"max-w-[98%] lg:max-w-[1800px] mx-auto px-4 lg:px-8 py-10 bg-blue-900/20 backdrop-blur-md rounded-3xl my-6 shadow-2xl border border-white/5",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,f.jsx)("div",{className:"lg:col-span-1",children:(0,f.jsx)(i.Xg,{className:"h-full border-0 shadow-2xl",children:(0,f.jsxs)("div",{className:"flex flex-col items-center p-6",children:[(0,f.jsx)("div",{className:"relative mb-6",children:(0,f.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white text-4xl font-bold shadow-xl",children:(null===m||void 0===m||null===(e=m.name)||void 0===e||null===(s=e.charAt(0))||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,f.jsx)("h2",{className:"text-xl font-bold text-center text-white mb-2",children:(null===m||void 0===m?void 0:m.name)||"User Name"}),(0,f.jsxs)("p",{className:"text-blue-300 text-sm font-medium mb-6",children:["Customer ID: ",(null===m||void 0===m?void 0:m.customer_id)||"N/A"]}),(0,f.jsxs)("div",{className:"w-full mt-4 space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center text-sm",children:[(0,f.jsx)(A.A,{className:"w-4 h-4 mr-3 text-blue-300"}),(0,f.jsx)("span",{className:"text-white font-medium",children:(null===m||void 0===m?void 0:m.email)||"No email provided"})]}),(0,f.jsxs)("div",{className:"flex items-center text-sm",children:[(0,f.jsx)(P.A,{className:"w-4 h-4 mr-3 text-blue-300"}),(0,f.jsx)("span",{className:"text-white font-medium",children:(null===m||void 0===m?void 0:m.phone)||(null===m||void 0===m?void 0:m.mobile)||"No phone provided"})]}),(0,f.jsxs)("div",{className:"flex items-center text-sm",children:[(0,f.jsx)(k.A,{className:"w-4 h-4 mr-3 text-blue-300"}),(0,f.jsx)("span",{className:"text-white font-medium",children:null!==m&&void 0!==m&&m.created_at?new Date(m.created_at).toLocaleDateString("en-IN"):"N/A"})]})]}),(0,f.jsxs)("div",{className:"w-full mt-6 pt-4 border-t border-blue-500/30",children:[(0,f.jsx)("h3",{className:"font-medium text-white mb-3 text-sm",children:"Account Status"}),(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsx)("span",{className:"text-blue-200",children:"Verification"}),(0,f.jsxs)("span",{className:"flex items-center px-3 py-1 bg-blue-500/30 text-blue-300 text-xs rounded-full",children:[(0,f.jsx)(b.A,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]}),(0,f.jsxs)("div",{className:"w-full mt-4 pt-4 border-t border-blue-500/30",children:[(0,f.jsx)("h3",{className:"font-medium text-white mb-3 text-sm",children:"Investment Plan"}),(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)("div",{className:"px-3 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-400/30 rounded-full mb-2",children:(0,f.jsx)("span",{className:"text-yellow-300 font-bold text-sm",children:(null===m||void 0===m?void 0:m.saving_plan)||"\u20b91000 per month for 20 months"})}),(0,f.jsxs)("p",{className:"text-gray-400 text-xs",children:["Batch: ",(null===m||void 0===m?void 0:m.batch)||"Not assigned"]})]})]}),(0,f.jsx)("div",{className:"w-full mt-6",children:(0,f.jsxs)(i.Rq,{onClick:()=>I(!0),fullWidth:!0,variant:"outline",className:"border-red-500/50 text-red-300 hover:bg-red-500/10 text-sm py-2",children:[(0,f.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Reset Password"]})})]})})}),(0,f.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,f.jsxs)(i.Xg,{className:"border-0 shadow-2xl",children:[(0,f.jsxs)("div",{className:"px-6 py-4 border-b border-blue-500/30",children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Personal Information"}),(0,f.jsx)("p",{className:"text-sm text-blue-200",children:"Your account details"})]}),(0,f.jsx)("div",{className:"px-6 py-4",children:(0,f.jsxs)("dl",{className:"sm:divide-y sm:divide-gray-200",children:[(0,f.jsxs)("div",{className:"py-3 sm:py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,f.jsxs)("dt",{className:"text-sm font-medium text-blue-200 flex items-center",children:[(0,f.jsx)(y.A,{className:"h-5 w-5 mr-3 text-blue-300"}),"Full Name"]}),(0,f.jsx)("dd",{className:"mt-1 text-sm text-white sm:mt-0 sm:col-span-2",children:(null===m||void 0===m?void 0:m.name)||"Not provided"})]}),(0,f.jsxs)("div",{className:"py-3 sm:py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,f.jsxs)("dt",{className:"text-sm font-medium text-blue-200 flex items-center",children:[(0,f.jsx)(A.A,{className:"h-5 w-5 mr-3 text-blue-300"}),"Email"]}),(0,f.jsx)("dd",{className:"mt-1 text-sm text-white sm:mt-0 sm:col-span-2",children:(null===m||void 0===m?void 0:m.email)||"Not provided"})]}),(0,f.jsxs)("div",{className:"py-3 sm:py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,f.jsxs)("dt",{className:"text-sm font-medium text-blue-200 flex items-center",children:[(0,f.jsx)(P.A,{className:"h-5 w-5 mr-3 text-blue-300"}),"Phone"]}),(0,f.jsx)("dd",{className:"mt-1 text-sm text-white sm:mt-0 sm:col-span-2",children:(null===m||void 0===m?void 0:m.phone)||(null===m||void 0===m?void 0:m.mobile)||"Not provided"})]}),(0,f.jsxs)("div",{className:"py-3 sm:py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,f.jsxs)("dt",{className:"text-sm font-medium text-blue-200 flex items-center",children:[(0,f.jsx)(S.A,{className:"h-5 w-5 mr-3 text-blue-300"}),"Address"]}),(0,f.jsx)("dd",{className:"mt-1 text-sm text-white sm:mt-0 sm:col-span-2",children:null!==m&&void 0!==m&&m.address?(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:m.address}),(0,f.jsx)("p",{className:"text-gray-400",children:[m.city,m.state,m.pincode].filter(Boolean).join(", ")})]}):"Not provided"})]})]})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4 mb-4",children:[(0,f.jsx)(i.Xg,{className:"bg-gradient-to-br from-green-700/30 to-green-800/30 border border-green-500/20",children:(0,f.jsxs)("div",{className:"p-4 text-center",children:[(0,f.jsx)("div",{className:"w-8 h-8 bg-green-500/30 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,f.jsx)(b.A,{className:"w-4 h-4 text-green-300"})}),(0,f.jsx)("h4",{className:"text-base font-bold text-white mb-1",children:B.completedMonths}),(0,f.jsx)("p",{className:"text-green-200 text-sm",children:"Paid Months"})]})}),(0,f.jsx)(i.Xg,{className:"bg-gradient-to-br from-yellow-700/30 to-yellow-800/30 border border-yellow-500/20",children:(0,f.jsxs)("div",{className:"p-4 text-center",children:[(0,f.jsx)("div",{className:"w-8 h-8 bg-yellow-500/30 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,f.jsx)(E.A,{className:"w-4 h-4 text-yellow-300"})}),(0,f.jsx)("h4",{className:"text-base font-bold text-white mb-1",children:B.pendingPayments}),(0,f.jsx)("p",{className:"text-yellow-200 text-sm",children:"Pending Months"})]})})]})]})]}),(0,f.jsx)("div",{className:"mt-6 flex justify-end"})]})})}),v&&(0,f.jsx)(M,{onClose:()=>D(!1),onSave:async e=>{try{a("KYC submitted successfully! Verification will take 2-3 business days."),D(!1)}catch(s){o("Failed to submit KYC: "+s.message)}}}),q&&(0,f.jsx)(N,{isOpen:q,onClose:()=>I(!1),customerInfo:{customerId:null===m||void 0===m?void 0:m.customer_id,name:null===m||void 0===m?void 0:m.name,id:null===m||void 0===m?void 0:m.id}})]})}},2817:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2938:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4847:(e,s,t)=>{t.d(s,{H:()=>a});const a="https://api.brightplanetventures.com/api"},5680:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8296:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9120:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}}]);
//# sourceMappingURL=763.fd900d36.chunk.js.map